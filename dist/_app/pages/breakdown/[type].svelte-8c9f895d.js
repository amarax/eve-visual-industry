var fi=Object.defineProperty;var fr=Object.getOwnPropertySymbols;var ci=Object.prototype.hasOwnProperty,_i=Object.prototype.propertyIsEnumerable;var cr=(e,l,t)=>l in e?fi(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,_r=(e,l)=>{for(var t in l||(l={}))ci.call(l,t)&&cr(e,t,l[t]);if(fr)for(var t of fr(l))_i.call(l,t)&&cr(e,t,l[t]);return e};import{K as hi,L as dl,P as hr,C as pr,S as el,i as tl,s as ll,e as I,t as R,c as k,a as T,g as j,d as h,f as O,H as f,h as le,M as ml,N as Mt,O as _e,I as Ze,Q as zt,R as dr,T as bl,U as pi,B as Tl,l as Pe,V as vt,W as It,X as Wt,Y as Zt,p as Dl,b as y,Z as mr,_ as wl,$ as ol,a0 as Fl,a1 as di,a2 as mi,a3 as bi,a4 as ct,a5 as _t,k as S,j as kt,n as V,m as Et,o as Tt,a6 as ht,x as ge,u as Me,v as Dt,a7 as Be,a8 as lt,r as yl,w as gl,a9 as pt,aa as yi,J as gi}from"../../chunks/vendor-05911bdc.js";import{r as vi,b as al}from"../../chunks/paths-c3a241ee.js";const Ii=vi,ki=Ei;async function Ei(e,l){return Ii.goto(e,l,[])}const Ti=()=>{const e=hi("__svelte__");return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:e.navigating.subscribe}},session:e.session}},Di={subscribe(e){return Ti().page.subscribe(e)}};console.log(al);async function Cl(e,l){let t=new URL(`https://esi.evetech.net/${l&&l.dev?"dev":"latest"}${e}`);const r=await fetch(t.toString(),{method:"GET",headers:{accept:"application/json"}}),i=await r.json();if(r.ok){let s=r.headers.get("X-Pages");return s&&parseInt(s)>1&&console.log("More pages were available but not retrieved",t.toString()),i}return Promise.reject(r)}async function wi(){const e=await fetch(`${al}/data/categories.json`,{method:"GET",headers:{accept:"application/json"}}),l=await e.json();return e.ok?l:Promise.reject(e)}async function Ci(){let e;try{e=await Yt("/data/invMarketGroups.csv")}catch(r){console.error(r)}let l={groups:{},groupTree:{}};e.forEach(r=>{l.groups[r.market_group_id]=r,r.types=[],r.parent_group_id=="None"&&delete r.parent_group_id});let t={};for(let r in l.groups){let i=l.groups[r];if(i.parent_group_id){let s=l.groups[i.parent_group_id];s.child_groups===void 0&&(s.child_groups={}),s.child_groups[r]=i}}for(let r in l.groups){let i=l.groups[r];i.parent_group_id===void 0&&(t[i.market_group_id]=i)}return l.groupTree=t,l}function Yt(e){let l=t=>({header:!0,dynamicTyping:!0,complete:async r=>{t(r.data)}});return new Promise(t=>{hr.parse(al+e,_r({download:!0},l(t)))})}async function Pi(e){return new Promise(l=>{hr.parse(`${al}/data/types.csv`,{download:!0,header:!0,dynamicTyping:!0,complete:async(t,r)=>{let i={};for(let s of t.data)s.published?(i[s.type_id]=s,s.market_group_id==="None"?delete s.market_group_id:e[s.market_group_id].types.push(s.type_id)):delete i[s.type_id];l(i)}})})}let Pl={},br=!1;function Ri(e){if(br)return()=>{};const l={categories:null,types:Pl,markets:null};return e(l),wi().then(t=>{l.categories=t,e(l)}).catch(t=>{console.error(t)}),Ci().then(t=>{l.markets=t,e(l),Pi(t.groups).then(r=>{Pl=r,l.types=Pl,e(l),br=!0}).catch(r=>{console.error(r)})}).catch(t=>{console.error(t)}),()=>{}}async function ji(e){try{let l=await Cl(`/universe/types/${e}/`);return Pl[e]=l,l}catch(l){console.error(l)}}const vl=dl({types:{}},Ri);dl({},Mi);function Mi(e){return e({attributes:null}),()=>{}}let Rl={};function ql(e){return Rl[e]===void 0&&(6e7<=e&&e<7e7?Rl[e]=jl(`/universe/stations/${e}/`):Rl[e]=Sl(`/universe/structures/${e}/`,l=>(fetch(`${al}/esi-cache/universe/structures/${e}/modifiers.json`).then(t=>t.status==404?Promise.reject("Modifiers not available"):t.json()).then(t=>l.modifiers=t).catch(t=>{t=="Modifiers not available"?l.type_id===35825&&(l.modifiers={jobDurationModifier:-15,materialConsumptionModifier:-1,jobCostModifier:-3,facilityTax:10}):console.error(t)}),l))),Rl[e]}var Ul;(function(e){e[e.loading=0]="loading",e[e.loaded=1]="loaded",e[e.error=2]="error"})(Ul||(Ul={}));function jl(e,l){let t={status:0,subscribe:null};function r(s){t.status!==1&&Cl(e).then(n=>{l&&(n=l(n)),t.status=1,s(n)}).catch(n=>{t.status=2,s(null),console.error(n)})}const{subscribe:i}=pr(null,r);return t.subscribe=i,t}function Sl(e,l){let t={status:0,subscribe:null};function r(s){t.status!==1&&fetch(`/esi-cache${e}index.json`).then(n=>n.ok?n.json():Promise.reject("Fetch failed")).then(n=>{l&&(n=l(n)),t.status=1,s(n)}).catch(n=>{t.status=2,s(null),console.error(n)})}const{subscribe:i}=pr(null,r);return t.subscribe=i,t}const fl={},Ml={},Vl={};async function Oi(){try{let e=await(await fetch(`${al}/esi-cache/authorisedCharacters.json`)).json();for(let l of e)fl[l]=jl(`/characters/${l}/`),Ml[l]=Sl(`/characters/${l}/skills/`),Vl[l]=Sl(`/characters/${l}/blueprints/`)}catch(e){console.error(e)}}function yr(e,l,t){const r=e.slice();return r[4]=l[t],r}function gr(e){let l,t=(e[1][e[4]]||e[4])+"",r,i;return{c(){l=I("option"),r=R(t),this.h()},l(s){l=k(s,"OPTION",{});var n=T(l);r=j(n,t),n.forEach(h),this.h()},h(){l.__value=i=parseInt(e[4]),l.value=l.__value},m(s,n){O(s,l,n),f(l,r)},p(s,n){n&2&&t!==(t=(s[1][s[4]]||s[4])+"")&&le(r,t),n&2&&i!==(i=parseInt(s[4]))&&(l.__value=i,l.value=l.__value)},d(s){s&&h(l)}}}function Li(e){let l,t,r,i=Object.keys(e[1]),s=[];for(let n=0;n<i.length;n+=1)s[n]=gr(yr(e,i,n));return{c(){l=I("select");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){l=k(n,"SELECT",{});var o=T(l);for(let u=0;u<s.length;u+=1)s[u].l(o);o.forEach(h),this.h()},h(){e[0]===void 0&&ml(()=>e[2].call(l))},m(n,o){O(n,l,o);for(let u=0;u<s.length;u+=1)s[u].m(l,null);Mt(l,e[0]),t||(r=_e(l,"change",e[2]),t=!0)},p(n,[o]){if(o&2){i=Object.keys(n[1]);let u;for(u=0;u<i.length;u+=1){const _=yr(n,i,u);s[u]?s[u].p(_,o):(s[u]=gr(_),s[u].c(),s[u].m(l,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=i.length}o&3&&Mt(l,n[0])},i:Ze,o:Ze,d(n){n&&h(l),zt(s,n),t=!1,r()}}}function Bi(e,l,t){let{value:r=null}=l,i={},s=[];Oi().then(()=>{for(let o in fl)s.push(fl[o].subscribe(u=>{t(1,i[o]=u==null?void 0:u.name,i)}));t(0,r=parseInt(Object.keys(fl)[0]))}),dr(()=>{s.forEach(o=>o())});function n(){r=bl(this),t(0,r),t(1,i)}return e.$$set=o=>{"value"in o&&t(0,r=o.value)},[r,i,n]}class Ni extends el{constructor(l){super();tl(this,l,Bi,Li,ll,{value:0})}}const Ol=1,Al=8;let vr=!1;function Fi(e){if(vr)return()=>{};let l={activities:{},types:{}};return Yt("/data/ramActivities.csv").then(t=>{t.forEach(r=>l.activities[r.activityID]=r)}).then(()=>Yt("/data/industryActivity.csv")).then(t=>{t.forEach(r=>{if(r.type_id===null)return;let i=l.types[r.type_id];i===void 0&&(i={type_id:r.type_id,activities:{}},l.types[r.type_id]=i),i.activities[r.activityID]={activity:l.activities[r.activityID],time:r.time,materials:{},products:{}}})}).then(()=>Yt("/data/industryActivityMaterials.csv")).then(t=>{t.forEach(r=>{if(r.typeID===null)return;let i=l.types[r.typeID];console.assert(i!==void 0,r);let s=i.activities[r.activityID].materials;console.assert(s instanceof Object),s[r.materialTypeID]={materialTypeID:r.materialTypeID,quantity:r.quantity}})}).then(()=>Yt("/data/industryActivityProducts.csv")).then(t=>{t.forEach(r=>{if(r.type_id===null)return;let i=l.types[r.type_id].activities[r.activityID];i.products[r.productTypeID]={type_id:r.productTypeID,quantity:r.quantity}})}).then(()=>Yt("/data/industryActivityProbabilities.csv")).then(t=>{t.forEach(r=>{if(r.typeID===null)return;let i=l.types[r.typeID].activities[r.activityID];i.products[r.productTypeID].probability=r.probability})}).then(()=>Yt("/data/industryActivitySkills.csv")).then(t=>{t.forEach(r=>{if(r.typeID===null)return;let i=l.types[r.typeID].activities[r.activityID];i.requiredSkills===void 0&&(i.requiredSkills={}),i.requiredSkills[r.skillID]={type_id:r.skillID,level:r.level}})}).then(()=>Yt("/data/industryBlueprints.csv")).then(t=>{t.forEach(r=>l.types[r.type_id].maxProductionLimit=r.maxProductionLimit),e(l),vr=!0}).catch(t=>console.error(t)),e(l),()=>{}}const Gl=dl(null,Fi);function zl(e,l){return Object.values(e.types).find(t=>{var r;return(r=t.activities[Ol])==null?void 0:r.products[l]})}function qi(e,l){return Object.values(e.types).find(t=>{var r;return(r=t.activities[Al])==null?void 0:r.products[l]})}const Ui=pi(vl,(e,l)=>(Si(e).then(t=>l(t)),()=>{}),{});async function Si(e){const l=1873;let t=Object.keys(e.types).filter(i=>e.types[i].market_group_id==l),r={};try{for(let i of t)r[i]=await Cl(`/universe/types/${i}/`)}catch(i){console.error(i)}return r}const Ir=3388,kr=jl("/industry/systems/");class Vi{constructor(l){this.orders={buy:[],sell:[],lastUpdated:null},this.type_id=l}}const Ll={regions:{10000002:{types:{}}},prices:dl({},e=>(Cl("/markets/prices/?datasource=tranquility").then(l=>{let t={};l.forEach(r=>{t[r.type_id]=r}),e(t)}).catch(l=>console.error(l)),()=>{}))},Er=Ll.prices;function Ai(e,l=10000002){return Ll.regions[l].types[e]===void 0&&(Ll.regions[l].types[e]=jl(`/markets/${l}/orders/?order_type=all&type_id=${e}`,t=>{let r=new Vi(e);return r.orders.buy=t.filter(i=>i.is_buy_order).sort((i,s)=>s.price-i.price),r.orders.sell=t.filter(i=>!i.is_buy_order).sort((i,s)=>i.price-s.price),r.orders.lastUpdated=new Date().getTime(),r})),Ll.regions[l].types[e]}let Yl="en-US";const Xe=new Intl.NumberFormat(Yl,{useGrouping:!0,maximumFractionDigits:2,minimumFractionDigits:2}).format,Tr=new Intl.NumberFormat(Yl,{useGrouping:!0,maximumFractionDigits:2,minimumFractionDigits:2,signDisplay:"always"}).format;let Ql=new Intl.NumberFormat(Yl,{minimumIntegerDigits:2}).format;function Bl(e){let l=Math.ceil(e%60),t=Math.floor(e%(60*60)/60),r=Math.floor(e%(24*60*60)/(60*60)),i=Math.floor(e/(24*60*60)),s=`${Ql(r)}:${Ql(t)}:${Ql(l)}`;return i>0&&(s=`${i}d `+s),s}function Dr(e,l,t){const r=e.slice();return r[43]=l[t],r[45]=t,r}function wr(e){let l,t,r,i,s,n=e[10],o=[];for(let a=0;a<n.length;a+=1)o[a]=Cr(Dr(e,n,a));let u=e[8]&&e[8].price!==null&&Pr(e),_=e[9]&&e[9].price!==null&&jr(e),c=e[6]!==null&&Or(e),b=e[3]&&Br(e);return{c(){for(let a=0;a<o.length;a+=1)o[a].c();l=Pe(),u&&u.c(),t=Pe(),_&&_.c(),r=Pe(),c&&c.c(),i=Pe(),b&&b.c(),s=Pe()},l(a){for(let d=0;d<o.length;d+=1)o[d].l(a);l=Pe(),u&&u.l(a),t=Pe(),_&&_.l(a),r=Pe(),c&&c.l(a),i=Pe(),b&&b.l(a),s=Pe()},m(a,d){for(let p=0;p<o.length;p+=1)o[p].m(a,d);O(a,l,d),u&&u.m(a,d),O(a,t,d),_&&_.m(a,d),O(a,r,d),c&&c.m(a,d),O(a,i,d),b&&b.m(a,d),O(a,s,d)},p(a,d){if(d[0]&3146752){n=a[10];let p;for(p=0;p<n.length;p+=1){const g=Dr(a,n,p);o[p]?o[p].p(g,d):(o[p]=Cr(g),o[p].c(),o[p].m(l.parentNode,l))}for(;p<o.length;p+=1)o[p].d(1);o.length=n.length}a[8]&&a[8].price!==null?u?u.p(a,d):(u=Pr(a),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null),a[9]&&a[9].price!==null?_?_.p(a,d):(_=jr(a),_.c(),_.m(r.parentNode,r)):_&&(_.d(1),_=null),a[6]!==null?c?c.p(a,d):(c=Or(a),c.c(),c.m(i.parentNode,i)):c&&(c.d(1),c=null),a[3]?b?b.p(a,d):(b=Br(a),b.c(),b.m(s.parentNode,s)):b&&(b.d(1),b=null)},d(a){zt(o,a),a&&h(l),u&&u.d(a),a&&h(t),_&&_.d(a),a&&h(r),c&&c.d(a),a&&h(i),b&&b.d(a),a&&h(s)}}}function Cr(e){let l,t,r,i=[{class:"mark scale"},{style:t=e[20](e[43])},{width:r=1},e[21]],s={};for(let n=0;n<i.length;n+=1)s=Tl(s,i[n]);return{c(){l=vt("rect"),this.h()},l(n){l=It(n,"rect",{class:!0,style:!0,width:!0}),T(l).forEach(h),this.h()},h(){Wt(l,s),Zt(l,"svelte-1hgw460",!0)},m(n,o){O(n,l,o)},p(n,o){Wt(l,s=Dl(i,[{class:"mark scale"},o[0]&1049600&&t!==(t=n[20](n[43]))&&{style:t},{width:r},o[0]&2097152&&n[21]])),Zt(l,"svelte-1hgw460",!0)},d(n){n&&h(l)}}}function Pr(e){let l,t,r,i=e[4]!=0&&Rr(e);return{c(){l=vt("path"),i&&i.c(),r=Pe(),this.h()},l(s){l=It(s,"path",{class:!0,d:!0}),T(l).forEach(h),i&&i.l(s),r=Pe(),this.h()},h(){var s;y(l,"class","graph buy svelte-1hgw460"),y(l,"d",t=e[23].y(e[22]())([{price:e[8].price,volume_remain:0},...(s=e[16])==null?void 0:s.orders.buy.filter(e[13])]))},m(s,n){O(s,l,n),i&&i.m(s,n),O(s,r,n)},p(s,n){var o;n[0]&12656896&&t!==(t=s[23].y(s[22]())([{price:s[8].price,volume_remain:0},...(o=s[16])==null?void 0:o.orders.buy.filter(s[13])]))&&y(l,"d",t),s[4]!=0?i?i.p(s,n):(i=Rr(s),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(s){s&&h(l),i&&i.d(s),s&&h(r)}}}function Rr(e){let l,t,r,i=[{class:"overhead buy"},{x:t=e[11](e[8].price*Math.min(1,1+e[4]))},{width:r=e[11](Math.abs(e[4]*e[8].price))},e[21]],s={};for(let n=0;n<i.length;n+=1)s=Tl(s,i[n]);return{c(){l=vt("rect"),this.h()},l(n){l=It(n,"rect",{class:!0,x:!0,width:!0}),T(l).forEach(h),this.h()},h(){Wt(l,s),Zt(l,"svelte-1hgw460",!0)},m(n,o){O(n,l,o)},p(n,o){Wt(l,s=Dl(i,[{class:"overhead buy"},o[0]&2320&&t!==(t=n[11](n[8].price*Math.min(1,1+n[4])))&&{x:t},o[0]&2320&&r!==(r=n[11](Math.abs(n[4]*n[8].price)))&&{width:r},o[0]&2097152&&n[21]])),Zt(l,"svelte-1hgw460",!0)},d(n){n&&h(l)}}}function jr(e){let l,t,r,i=e[5]!=0&&Mr(e);return{c(){l=vt("path"),i&&i.c(),r=Pe(),this.h()},l(s){l=It(s,"path",{class:!0,d:!0}),T(l).forEach(h),i&&i.l(s),r=Pe(),this.h()},h(){var s;y(l,"class","graph sell svelte-1hgw460"),y(l,"d",t=e[23].y(e[22]())([{price:e[9].price,volume_remain:0},...(s=e[16])==null?void 0:s.orders.sell.filter(e[13])]))},m(s,n){O(s,l,n),i&&i.m(s,n),O(s,r,n)},p(s,n){var o;n[0]&12657152&&t!==(t=s[23].y(s[22]())([{price:s[9].price,volume_remain:0},...(o=s[16])==null?void 0:o.orders.sell.filter(s[13])]))&&y(l,"d",t),s[5]!=0?i?i.p(s,n):(i=Mr(s),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(s){s&&h(l),i&&i.d(s),s&&h(r)}}}function Mr(e){let l,t,r,i=[{class:"overhead sell"},{x:t=e[11](e[9].price*Math.min(1,1+e[5]))},{width:r=e[11](Math.abs(e[5]*e[9].price))},e[21]],s={};for(let n=0;n<i.length;n+=1)s=Tl(s,i[n]);return{c(){l=vt("rect"),this.h()},l(n){l=It(n,"rect",{class:!0,x:!0,width:!0}),T(l).forEach(h),this.h()},h(){Wt(l,s),Zt(l,"svelte-1hgw460",!0)},m(n,o){O(n,l,o)},p(n,o){Wt(l,s=Dl(i,[{class:"overhead sell"},o[0]&2592&&t!==(t=n[11](n[9].price*Math.min(1,1+n[5])))&&{x:t},o[0]&2592&&r!==(r=n[11](Math.abs(n[5]*n[9].price)))&&{width:r},o[0]&2097152&&n[21]])),Zt(l,"svelte-1hgw460",!0)},d(n){n&&h(l)}}}function Or(e){let l,t,r,i=e[0]!=0&&Lr(e);return{c(){l=vt("rect"),i&&i.c(),r=Pe(),this.h()},l(s){l=It(s,"rect",{class:!0,x:!0,width:!0,height:!0}),T(l).forEach(h),i&&i.l(s),r=Pe(),this.h()},h(){y(l,"class","mark cost svelte-1hgw460"),y(l,"x",t=e[11](e[12])),y(l,"width",1),y(l,"height",e[1])},m(s,n){O(s,l,n),i&&i.m(s,n),O(s,r,n)},p(s,n){n[0]&6144&&t!==(t=s[11](s[12]))&&y(l,"x",t),n[0]&2&&y(l,"height",s[1]),s[0]!=0?i?i.p(s,n):(i=Lr(s),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(s){s&&h(l),i&&i.d(s),s&&h(r)}}}function Lr(e){let l,t,r,i,s;return{c(){l=vt("rect"),this.h()},l(n){l=It(n,"rect",{class:!0,x:!0,width:!0,y:!0,height:!0}),T(l).forEach(h),this.h()},h(){y(l,"class",t=""+(mr(`difference profit ${e[12]>e[0]?"negative":"positive"}`)+" svelte-1hgw460")),y(l,"x",r=Math.min(e[11](e[12]),e[11](e[0]))),y(l,"width",i=Math.abs(e[11](e[12])-e[11](e[0]))),y(l,"y",s=e[14](.5)),y(l,"height",1)},m(n,o){O(n,l,o)},p(n,o){o[0]&4097&&t!==(t=""+(mr(`difference profit ${n[12]>n[0]?"negative":"positive"}`)+" svelte-1hgw460"))&&y(l,"class",t),o[0]&6145&&r!==(r=Math.min(n[11](n[12]),n[11](n[0])))&&y(l,"x",r),o[0]&6145&&i!==(i=Math.abs(n[11](n[12])-n[11](n[0])))&&y(l,"width",i),o[0]&16384&&s!==(s=n[14](.5))&&y(l,"y",s)},d(n){n&&h(l)}}}function Br(e){let l,t,r;return{c(){l=vt("circle"),this.h()},l(i){l=It(i,"circle",{class:!0,cx:!0,cy:!0,r:!0}),T(l).forEach(h),this.h()},h(){y(l,"class","mark price svelte-1hgw460"),y(l,"cx",t=e[11](e[0])),y(l,"cy",r=e[14](.5)),y(l,"r",2)},m(i,s){O(i,l,s)},p(i,s){s[0]&2049&&t!==(t=i[11](i[0]))&&y(l,"cx",t),s[0]&16384&&r!==(r=i[14](.5))&&y(l,"cy",r)},d(i){i&&h(l)}}}function Nr(e){let l,t=Xe(e[19]*e[7])+"",r,i,s=Xe(e[19])+"",n,o,u,_,c,b,a,d,p;return{c(){l=vt("text"),r=R(t),i=R(" @"),n=R(s),c=vt("circle"),this.h()},l(g){l=It(g,"text",{class:!0,style:!0,y:!0,dy:!0,"text-anchor":!0});var M=T(l);r=j(M,t),i=j(M," @"),n=j(M,s),M.forEach(h),c=It(g,"circle",{class:!0,style:!0,cx:!0,cy:!0,r:!0}),T(c).forEach(h),this.h()},h(){y(l,"class","hover svelte-1hgw460"),y(l,"style",o=e[20](e[19])),y(l,"y",u=e[14](0)),y(l,"dy",_=8),y(l,"text-anchor","middle"),y(c,"class","hover svelte-1hgw460"),y(c,"style",b=e[20](e[19])),y(c,"cx",a=0),y(c,"cy",d=e[14](.5)),y(c,"r",p=4)},m(g,M){O(g,l,M),f(l,r),f(l,i),f(l,n),O(g,c,M)},p(g,M){M[0]&524416&&t!==(t=Xe(g[19]*g[7])+"")&&le(r,t),M[0]&524288&&s!==(s=Xe(g[19])+"")&&le(n,s),M[0]&1572864&&o!==(o=g[20](g[19]))&&y(l,"style",o),M[0]&16384&&u!==(u=g[14](0))&&y(l,"y",u),M[0]&1572864&&b!==(b=g[20](g[19]))&&y(c,"style",b),M[0]&16384&&d!==(d=g[14](.5))&&y(c,"cy",d)},d(g){g&&h(l),g&&h(c)}}}function Gi(e){let l,t,r,i,s,n,o,u,_,c=[{class:"graphArea"},{width:e[2]},e[21]],b={};for(let p=0;p<c.length;p+=1)b=Tl(b,c[p]);let a=e[17]&&wr(e),d=e[18]&&Nr(e);return{c(){l=vt("svg"),t=vt("rect"),a&&a.c(),r=Pe(),d&&d.c(),i=vt("rect"),this.h()},l(p){l=It(p,"svg",{width:!0,height:!0,viewBox:!0,xmlns:!0});var g=T(l);t=It(g,"rect",{class:!0,width:!0}),T(t).forEach(h),a&&a.l(g),r=Pe(),d&&d.l(g),i=It(g,"rect",{class:!0,width:!0,y:!0,height:!0}),T(i).forEach(h),g.forEach(h),this.h()},h(){Wt(t,b),Zt(t,"svelte-1hgw460",!0),y(i,"class","hitArea svelte-1hgw460"),y(i,"width",e[2]),y(i,"y",s=e[14](1)),y(i,"height",n=e[14](0)-e[14](1)),y(l,"width",e[2]),y(l,"height",e[1]),y(l,"viewBox",o=`0 0 ${e[2]} ${e[1]}`),y(l,"xmlns","http://www.w3.org/2000/svg")},m(p,g){O(p,l,g),f(l,t),a&&a.m(l,null),f(l,r),d&&d.m(l,null),f(l,i),u||(_=[_e(i,"mouseenter",e[37]),_e(i,"mouseleave",e[38]),_e(i,"mousemove",e[24]),_e(i,"click",e[25])],u=!0)},p(p,g){Wt(t,b=Dl(c,[{class:"graphArea"},g[0]&4&&{width:p[2]},g[0]&2097152&&p[21]])),Zt(t,"svelte-1hgw460",!0),p[17]?a?a.p(p,g):(a=wr(p),a.c(),a.m(l,r)):a&&(a.d(1),a=null),p[18]?d?d.p(p,g):(d=Nr(p),d.c(),d.m(l,i)):d&&(d.d(1),d=null),g[0]&4&&y(i,"width",p[2]),g[0]&16384&&s!==(s=p[14](1))&&y(i,"y",s),g[0]&16384&&n!==(n=p[14](0)-p[14](1))&&y(i,"height",n),g[0]&4&&y(l,"width",p[2]),g[0]&2&&y(l,"height",p[1]),g[0]&6&&o!==(o=`0 0 ${p[2]} ${p[1]}`)&&y(l,"viewBox",o)},i:Ze,o:Ze,d(p){p&&h(l),a&&a.d(),d&&d.d(),u=!1,wl(_)}}}let Jl=8;function zi(e,l,t){let r,i,s,n,o,u,_,c,b,a,d,p,g=Ze,M=()=>(g(),g=ol(r,N=>t(16,p=N)),r);e.$$.on_destroy.push(()=>g());let{compact:X=!1}=l,{height:L=X?24:40}=l,{width:F=500}=l,{extents:B=[0,1e3]}=l,{type_id:A=null}=l,{marketFilterLocation:H=null}=l;function v(N,$){return N?$?N.filter(i)[0]:N[0]:null}let{buyOverheadRate:q=0}=l,{sellOverheadRate:ae=0}=l,K=null,W=null,{lowestSellPrice:C=0}=l,{highestBuyPrice:U=0}=l,{price:Y=null}=l,{overridePrice:x=null}=l,Q=null,ve=null,{totalCost:Oe=null}=l,{quantity:de=1}=l,he=X?[0,L-Jl]:[Jl,L-2*Jl],Ne=!1,re=[],ee=!1,te=[],Te=0,fe=0;function Ie(N){var me;let $=N.clientX-N.target.getBoundingClientRect().left;fe=bi(te,oe=>Math.abs(oe.price-o.invert($))),t(19,Te=(me=te[fe])==null?void 0:me.price)}function Ge(N){var $;(($=te[fe])==null?void 0:$.is_buy_order)!==void 0&&(t(32,Q=Te),t(32,Q*=1+(te[fe].is_buy_order?q:ae)))}const ze=N=>t(18,ee=!0),ue=N=>t(18,ee=!1);return e.$$set=N=>{"compact"in N&&t(28,X=N.compact),"height"in N&&t(1,L=N.height),"width"in N&&t(2,F=N.width),"extents"in N&&t(29,B=N.extents),"type_id"in N&&t(3,A=N.type_id),"marketFilterLocation"in N&&t(30,H=N.marketFilterLocation),"buyOverheadRate"in N&&t(4,q=N.buyOverheadRate),"sellOverheadRate"in N&&t(5,ae=N.sellOverheadRate),"lowestSellPrice"in N&&t(26,C=N.lowestSellPrice),"highestBuyPrice"in N&&t(27,U=N.highestBuyPrice),"price"in N&&t(0,Y=N.price),"overridePrice"in N&&t(31,x=N.overridePrice),"totalCost"in N&&t(6,Oe=N.totalCost),"quantity"in N&&t(7,de=N.quantity)},e.$$.update=()=>{var N,$,me;if(e.$$.dirty[0]&8&&M(t(15,r=A&&Ai(A))),e.$$.dirty[0]&1073741824&&t(13,i=oe=>H?oe.location_id===H:!0),e.$$.dirty[0]&1073807360&&(t(8,K=v(p==null?void 0:p.orders.buy,H)),t(9,W=v(p==null?void 0:p.orders.sell,H))),e.$$.dirty[0]&768&&(t(26,C=W==null?void 0:W.price),t(27,U=K==null?void 0:K.price)),e.$$.dirty[0]&98304&&((p==null?void 0:p.orders)?r==null||r.status:Ul.loading),e.$$.dirty[0]&544&&t(36,s=(W==null?void 0:W.price)*(1+ae)),e.$$.dirty[0]&8|e.$$.dirty[1]&4&&ve!==A&&(t(32,Q=null),t(33,ve=A)),e.$$.dirty[0]&1|e.$$.dirty[1]&35&&(t(0,Y=(N=x!=null?x:Q)!=null?N:s),isNaN(Y)&&t(0,Y=0)),e.$$.dirty[0]&192&&t(12,n=Oe/de),e.$$.dirty[0]&536871044&&t(11,o=Fl().domain([B[0]/de,B[1]/de]).range([0,F])),e.$$.dirty[0]&128&&t(35,_=Fl().domain([de*2,0]).range(he)),e.$$.dirty[0]&2048&&t(23,c=di().curve(mi).x(oe=>o(oe.price))),e.$$.dirty[1]&16&&t(22,b=()=>{let oe=0;return ce=>(oe+=ce.volume_remain,_(oe))}),e.$$.dirty[0]&536871936){t(17,Ne=B[1]>B[0]),t(10,re=[]);let oe=10;for(let ce=1e6;ce<B[1];ce*=oe)re.push(ce)}e.$$.dirty[0]&16384&&t(21,a={y:u(1),height:Math.abs(u(0)-u(1))}),e.$$.dirty[0]&2048&&t(20,d=oe=>`transform: translateX(${o(oe)}px)`),e.$$.dirty[0]&77888|e.$$.dirty[1]&8&&(p&&p.orders?t(34,te=(me=p==null?void 0:p.orders)==null?void 0:me.buy.concat(($=p==null?void 0:p.orders)==null?void 0:$.sell).filter(i)):t(34,te=[]),Oe&&t(34,te=[...te,{price:n}]))},t(14,u=Fl().domain([1,0]).range(he)),[Y,L,F,A,q,ae,Oe,de,K,W,re,o,n,i,u,r,p,Ne,ee,Te,d,a,b,c,Ie,Ge,C,U,X,B,H,x,Q,ve,te,_,s,ze,ue]}class Il extends el{constructor(l){super();tl(this,l,zi,Gi,ll,{compact:28,height:1,width:2,extents:29,type_id:3,marketFilterLocation:30,buyOverheadRate:4,sellOverheadRate:5,lowestSellPrice:26,highestBuyPrice:27,price:0,overridePrice:31,totalCost:6,quantity:7},null,[-1,-1])}}function Yi(e,l){return e.reduce((t,r)=>t+(l?l(r):r),0)}function Fr(e,l,t){const r=e.slice();return r[7]=l[t],r}function qr(e){let l,t;return{c(){l=I("option"),this.h()},l(r){l=k(r,"OPTION",{}),T(l).forEach(h),this.h()},h(){l.__value=t=null,l.value=l.__value},m(r,i){O(r,l,i)},d(r){r&&h(l)}}}function Ur(e){var s,n;let l,t=((n=(s=e[2][e[7]])==null?void 0:s.name)!=null?n:e[7])+"",r,i;return{c(){l=I("option"),r=R(t),this.h()},l(o){l=k(o,"OPTION",{});var u=T(l);r=j(u,t),u.forEach(h),this.h()},h(){l.__value=i=parseInt(e[7]),l.value=l.__value},m(o,u){O(o,l,u),f(l,r)},p(o,u){var _,c;u&4&&t!==(t=((c=(_=o[2][o[7]])==null?void 0:_.name)!=null?c:o[7])+"")&&le(r,t),u&4&&i!==(i=parseInt(o[7]))&&(l.__value=i,l.value=l.__value)},d(o){o&&h(l)}}}function Qi(e){let l,t,r,i,s=e[1]&&qr(),n=Object.keys(e[2]),o=[];for(let u=0;u<n.length;u+=1)o[u]=Ur(Fr(e,n,u));return{c(){l=I("select"),s&&s.c(),t=Pe();for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){l=k(u,"SELECT",{});var _=T(l);s&&s.l(_),t=Pe();for(let c=0;c<o.length;c+=1)o[c].l(_);_.forEach(h),this.h()},h(){e[0]===void 0&&ml(()=>e[5].call(l))},m(u,_){O(u,l,_),s&&s.m(l,null),f(l,t);for(let c=0;c<o.length;c+=1)o[c].m(l,null);Mt(l,e[0]),r||(i=_e(l,"change",e[5]),r=!0)},p(u,[_]){if(u[1]?s||(s=qr(),s.c(),s.m(l,t)):s&&(s.d(1),s=null),_&4){n=Object.keys(u[2]);let c;for(c=0;c<n.length;c+=1){const b=Fr(u,n,c);o[c]?o[c].p(b,_):(o[c]=Ur(b),o[c].c(),o[c].m(l,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=n.length}_&5&&Mt(l,u[0])},i:Ze,o:Ze,d(u){u&&h(l),s&&s.d(),zt(o,u),r=!1,i()}}}function Ji(e,l,t){let r,i,s=Ze,n=()=>(s(),s=ol(r,a=>t(4,i=a)),r);e.$$.on_destroy.push(()=>s()),r===void 0&&setTimeout(()=>{n(t(3,r=Vl[Object.keys(fl)[0]]))},500);let o=[],u={};dr(()=>{o.forEach(a=>a&&a())});let{value:_=null}=l,{allowUnselected:c=!1}=l;function b(){_=bl(this),t(0,_),t(6,o),t(4,i),t(2,u),t(1,c),t(2,u),t(6,o),t(4,i),t(0,_),t(1,c)}return e.$$set=a=>{"value"in a&&t(0,_=a.value),"allowUnselected"in a&&t(1,c=a.allowUnselected)},e.$$.update=()=>{if(e.$$.dirty&23){o.forEach(d=>d()),t(2,u={}),i==null||i.forEach(d=>{t(2,u[d.location_id]=null,u)});let a=Object.keys(u);_===null&&a.length>=1&&!c&&t(0,_=parseInt(a[a.length-1])),a.forEach(d=>{let p=ql(parseInt(d)).subscribe(g=>{t(2,u[d]=g,u)});typeof p=="function"&&o.push(p)})}},n(t(3,r=Vl[Object.keys(fl)[0]])),[_,c,u,r,i,b]}class Xl extends el{constructor(l){super();tl(this,l,Ji,Qi,ll,{value:0,allowUnselected:1})}}function Sr(e,l,t){const r=e.slice();return r[57]=l[t],r[58]=l,r[59]=t,r}function Vr(e,l,t){const r=e.slice();return r[60]=l[t],r}function Ar(e,l,t){const r=e.slice();return r[63]=l[t],r}function Gr(e){var s,n;let l,t=((n=e[28].types[(s=e[63])==null?void 0:s.type_id])==null?void 0:n.name)+"",r,i;return{c(){l=I("option"),r=R(t),this.h()},l(o){l=k(o,"OPTION",{});var u=T(l);r=j(u,t),u.forEach(h),this.h()},h(){l.__value=i=e[63],l.value=l.__value},m(o,u){O(o,l,u),f(l,r)},p(o,u){var _,c;u[0]&268435472&&t!==(t=((c=o[28].types[(_=o[63])==null?void 0:_.type_id])==null?void 0:c.name)+"")&&le(r,t),u[0]&16&&i!==(i=o[63])&&(l.__value=i,l.value=l.__value)},d(o){o&&h(l)}}}function zr(e){let l,t=e[60].name+"",r,i;return{c(){l=I("option"),r=R(t),this.h()},l(s){l=k(s,"OPTION",{});var n=T(l);r=j(n,t),n.forEach(h),this.h()},h(){l.__value=i=e[60].type_id,l.value=l.__value},m(s,n){O(s,l,n),f(l,r)},p(s,n){n[1]&2&&t!==(t=s[60].name+"")&&le(r,t),n[1]&2&&i!==(i=s[60].type_id)&&(l.__value=i,l.value=l.__value)},d(s){s&&h(l)}}}function Yr(e){var M,X;let l,t=e[28].types[e[57]].name+"",r,i,s,n,o=(((M=e[25].materials[e[57]])==null?void 0:M.quantity)||1)+"",u,_,c,b,a,d;function p(L){e[54](L,e[57])}let g={compact:!0,extents:e[30],quantity:((X=e[25].materials[e[57]])==null?void 0:X.quantity)||1,type_id:e[57],marketFilterLocation:e[2],buyOverheadRate:e[1]};return e[6][e[57]]!==void 0&&(g.price=e[6][e[57]]),b=new Il({props:g}),ct.push(()=>_t(b,"price",p)),{c(){l=I("div"),r=R(t),s=S(),n=I("div"),u=R(o),_=S(),c=I("div"),kt(b.$$.fragment),this.h()},l(L){l=k(L,"DIV",{class:!0,title:!0});var F=T(l);r=j(F,t),F.forEach(h),s=V(L),n=k(L,"DIV",{class:!0});var B=T(n);u=j(B,o),B.forEach(h),_=V(L),c=k(L,"DIV",{});var A=T(c);Et(b.$$.fragment,A),A.forEach(h),this.h()},h(){y(l,"class","itemName svelte-d0mjxd"),y(l,"title",i=`${e[28].types[e[57]].name} [${e[57]}]`),y(n,"class","qty svelte-d0mjxd")},m(L,F){O(L,l,F),f(l,r),O(L,s,F),O(L,n,F),f(n,u),O(L,_,F),O(L,c,F),Tt(b,c,null),d=!0},p(L,F){var A,H;e=L,(!d||F[0]&268435712)&&t!==(t=e[28].types[e[57]].name+"")&&le(r,t),(!d||F[0]&268435712&&i!==(i=`${e[28].types[e[57]].name} [${e[57]}]`))&&y(l,"title",i),(!d||F[0]&33554688)&&o!==(o=(((A=e[25].materials[e[57]])==null?void 0:A.quantity)||1)+"")&&le(u,o);const B={};F[0]&1073741824&&(B.extents=e[30]),F[0]&33554688&&(B.quantity=((H=e[25].materials[e[57]])==null?void 0:H.quantity)||1),F[0]&256&&(B.type_id=e[57]),F[0]&4&&(B.marketFilterLocation=e[2]),F[0]&2&&(B.buyOverheadRate=e[1]),!a&&F[0]&320&&(a=!0,B.price=e[6][e[57]],ht(()=>a=!1)),b.$set(B)},i(L){d||(ge(b.$$.fragment,L),d=!0)},o(L){Me(b.$$.fragment,L),d=!1},d(L){L&&h(l),L&&h(s),L&&h(n),L&&h(_),L&&h(c),Dt(b)}}}function Qr(e){let l,t,r,i,s,n;return{c(){l=I("div"),t=R("No decryptor"),r=S(),i=I("div"),n=I("div"),this.h()},l(o){l=k(o,"DIV",{class:!0});var u=T(l);t=j(u,"No decryptor"),u.forEach(h),r=V(o),i=k(o,"DIV",{style:!0}),T(i).forEach(h),n=k(o,"DIV",{}),T(n).forEach(h),this.h()},h(){y(l,"class","itemName svelte-d0mjxd"),y(i,"style",s=`height:${24}px`)},m(o,u){O(o,l,u),f(l,t),O(o,r,u),O(o,i,u),O(o,n,u)},d(o){o&&h(l),o&&h(r),o&&h(i),o&&h(n)}}}function Jr(e){let l,t,r,i,s,n,o,u,_;return{c(){l=I("div"),t=R("Blueprint copy cost per run"),r=S(),i=I("div"),s=S(),n=I("div"),o=I("input"),this.h()},l(c){l=k(c,"DIV",{class:!0});var b=T(l);t=j(b,"Blueprint copy cost per run"),b.forEach(h),r=V(c),i=k(c,"DIV",{}),T(i).forEach(h),s=V(c),n=k(c,"DIV",{});var a=T(n);o=k(a,"INPUT",{type:!0}),a.forEach(h),this.h()},h(){y(l,"class","itemName svelte-d0mjxd"),y(o,"type","number")},m(c,b){O(c,l,b),f(l,t),O(c,r,b),O(c,i,b),O(c,s,b),O(c,n,b),f(n,o),Be(o,e[9]),u||(_=_e(o,"input",e[55]),u=!0)},p(c,b){b[0]&512&&lt(o.value)!==c[9]&&Be(o,c[9])},d(c){c&&h(l),c&&h(r),c&&h(i),c&&h(s),c&&h(n),u=!1,_()}}}function Xi(e){var xt,il,Jt;let l,t,r,i,s,n,o,u,_,c,b,a,d,p=e[21]*100-100+"",g,M,X,L,F,B=((xt=e[13])==null?void 0:xt.name)+"",A,H,v,q,ae,K,W,C=((il=e[14])==null?void 0:il.name)+"",U,Y,x,Q,ve,Oe,de,he=((Jt=e[15])==null?void 0:Jt.name)+"",Ne,re,ee,te,Te,fe,Ie,Ge,ze,ue,N,$,me,oe,ce,Fe,xe,Se,qe,Ot,rt,He,wt,$e=Xe(e[26])+"",Ct,Pt,Ye,G=Bl(e[31])+"",Ve,Ke,pe,dt,it,We=Xe(e[12])+"",mt,D,we,et=e[19]*100+"",st,J,ie,nt,ut,Z=Math.ceil(Math.log(1-.9)/Math.log(1-e[19]))+"",Ce,tt,Lt,qt,ke,Ut,at=Xe(e[0])+"",Rt,Ee,jt,Qt,St=e[4],Ue=[];for(let E=0;E<St.length;E+=1)Ue[E]=Gr(Ar(e,St,E));let Vt=Object.values(e[32]),be=[];for(let E=0;E<Vt.length;E+=1)be[E]=zr(Vr(e,Vt,E));function cl(E){e[53](E)}let rl={};e[10]!==void 0&&(rl.value=e[10]),fe=new Xl({props:rl}),ct.push(()=>_t(fe,"value",cl)),qe=new Il({props:{compact:!0,extents:e[30],quantity:1,totalCost:e[26]}});let Bt=e[8],ye=[];for(let E=0;E<Bt.length;E+=1)ye[E]=Yr(Sr(e,Bt,E));const _l=E=>Me(ye[E],1,1,()=>{ye[E]=null});let Ae=!e[7]&&Qr(),Le=e[27]&&Jr(e);return{c(){l=I("div"),t=I("select");for(let E=0;E<Ue.length;E+=1)Ue[E].c();r=S(),i=I("select"),s=I("option"),n=R("No decryptor");for(let E=0;E<be.length;E+=1)be[E].c();o=R(`\r
    Runs +`),u=R(e[20]),_=R(" ME "),c=R(e[22]),b=R(" TE "),a=R(e[23]),d=R(" Probability "),g=R(p),M=R(`%\r
    `),X=I("br"),L=S(),F=I("label"),A=R(B),H=S(),v=I("input"),q=S(),ae=I("br"),K=S(),W=I("label"),U=R(C),Y=S(),x=I("input"),Q=S(),ve=I("br"),Oe=S(),de=I("label"),Ne=R(he),re=S(),ee=I("input"),te=S(),Te=I("p"),kt(fe.$$.fragment),Ge=I("br"),ze=R(`\r
        System cost index `),ue=R(e[11]),N=S(),$=I("div"),me=I("div"),oe=R("Job cost"),ce=S(),Fe=I("div"),xe=S(),Se=I("div"),kt(qe.$$.fragment),Ot=S();for(let E=0;E<ye.length;E+=1)ye[E].c();rt=S(),Ae&&Ae.c(),He=S(),Le&&Le.c(),wt=R(`\r
    \r
\r
    Invention job cost: `),Ct=R($e),Pt=I("br"),Ye=R(`\r
    Invention job duration: `),Ve=R(G),Ke=S(),pe=I("p"),dt=R("Invention Cost per run: "),it=I("b"),mt=R(We),D=R(" Chance of success: "),we=I("b"),st=R(et),J=R("%"),ie=S(),nt=I("br"),ut=R(`\r
        Expected invention attempts to get >=90% chance to get >=1 successes: `),Ce=R(Z),tt=S(),Lt=I("br"),qt=R(`\r
        Expected Runs: `),ke=R(e[24]),Ut=R("  Expected cost per run: "),Rt=R(at),this.h()},l(E){l=k(E,"DIV",{});var w=T(l);t=k(w,"SELECT",{});var Re=T(t);for(let yt=0;yt<Ue.length;yt+=1)Ue[yt].l(Re);Re.forEach(h),r=V(w),i=k(w,"SELECT",{});var Nt=T(i);s=k(Nt,"OPTION",{});var At=T(s);n=j(At,"No decryptor"),At.forEach(h);for(let yt=0;yt<be.length;yt+=1)be[yt].l(Nt);Nt.forEach(h),o=j(w,`\r
    Runs +`),u=j(w,e[20]),_=j(w," ME "),c=j(w,e[22]),b=j(w," TE "),a=j(w,e[23]),d=j(w," Probability "),g=j(w,p),M=j(w,`%\r
    `),X=k(w,"BR",{}),L=V(w),F=k(w,"LABEL",{});var Ft=T(F);A=j(Ft,B),H=V(Ft),v=k(Ft,"INPUT",{type:!0,min:!0,max:!0}),Ft.forEach(h),q=V(w),ae=k(w,"BR",{}),K=V(w),W=k(w,"LABEL",{});var bt=T(W);U=j(bt,C),Y=V(bt),x=k(bt,"INPUT",{type:!0,min:!0,max:!0}),bt.forEach(h),Q=V(w),ve=k(w,"BR",{}),Oe=V(w),de=k(w,"LABEL",{});var z=T(de);Ne=j(z,he),re=V(z),ee=k(z,"INPUT",{type:!0,min:!0,max:!0}),z.forEach(h),te=V(w),Te=k(w,"P",{});var Qe=T(Te);Et(fe.$$.fragment,Qe),Ge=k(Qe,"BR",{}),ze=j(Qe,`\r
        System cost index `),ue=j(Qe,e[11]),Qe.forEach(h),N=V(w),$=k(w,"DIV",{class:!0});var ne=T($);me=k(ne,"DIV",{class:!0});var sl=T(me);oe=j(sl,"Job cost"),sl.forEach(h),ce=V(ne),Fe=k(ne,"DIV",{class:!0}),T(Fe).forEach(h),xe=V(ne),Se=k(ne,"DIV",{});var hl=T(Se);Et(qe.$$.fragment,hl),hl.forEach(h),Ot=V(ne);for(let yt=0;yt<ye.length;yt+=1)ye[yt].l(ne);rt=V(ne),Ae&&Ae.l(ne),He=V(ne),Le&&Le.l(ne),ne.forEach(h),wt=j(w,`\r
    \r
\r
    Invention job cost: `),Ct=j(w,$e),Pt=k(w,"BR",{}),Ye=j(w,`\r
    Invention job duration: `),Ve=j(w,G),Ke=V(w),pe=k(w,"P",{});var se=T(pe);dt=j(se,"Invention Cost per run: "),it=k(se,"B",{});var kl=T(it);mt=j(kl,We),kl.forEach(h),D=j(se," Chance of success: "),we=k(se,"B",{});var nl=T(we);st=j(nl,et),J=j(nl,"%"),nl.forEach(h),ie=V(se),nt=k(se,"BR",{}),ut=j(se,`\r
        Expected invention attempts to get >=90% chance to get >=1 successes: `),Ce=j(se,Z),tt=V(se),Lt=k(se,"BR",{}),qt=j(se,`\r
        Expected Runs: `),ke=j(se,e[24]),Ut=j(se,"  Expected cost per run: "),Rt=j(se,at),se.forEach(h),w.forEach(h),this.h()},h(){e[5]===void 0&&ml(()=>e[48].call(t)),s.__value=null,s.value=s.__value,e[7]===void 0&&ml(()=>e[49].call(i)),y(v,"type","range"),y(v,"min",0),y(v,"max",5),y(x,"type","range"),y(x,"min",0),y(x,"max",5),y(ee,"type","range"),y(ee,"min",0),y(ee,"max",5),y(me,"class","itemName svelte-d0mjxd"),y(Fe,"class","qty svelte-d0mjxd"),y($,"class","breakdown svelte-d0mjxd")},m(E,w){O(E,l,w),f(l,t);for(let Re=0;Re<Ue.length;Re+=1)Ue[Re].m(t,null);Mt(t,e[5]),f(l,r),f(l,i),f(i,s),f(s,n);for(let Re=0;Re<be.length;Re+=1)be[Re].m(i,null);Mt(i,e[7]),f(l,o),f(l,u),f(l,_),f(l,c),f(l,b),f(l,a),f(l,d),f(l,g),f(l,M),f(l,X),f(l,L),f(l,F),f(F,A),f(F,H),f(F,v),Be(v,e[16]),f(l,q),f(l,ae),f(l,K),f(l,W),f(W,U),f(W,Y),f(W,x),Be(x,e[17]),f(l,Q),f(l,ve),f(l,Oe),f(l,de),f(de,Ne),f(de,re),f(de,ee),Be(ee,e[18]),f(l,te),f(l,Te),Tt(fe,Te,null),f(Te,Ge),f(Te,ze),f(Te,ue),f(l,N),f(l,$),f($,me),f(me,oe),f($,ce),f($,Fe),f($,xe),f($,Se),Tt(qe,Se,null),f($,Ot);for(let Re=0;Re<ye.length;Re+=1)ye[Re].m($,null);f($,rt),Ae&&Ae.m($,null),f($,He),Le&&Le.m($,null),f(l,wt),f(l,Ct),f(l,Pt),f(l,Ye),f(l,Ve),f(l,Ke),f(l,pe),f(pe,dt),f(pe,it),f(it,mt),f(pe,D),f(pe,we),f(we,st),f(we,J),f(pe,ie),f(pe,nt),f(pe,ut),f(pe,Ce),f(pe,tt),f(pe,Lt),f(pe,qt),f(pe,ke),f(pe,Ut),f(pe,Rt),Ee=!0,jt||(Qt=[_e(t,"change",e[48]),_e(i,"change",e[49]),_e(v,"change",e[50]),_e(v,"input",e[50]),_e(x,"change",e[51]),_e(x,"input",e[51]),_e(ee,"change",e[52]),_e(ee,"input",e[52])],jt=!0)},p(E,w){var At,Ft,bt;if(w[0]&268435472){St=E[4];let z;for(z=0;z<St.length;z+=1){const Qe=Ar(E,St,z);Ue[z]?Ue[z].p(Qe,w):(Ue[z]=Gr(Qe),Ue[z].c(),Ue[z].m(t,null))}for(;z<Ue.length;z+=1)Ue[z].d(1);Ue.length=St.length}if(w[0]&48&&Mt(t,E[5]),w[1]&2){Vt=Object.values(E[32]);let z;for(z=0;z<Vt.length;z+=1){const Qe=Vr(E,Vt,z);be[z]?be[z].p(Qe,w):(be[z]=zr(Qe),be[z].c(),be[z].m(i,null))}for(;z<be.length;z+=1)be[z].d(1);be.length=Vt.length}w[0]&128|w[1]&2&&Mt(i,E[7]),(!Ee||w[0]&1048576)&&le(u,E[20]),(!Ee||w[0]&4194304)&&le(c,E[22]),(!Ee||w[0]&8388608)&&le(a,E[23]),(!Ee||w[0]&2097152)&&p!==(p=E[21]*100-100+"")&&le(g,p),(!Ee||w[0]&8192)&&B!==(B=((At=E[13])==null?void 0:At.name)+"")&&le(A,B),w[0]&65536&&Be(v,E[16]),(!Ee||w[0]&16384)&&C!==(C=((Ft=E[14])==null?void 0:Ft.name)+"")&&le(U,C),w[0]&131072&&Be(x,E[17]),(!Ee||w[0]&32768)&&he!==(he=((bt=E[15])==null?void 0:bt.name)+"")&&le(Ne,he),w[0]&262144&&Be(ee,E[18]);const Re={};!Ie&&w[0]&1024&&(Ie=!0,Re.value=E[10],ht(()=>Ie=!1)),fe.$set(Re),(!Ee||w[0]&2048)&&le(ue,E[11]);const Nt={};if(w[0]&1073741824&&(Nt.extents=E[30]),w[0]&67108864&&(Nt.totalCost=E[26]),qe.$set(Nt),w[0]&1375732038){Bt=E[8];let z;for(z=0;z<Bt.length;z+=1){const Qe=Sr(E,Bt,z);ye[z]?(ye[z].p(Qe,w),ge(ye[z],1)):(ye[z]=Yr(Qe),ye[z].c(),ge(ye[z],1),ye[z].m($,rt))}for(yl(),z=Bt.length;z<ye.length;z+=1)_l(z);gl()}E[7]?Ae&&(Ae.d(1),Ae=null):Ae||(Ae=Qr(),Ae.c(),Ae.m($,He)),E[27]?Le?Le.p(E,w):(Le=Jr(E),Le.c(),Le.m($,null)):Le&&(Le.d(1),Le=null),(!Ee||w[0]&67108864)&&$e!==($e=Xe(E[26])+"")&&le(Ct,$e),(!Ee||w[1]&1)&&G!==(G=Bl(E[31])+"")&&le(Ve,G),(!Ee||w[0]&4096)&&We!==(We=Xe(E[12])+"")&&le(mt,We),(!Ee||w[0]&524288)&&et!==(et=E[19]*100+"")&&le(st,et),(!Ee||w[0]&524288)&&Z!==(Z=Math.ceil(Math.log(1-.9)/Math.log(1-E[19]))+"")&&le(Ce,Z),(!Ee||w[0]&16777216)&&le(ke,E[24]),(!Ee||w[0]&1)&&at!==(at=Xe(E[0])+"")&&le(Rt,at)},i(E){if(!Ee){ge(fe.$$.fragment,E),ge(qe.$$.fragment,E);for(let w=0;w<Bt.length;w+=1)ge(ye[w]);Ee=!0}},o(E){Me(fe.$$.fragment,E),Me(qe.$$.fragment,E),ye=ye.filter(Boolean);for(let w=0;w<ye.length;w+=1)Me(ye[w]);Ee=!1},d(E){E&&h(l),zt(Ue,E),zt(be,E),Dt(fe),Dt(qe),zt(ye,E),Ae&&Ae.d(),Le&&Le.d(),jt=!1,wl(Qt)}}}const Hi=1124,Ki=1112,Wi=1113,Zi=1114;let Xr=2,Hr=4;function xi(e,l,t){let r,i,s,n,o,u,_,c=Ze,b=()=>(c(),c=ol(B,G=>t(43,_=G)),B),a,d=Ze,p=()=>(d(),d=ol(Q,G=>t(44,a=G)),Q),g,M,X,L;pt(e,vl,G=>t(28,u=G)),pt(e,kr,G=>t(45,g=G)),pt(e,Er,G=>t(46,M=G)),pt(e,Gl,G=>t(47,X=G)),pt(e,Ui,G=>t(32,L=G)),e.$$.on_destroy.push(()=>c()),e.$$.on_destroy.push(()=>d());let{selectedCharacterId:F=null}=l,B,{blueprintToInvent:A=null}=l,H=[],v=H[0];function q(G){var Ve;return u.categories[9].groups[(Ve=u.types[G])==null?void 0:Ve.group_id]!=null}let ae={},{brokerFeeRate:K=.0151114234532}=l,W,C=[],U=0,Y,x=null,Q=null;p();let ve=.01,Oe=0,de=0,he=0,Ne=0,re,ee,te,Te=3,fe=3,Ie=3,Ge=.3,ze,ue,N,$,{productME:me=Xr}=l,{productTE:oe=Hr}=l,{productRuns:ce=1}=l,{expectedCostPerRun:Fe=0}=l,{extents:xe=null}=l,Se=[0,1e6],{marketFilterLocation:qe=null}=l;function Ot(){v=bl(this),t(5,v),t(4,H),t(47,X),t(37,A),t(4,H),t(47,X),t(37,A)}function rt(){W=bl(this),t(7,W)}function He(){Te=lt(this.value),t(16,Te),t(3,B),t(36,F),t(43,_),t(25,r),t(28,u),t(15,te),t(13,re),t(14,ee),t(5,v),t(4,H),t(47,X),t(37,A)}function wt(){fe=lt(this.value),t(17,fe),t(3,B),t(36,F),t(43,_),t(25,r),t(28,u),t(15,te),t(13,re),t(14,ee),t(5,v),t(4,H),t(47,X),t(37,A)}function $e(){Ie=lt(this.value),t(18,Ie),t(3,B),t(36,F),t(43,_),t(25,r),t(28,u),t(15,te),t(13,re),t(14,ee),t(5,v),t(4,H),t(47,X),t(37,A)}function Ct(G){x=G,t(10,x)}function Pt(G,Ve){e.$$.not_equal(ae[Ve],G)&&(ae[Ve]=G,t(6,ae),t(25,r),t(5,v),t(4,H),t(47,X),t(37,A))}function Ye(){U=lt(this.value),t(9,U),t(27,i),t(6,ae),t(5,v),t(25,r),t(4,H),t(47,X),t(37,A)}return e.$$set=G=>{"selectedCharacterId"in G&&t(36,F=G.selectedCharacterId),"blueprintToInvent"in G&&t(37,A=G.blueprintToInvent),"brokerFeeRate"in G&&t(1,K=G.brokerFeeRate),"productME"in G&&t(34,me=G.productME),"productTE"in G&&t(35,oe=G.productTE),"productRuns"in G&&t(33,ce=G.productRuns),"expectedCostPerRun"in G&&t(0,Fe=G.expectedCostPerRun),"extents"in G&&t(38,xe=G.extents),"marketFilterLocation"in G&&t(2,qe=G.marketFilterLocation)},e.$$.update=()=>{var G,Ve,Ke,pe,dt,it,We,mt,D,we,et,st;if(e.$$.dirty[1]&65600&&t(4,H=Object.values(X.types).filter(J=>{var ie;return(ie=J.activities[Al])==null?void 0:ie.products[A==null?void 0:A.type_id]})),e.$$.dirty[0]&48&&H.length>=1&&H.indexOf(v)===-1&&t(5,v=H[0]),e.$$.dirty[0]&32&&t(25,r=v==null?void 0:v.activities[Al]),e.$$.dirty[0]&33554432&&(r||t(6,ae={})),e.$$.dirty[0]&32&&t(27,i=q(v==null?void 0:v.type_id)),e.$$.dirty[0]&167772576&&(t(8,C=[]),r&&(i||C.push(v.type_id),C.push(...Object.keys(r.materials).map(J=>parseInt(J))),W&&C.push(W))),e.$$.dirty[0]&134217824&&(i||t(9,U=ae[v.type_id])),e.$$.dirty[1]&33088){t(39,Y=0);let J=A.activities[Ol];for(let ie in J.materials)t(39,Y+=J.materials[ie].quantity*((Ve=(G=M[ie])==null?void 0:G.adjusted_price)!=null?Ve:0))}if(e.$$.dirty[0]&1024|e.$$.dirty[1]&24576&&(x&&p(t(29,Q=ql(x))),a?(t(11,ve=g.find(J=>{var ie;return J.solar_system_id===((ie=a.solar_system_id)!=null?ie:a.system_id)}).cost_indices.find(J=>J.activity=="invention").cost_index),t(40,Oe=(pe=(Ke=a.modifiers)==null?void 0:Ke.jobCostModifier)!=null?pe:0),t(41,de=(it=(dt=a.modifiers)==null?void 0:dt.facilityTax)!=null?it:0),t(42,Ne=(mt=(We=a.modifiers)==null?void 0:We.jobDurationModifier)!=null?mt:0)):(t(11,ve=.01),t(40,Oe=0),t(41,de=0),t(42,Ne=0))),e.$$.dirty[0]&2048|e.$$.dirty[1]&1792&&t(26,s=Y*ve*.02*(1+Oe/100)*(1+de/100)),e.$$.dirty[0]&100668096&&(t(12,he=0),r&&(t(12,he+=U),t(12,he+=Yi(Object.values(r.materials),J=>ae[J.materialTypeID]*J.quantity)),t(12,he+=(D=ae[W])!=null?D:0),t(12,he+=s))),e.$$.dirty[0]&33554432|e.$$.dirty[1]&6144&&t(31,n=r.time*(1+Ne/100)*(1-.03*(((we=_==null?void 0:_.skills.find(J=>J.skill_id===Ir))==null?void 0:we.active_skill_level)||0))),e.$$.dirty[0]&302047240|e.$$.dirty[1]&4128){let ie=function(ut){var Z;return((Z=_==null?void 0:_.skills.find(Ce=>Ce.skill_id===ut))==null?void 0:Z.active_skill_level)||0},J=!1;B!==Ml[F]&&(b(t(3,B=Ml[F])),J=!0);let nt=!1;for(let ut of Object.values(r==null?void 0:r.requiredSkills)){let Z=u.types[ut.type_id];if(Z.name.indexOf("Encryption")>=0){(J||(te==null?void 0:te.type_id)!==Z.type_id)&&(t(15,te=Z),t(18,Ie=ie(te.type_id)));continue}nt?(J||(ee==null?void 0:ee.type_id)!==Z.type_id)&&(t(14,ee=Z),t(17,fe=ie(ee.type_id))):((J||(re==null?void 0:re.type_id)!==Z.type_id)&&(t(13,re=Z),t(16,Te=ie(re.type_id))),nt=!0)}}e.$$.dirty[0]&128&&(W?ji(W).then(J=>{t(20,ze=J.dogma_attributes.find(ie=>ie.attribute_id==Hi).value),t(21,ue=J.dogma_attributes.find(ie=>ie.attribute_id==Ki).value),t(22,N=J.dogma_attributes.find(ie=>ie.attribute_id==Wi).value),t(23,$=J.dogma_attributes.find(ie=>ie.attribute_id==Zi).value)}):(t(20,ze=0),t(21,ue=1),t(22,N=0),t(23,$=0))),e.$$.dirty[0]&36110336|e.$$.dirty[1]&64&&t(19,Ge=((et=r==null?void 0:r.products[A.type_id])==null?void 0:et.probability)*(1+(Te+fe)/30+Ie/40)*ue),e.$$.dirty[0]&12582912&&(t(34,me=Xr+N),t(35,oe=Hr+$)),e.$$.dirty[0]&34603008|e.$$.dirty[1]&68&&(t(33,ce=((st=r==null?void 0:r.products[A.type_id])==null?void 0:st.quantity)+ze),isNaN(ce)&&t(33,ce=1)),e.$$.dirty[0]&524288|e.$$.dirty[1]&4&&t(24,o=ce*Ge),e.$$.dirty[0]&16781313&&(t(0,Fe=he/o),isNaN(Fe)&&t(0,Fe=0)),e.$$.dirty[0]&4096|e.$$.dirty[1]&128&&t(30,Se=xe||[0,he*1.1])},[Fe,K,qe,B,H,v,ae,W,C,U,x,ve,he,re,ee,te,Te,fe,Ie,Ge,ze,ue,N,$,o,r,s,i,u,Q,Se,n,L,ce,me,oe,F,A,xe,Y,Oe,de,Ne,_,a,g,M,X,Ot,rt,He,wt,$e,Ct,Pt,Ye]}class $i extends el{constructor(l){super();tl(this,l,xi,Xi,ll,{selectedCharacterId:36,blueprintToInvent:37,brokerFeeRate:1,productME:34,productTE:35,productRuns:33,expectedCostPerRun:0,extents:38,marketFilterLocation:2},null,[-1,-1,-1])}}const es=dl({attributes:{},types:{}},e=>{let l={},t={};Yt("/data/dgmAttributeTypes.csv").then(r=>{r.filter(i=>{var s,n;return i.attributeID!==null&&(((s=i.attributeName)==null?void 0:s.indexOf("Manufacturing Time Bonus"))!=-1||((n=i.attributeName)==null?void 0:n.indexOf("Industry Job Length Bonus"))!=-1)}).forEach(i=>l[i.attributeID]=i)}).then(()=>Yt("/data/dgmIndustryTypeAttributes.csv")).then(r=>{r.filter(i=>l[i.attributeID]!==void 0).forEach(i=>{var s;t[i.typeID]=(s=t[i.typeID])!=null?s:{},t[i.typeID][i.attributeID]={type_id:i.typeID,attribute_id:i.attributeID,value:i.valueInt==="None"?i.valueFloat:i.valueInt}}),e({attributes:l,types:t})}).catch(r=>console.error(r))});function Kr(e,l,t){const r=e.slice();return r[65]=l[t],r[66]=l,r[67]=t,r}function ts(e){var Hl;let l,t,r,i,s,n,o,u,_,c,b,a,d,p,g,M,X,L,F,B,A,H,v,q,ae,K,W,C,U,Y,x,Q,ve,Oe,de,he,Ne,re,ee,te,Te,fe,Ie,Ge,ze,ue,N,$,me,oe,ce,Fe,xe,Se,qe,Ot,rt,He,wt,$e,Ct,Pt,Ye,G,Ve,Ke,pe=Bl(e[33])+"",dt,it,We,mt,D,we=Xe(e[27])+"",et,st,J,ie,nt=((Hl=e[35].types[e[5]])==null?void 0:Hl.name)+"",ut,Z,Ce,tt,Lt,qt,ke,Ut,at=Xe(e[26])+"",Rt,Ee,jt=Tr(e[32])+"",Qt,St,Ue,Vt,be,cl,rl,Bt,ye,_l,Ae,Le=Xe(e[4])+"",xt,il,Jt=Xe(e[18])+"",E,w,Re,Nt,At,Ft,bt,z,Qe,ne,sl,hl,se=e[20]&&Wr(e);function kl(m){e[56](m)}let nl={};e[3]!==void 0&&(nl.value=e[3]),Ie=new Xl({props:nl}),ct.push(()=>_t(Ie,"value",kl));function yt(m){e[59](m)}function ui(m){e[60](m)}function oi(m){e[61](m)}let El={extents:e[31],quantity:e[24],type_id:e[5],marketFilterLocation:e[8],buyOverheadRate:-e[6],sellOverheadRate:-e[7]-e[6],totalCost:e[18]};e[17][e[5]]!==void 0&&(El.price=e[17][e[5]]),e[22]!==void 0&&(El.lowestSellPrice=e[22]),e[23]!==void 0&&(El.highestBuyPrice=e[23]),be=new Il({props:El}),ct.push(()=>_t(be,"price",yt)),ct.push(()=>_t(be,"lowestSellPrice",ui)),ct.push(()=>_t(be,"highestBuyPrice",oi)),z=new Il({props:{compact:!0,extents:e[31],quantity:e[24],totalCost:e[27]}});let $t=Object.keys(e[12].materials),je=[];for(let m=0;m<$t.length;m+=1)je[m]=xr(Kr(e,$t,m));const ai=m=>Me(je[m],1,1,()=>{je[m]=null});return{c(){l=I("div"),t=R("Runs "),r=I("input"),s=S(),n=I("input"),o=S(),u=I("p"),_=I("b"),c=R("Blueprint"),b=S(),a=I("br"),d=S(),p=I("label"),g=I("input"),X=R(" Invent"),L=S(),F=I("br"),B=S(),se&&se.c(),A=S(),H=I("label"),v=R("ME "),q=I("input"),ae=S(),K=R(e[0]),W=S(),C=I("label"),U=R("TE "),Y=I("input"),x=S(),Q=R(e[1]),ve=S(),Oe=I("br"),de=S(),he=I("label"),Ne=R("Cost per run "),re=I("input"),ee=S(),te=I("b"),Te=R("Facility"),fe=S(),kt(Ie.$$.fragment),ze=S(),ue=I("dl"),N=I("dt"),$=R("System cost index"),me=I("dd"),oe=R(e[13]),ce=I("dt"),Fe=R("Structure rig material bonus"),xe=I("dd"),Se=I("input"),qe=I("dt"),Ot=R("Structure rig duration bonus"),rt=I("dd"),He=I("input"),wt=S(),$e=I("b"),Ct=R("Manufacturing"),Pt=S(),Ye=I("dl"),G=I("dt"),Ve=R("Time"),Ke=I("dd"),dt=R(pe),We=I("dt"),mt=R("Job Cost"),D=I("dd"),et=R(we),st=S(),J=I("div"),ie=I("div"),ut=R(nt),Ce=S(),tt=I("div"),Lt=R(e[24]),qt=S(),ke=I("div"),Ut=R(`Unit price\r
        `),Rt=R(at),Ee=R(`\r
        Total Profit \r
        `),Qt=R(jt),St=S(),Ue=I("br"),Vt=S(),kt(be.$$.fragment),ye=S(),_l=I("br"),Ae=R(`\r
\r
        Unit cost `),xt=R(Le),il=R(" Total cost "),E=R(Jt),w=S(),Re=I("div"),Nt=R("Job cost"),At=I("div"),Ft=S(),bt=I("div"),kt(z.$$.fragment),Qe=S();for(let m=0;m<je.length;m+=1)je[m].c();this.h()},l(m){l=k(m,"DIV",{class:!0});var P=T(l);t=j(P,"Runs "),r=k(P,"INPUT",{type:!0,min:!0,max:!0}),s=V(P),n=k(P,"INPUT",{type:!0,class:!0}),P.forEach(h),o=V(m),u=k(m,"P",{});var De=T(u);_=k(De,"B",{});var ft=T(_);c=j(ft,"Blueprint"),ft.forEach(h),b=V(De),a=k(De,"BR",{}),d=V(De),p=k(De,"LABEL",{});var Xt=T(p);g=k(Xt,"INPUT",{type:!0}),X=j(Xt," Invent"),Xt.forEach(h),L=V(De),F=k(De,"BR",{}),B=V(De),se&&se.l(De),A=V(De),H=k(De,"LABEL",{});var Ht=T(H);v=j(Ht,"ME "),q=k(Ht,"INPUT",{type:!0,min:!0,max:!0}),ae=V(Ht),K=j(Ht,e[0]),Ht.forEach(h),W=V(De),C=k(De,"LABEL",{});var Kt=T(C);U=j(Kt,"TE "),Y=k(Kt,"INPUT",{type:!0,min:!0,max:!0,step:!0}),x=V(Kt),Q=j(Kt,e[1]),Kt.forEach(h),ve=V(De),Oe=k(De,"BR",{}),de=V(De),he=k(De,"LABEL",{});var ul=T(he);Ne=j(ul,"Cost per run "),re=k(ul,"INPUT",{type:!0}),ul.forEach(h),De.forEach(h),ee=V(m),te=k(m,"B",{});var Je=T(te);Te=j(Je,"Facility"),Je.forEach(h),fe=V(m),Et(Ie.$$.fragment,m),ze=V(m),ue=k(m,"DL",{class:!0});var Gt=T(ue);N=k(Gt,"DT",{class:!0});var Kl=T(N);$=j(Kl,"System cost index"),Kl.forEach(h),me=k(Gt,"DD",{class:!0});var Wl=T(me);oe=j(Wl,e[13]),Wl.forEach(h),ce=k(Gt,"DT",{class:!0});var Zl=T(ce);Fe=j(Zl,"Structure rig material bonus"),Zl.forEach(h),xe=k(Gt,"DD",{class:!0});var xl=T(xe);Se=k(xl,"INPUT",{type:!0}),xl.forEach(h),qe=k(Gt,"DT",{class:!0});var $l=T(qe);Ot=j($l,"Structure rig duration bonus"),$l.forEach(h),rt=k(Gt,"DD",{class:!0});var er=T(rt);He=k(er,"INPUT",{type:!0}),er.forEach(h),Gt.forEach(h),wt=V(m),$e=k(m,"B",{});var tr=T($e);Ct=j(tr,"Manufacturing"),tr.forEach(h),Pt=V(m),Ye=k(m,"DL",{class:!0});var pl=T(Ye);G=k(pl,"DT",{class:!0});var lr=T(G);Ve=j(lr,"Time"),lr.forEach(h),Ke=k(pl,"DD",{title:!0,class:!0});var rr=T(Ke);dt=j(rr,pe),rr.forEach(h),We=k(pl,"DT",{class:!0});var ir=T(We);mt=j(ir,"Job Cost"),ir.forEach(h),D=k(pl,"DD",{class:!0});var sr=T(D);et=j(sr,we),sr.forEach(h),pl.forEach(h),st=V(m),J=k(m,"DIV",{class:!0});var gt=T(J);ie=k(gt,"DIV",{class:!0,title:!0});var nr=T(ie);ut=j(nr,nt),nr.forEach(h),Ce=V(gt),tt=k(gt,"DIV",{class:!0});var ur=T(tt);Lt=j(ur,e[24]),ur.forEach(h),qt=V(gt),ke=k(gt,"DIV",{});var ot=T(ke);Ut=j(ot,`Unit price\r
        `),Rt=j(ot,at),Ee=j(ot,`\r
        Total Profit \r
        `),Qt=j(ot,jt),St=V(ot),Ue=k(ot,"BR",{}),Vt=V(ot),Et(be.$$.fragment,ot),ye=V(ot),_l=k(ot,"BR",{}),Ae=j(ot,`\r
\r
        Unit cost `),xt=j(ot,Le),il=j(ot," Total cost "),E=j(ot,Jt),ot.forEach(h),w=V(gt),Re=k(gt,"DIV",{});var or=T(Re);Nt=j(or,"Job cost"),or.forEach(h),At=k(gt,"DIV",{}),T(At).forEach(h),Ft=V(gt),bt=k(gt,"DIV",{});var ar=T(bt);Et(z.$$.fragment,ar),ar.forEach(h),Qe=V(gt);for(let Nl=0;Nl<je.length;Nl+=1)je[Nl].l(gt);gt.forEach(h),this.h()},h(){var m,P;y(r,"type","range"),y(r,"min",1),y(r,"max",i=e[20]?e[21]:(m=e[28])==null?void 0:m.maxProductionLimit),y(n,"type","number"),y(n,"class","svelte-uz3t5j"),y(l,"class","combinedInput svelte-uz3t5j"),y(g,"type","checkbox"),g.disabled=M=!e[25],y(q,"type","range"),y(q,"min",0),y(q,"max",10),q.disabled=e[20],y(Y,"type","range"),y(Y,"min",0),y(Y,"max",20),y(Y,"step",2),Y.disabled=e[20],y(re,"type","number"),re.disabled=e[20],y(N,"class","svelte-uz3t5j"),y(me,"class","svelte-uz3t5j"),y(ce,"class","svelte-uz3t5j"),y(Se,"type","number"),y(xe,"class","svelte-uz3t5j"),y(qe,"class","svelte-uz3t5j"),y(He,"type","number"),y(rt,"class","svelte-uz3t5j"),y(ue,"class","svelte-uz3t5j"),y(G,"class","svelte-uz3t5j"),y(Ke,"title",it=`${e[33]}s`),y(Ke,"class","svelte-uz3t5j"),y(We,"class","svelte-uz3t5j"),y(D,"class","svelte-uz3t5j"),y(Ye,"class","svelte-uz3t5j"),y(ie,"class","itemName svelte-uz3t5j"),y(ie,"title",Z=`${(P=e[35].types[e[5]])==null?void 0:P.name} [${e[5]}]`),y(tt,"class","qty svelte-uz3t5j"),y(J,"class","breakdown svelte-uz3t5j")},m(m,P){O(m,l,P),f(l,t),f(l,r),Be(r,e[11]),f(l,s),f(l,n),Be(n,e[11]),O(m,o,P),O(m,u,P),f(u,_),f(_,c),f(u,b),f(u,a),f(u,d),f(u,p),f(p,g),g.checked=e[20],f(p,X),f(u,L),f(u,F),f(u,B),se&&se.m(u,null),f(u,A),f(u,H),f(H,v),f(H,q),Be(q,e[0]),f(H,ae),f(H,K),f(u,W),f(u,C),f(C,U),f(C,Y),Be(Y,e[1]),f(C,x),f(C,Q),f(u,ve),f(u,Oe),f(u,de),f(u,he),f(he,Ne),f(he,re),Be(re,e[10]),O(m,ee,P),O(m,te,P),f(te,Te),O(m,fe,P),Tt(Ie,m,P),O(m,ze,P),O(m,ue,P),f(ue,N),f(N,$),f(ue,me),f(me,oe),f(ue,ce),f(ce,Fe),f(ue,xe),f(xe,Se),Be(Se,e[14]),f(ue,qe),f(qe,Ot),f(ue,rt),f(rt,He),Be(He,e[19]),O(m,wt,P),O(m,$e,P),f($e,Ct),O(m,Pt,P),O(m,Ye,P),f(Ye,G),f(G,Ve),f(Ye,Ke),f(Ke,dt),f(Ye,We),f(We,mt),f(Ye,D),f(D,et),O(m,st,P),O(m,J,P),f(J,ie),f(ie,ut),f(J,Ce),f(J,tt),f(tt,Lt),f(J,qt),f(J,ke),f(ke,Ut),f(ke,Rt),f(ke,Ee),f(ke,Qt),f(ke,St),f(ke,Ue),f(ke,Vt),Tt(be,ke,null),f(ke,ye),f(ke,_l),f(ke,Ae),f(ke,xt),f(ke,il),f(ke,E),f(J,w),f(J,Re),f(Re,Nt),f(J,At),f(J,Ft),f(J,bt),Tt(z,bt,null),f(J,Qe);for(let De=0;De<je.length;De+=1)je[De].m(J,null);ne=!0,sl||(hl=[_e(r,"change",e[46]),_e(r,"input",e[46]),_e(n,"input",e[47]),_e(g,"change",e[48]),_e(q,"change",e[53]),_e(q,"input",e[53]),_e(Y,"change",e[54]),_e(Y,"input",e[54]),_e(re,"input",e[55]),_e(Se,"input",e[57]),_e(He,"input",e[58])],sl=!0)},p(m,P){var Ht,Kt,ul;(!ne||P[0]&271581184&&i!==(i=m[20]?m[21]:(Ht=m[28])==null?void 0:Ht.maxProductionLimit))&&y(r,"max",i),P[0]&2048&&Be(r,m[11]),P[0]&2048&&lt(n.value)!==m[11]&&Be(n,m[11]),(!ne||P[0]&33554432&&M!==(M=!m[25]))&&(g.disabled=M),P[0]&1048576&&(g.checked=m[20]),m[20]?se?(se.p(m,P),P[0]&1048576&&ge(se,1)):(se=Wr(m),se.c(),ge(se,1),se.m(u,A)):se&&(yl(),Me(se,1,1,()=>{se=null}),gl()),(!ne||P[0]&1048576)&&(q.disabled=m[20]),P[0]&1&&Be(q,m[0]),(!ne||P[0]&1)&&le(K,m[0]),(!ne||P[0]&1048576)&&(Y.disabled=m[20]),P[0]&2&&Be(Y,m[1]),(!ne||P[0]&2)&&le(Q,m[1]),(!ne||P[0]&1048576)&&(re.disabled=m[20]),P[0]&1024&&lt(re.value)!==m[10]&&Be(re,m[10]);const De={};!Ge&&P[0]&8&&(Ge=!0,De.value=m[3],ht(()=>Ge=!1)),Ie.$set(De),(!ne||P[0]&8192)&&le(oe,m[13]),P[0]&16384&&lt(Se.value)!==m[14]&&Be(Se,m[14]),P[0]&524288&&lt(He.value)!==m[19]&&Be(He,m[19]),(!ne||P[1]&4)&&pe!==(pe=Bl(m[33])+"")&&le(dt,pe),(!ne||P[1]&4&&it!==(it=`${m[33]}s`))&&y(Ke,"title",it),(!ne||P[0]&134217728)&&we!==(we=Xe(m[27])+"")&&le(et,we),(!ne||P[0]&32|P[1]&16)&&nt!==(nt=((Kt=m[35].types[m[5]])==null?void 0:Kt.name)+"")&&le(ut,nt),(!ne||P[0]&32|P[1]&16&&Z!==(Z=`${(ul=m[35].types[m[5]])==null?void 0:ul.name} [${m[5]}]`))&&y(ie,"title",Z),(!ne||P[0]&16777216)&&le(Lt,m[24]),(!ne||P[0]&67108864)&&at!==(at=Xe(m[26])+"")&&le(Rt,at),(!ne||P[1]&2)&&jt!==(jt=Tr(m[32])+"")&&le(Qt,jt);const ft={};P[1]&1&&(ft.extents=m[31]),P[0]&16777216&&(ft.quantity=m[24]),P[0]&32&&(ft.type_id=m[5]),P[0]&256&&(ft.marketFilterLocation=m[8]),P[0]&64&&(ft.buyOverheadRate=-m[6]),P[0]&192&&(ft.sellOverheadRate=-m[7]-m[6]),P[0]&262144&&(ft.totalCost=m[18]),!cl&&P[0]&131104&&(cl=!0,ft.price=m[17][m[5]],ht(()=>cl=!1)),!rl&&P[0]&4194304&&(rl=!0,ft.lowestSellPrice=m[22],ht(()=>rl=!1)),!Bt&&P[0]&8388608&&(Bt=!0,ft.highestBuyPrice=m[23],ht(()=>Bt=!1)),be.$set(ft),(!ne||P[0]&16)&&Le!==(Le=Xe(m[4])+"")&&le(xt,Le),(!ne||P[0]&262144)&&Jt!==(Jt=Xe(m[18])+"")&&le(E,Jt);const Xt={};if(P[1]&1&&(Xt.extents=m[31]),P[0]&16777216&&(Xt.quantity=m[24]),P[0]&134217728&&(Xt.totalCost=m[27]),z.$set(Xt),P[0]&537105292|P[1]&17){$t=Object.keys(m[12].materials);let Je;for(Je=0;Je<$t.length;Je+=1){const Gt=Kr(m,$t,Je);je[Je]?(je[Je].p(Gt,P),ge(je[Je],1)):(je[Je]=xr(Gt),je[Je].c(),ge(je[Je],1),je[Je].m(J,null))}for(yl(),Je=$t.length;Je<je.length;Je+=1)ai(Je);gl()}},i(m){if(!ne){ge(se),ge(Ie.$$.fragment,m),ge(be.$$.fragment,m),ge(z.$$.fragment,m);for(let P=0;P<$t.length;P+=1)ge(je[P]);ne=!0}},o(m){Me(se),Me(Ie.$$.fragment,m),Me(be.$$.fragment,m),Me(z.$$.fragment,m),je=je.filter(Boolean);for(let P=0;P<je.length;P+=1)Me(je[P]);ne=!1},d(m){m&&h(l),m&&h(o),m&&h(u),se&&se.d(),m&&h(ee),m&&h(te),m&&h(fe),Dt(Ie,m),m&&h(ze),m&&h(ue),m&&h(wt),m&&h($e),m&&h(Pt),m&&h(Ye),m&&h(st),m&&h(J),Dt(be),Dt(z),zt(je,m),sl=!1,wl(hl)}}}function ls(e){let l;return{c(){l=R("No blueprint selected yet")},l(t){l=j(t,"No blueprint selected yet")},m(t,r){O(t,l,r)},p:Ze,i:Ze,o:Ze,d(t){t&&h(l)}}}function Wr(e){let l,t,r,i,s,n,o;function u(d){e[49](d)}function _(d){e[50](d)}function c(d){e[51](d)}function b(d){e[52](d)}let a={selectedCharacterId:e[9],blueprintToInvent:e[28],marketFilterLocation:e[8]};return e[10]!==void 0&&(a.expectedCostPerRun=e[10]),e[0]!==void 0&&(a.productME=e[0]),e[1]!==void 0&&(a.productTE=e[1]),e[21]!==void 0&&(a.productRuns=e[21]),t=new $i({props:a}),ct.push(()=>_t(t,"expectedCostPerRun",u)),ct.push(()=>_t(t,"productME",_)),ct.push(()=>_t(t,"productTE",c)),ct.push(()=>_t(t,"productRuns",b)),{c(){l=I("div"),kt(t.$$.fragment),this.h()},l(d){l=k(d,"DIV",{class:!0});var p=T(l);Et(t.$$.fragment,p),p.forEach(h),this.h()},h(){y(l,"class","subItem svelte-uz3t5j")},m(d,p){O(d,l,p),Tt(t,l,null),o=!0},p(d,p){const g={};p[0]&512&&(g.selectedCharacterId=d[9]),p[0]&268435456&&(g.blueprintToInvent=d[28]),p[0]&256&&(g.marketFilterLocation=d[8]),!r&&p[0]&1024&&(r=!0,g.expectedCostPerRun=d[10],ht(()=>r=!1)),!i&&p[0]&1&&(i=!0,g.productME=d[0],ht(()=>i=!1)),!s&&p[0]&2&&(s=!0,g.productTE=d[1],ht(()=>s=!1)),!n&&p[0]&2097152&&(n=!0,g.productRuns=d[21],ht(()=>n=!1)),t.$set(g)},i(d){o||(ge(t.$$.fragment,d),o=!0)},o(d){Me(t.$$.fragment,d),o=!1},d(d){d&&h(l),Dt(t)}}}function Zr(e){let l,t,r,i,s;function n(u){e[64](u,e[65])}let o={selectedProductId:e[65],requiredQuantity:e[15](e[12].materials[e[65]].quantity),manufacturedItems:e[2],materialEfficiency:10,timeEfficiency:20,selectedCharacterId:e[9],selectedLocationId:e[3],marketFilterLocation:e[8],compact:!0};return e[16][e[65]]!==void 0&&(o.unitCost=e[16][e[65]]),t=new $r({props:o}),ct.push(()=>_t(t,"unitCost",n)),{c(){l=I("div"),kt(t.$$.fragment),i=S(),this.h()},l(u){l=k(u,"DIV",{class:!0});var _=T(l);Et(t.$$.fragment,_),i=V(_),_.forEach(h),this.h()},h(){y(l,"class","subItem svelte-uz3t5j")},m(u,_){O(u,l,_),Tt(t,l,null),f(l,i),s=!0},p(u,_){e=u;const c={};_[0]&4096&&(c.selectedProductId=e[65]),_[0]&36864&&(c.requiredQuantity=e[15](e[12].materials[e[65]].quantity)),_[0]&4&&(c.manufacturedItems=e[2]),_[0]&512&&(c.selectedCharacterId=e[9]),_[0]&8&&(c.selectedLocationId=e[3]),_[0]&256&&(c.marketFilterLocation=e[8]),!r&&_[0]&69632&&(r=!0,c.unitCost=e[16][e[65]],ht(()=>r=!1)),t.$set(c)},i(u){s||(ge(t.$$.fragment,u),s=!0)},o(u){Me(t.$$.fragment,u),s=!1},d(u){u&&h(l),Dt(t)}}}function xr(e){var W;let l,t,r,i,s,n,o=((W=e[35].types[e[65]])==null?void 0:W.name)+"",u,_,c,b,a=e[15](e[12].materials[e[65]].quantity)+"",d,p,g,M,X,L,F,B,A,H;function v(){e[62].call(r,e[65])}function q(C){e[63](C,e[65])}let ae={extents:e[31],quantity:e[15](e[12].materials[e[65]].quantity),type_id:parseInt(e[65]),marketFilterLocation:e[8],overridePrice:e[16][e[65]],buyOverheadRate:e[7],totalCost:e[16][e[65]]?e[16][e[65]]*e[15](e[12].materials[e[65]].quantity):null,compact:!0};e[17][e[65]]!==void 0&&(ae.price=e[17][e[65]]),M=new Il({props:ae}),ct.push(()=>_t(M,"price",q));let K=e[2][e[65]]&&Zr(e);return{c(){l=I("div"),t=I("label"),r=I("input"),s=S(),n=I("span"),u=R(o),c=S(),b=I("div"),d=R(a),p=S(),g=I("div"),kt(M.$$.fragment),L=S(),K&&K.c(),F=Pe(),this.h()},l(C){l=k(C,"DIV",{class:!0});var U=T(l);t=k(U,"LABEL",{});var Y=T(t);r=k(Y,"INPUT",{type:!0}),s=V(Y),n=k(Y,"SPAN",{title:!0});var x=T(n);u=j(x,o),x.forEach(h),Y.forEach(h),U.forEach(h),c=V(C),b=k(C,"DIV",{class:!0});var Q=T(b);d=j(Q,a),Q.forEach(h),p=V(C),g=k(C,"DIV",{});var ve=T(g);Et(M.$$.fragment,ve),ve.forEach(h),L=V(C),K&&K.l(C),F=Pe(),this.h()},h(){var C;y(r,"type","checkbox"),r.disabled=i=zl(e[29],parseInt(e[65]))==null,y(n,"title",_=`${(C=e[35].types[e[65]])==null?void 0:C.name} [${e[65]}]`),y(l,"class","itemName svelte-uz3t5j"),y(b,"class","qty svelte-uz3t5j")},m(C,U){O(C,l,U),f(l,t),f(t,r),r.checked=e[2][e[65]],f(t,s),f(t,n),f(n,u),O(C,c,U),O(C,b,U),f(b,d),O(C,p,U),O(C,g,U),Tt(M,g,null),O(C,L,U),K&&K.m(C,U),O(C,F,U),B=!0,A||(H=_e(r,"change",v),A=!0)},p(C,U){var x,Q;e=C,(!B||U[0]&536875008&&i!==(i=zl(e[29],parseInt(e[65]))==null))&&(r.disabled=i),U[0]&4100&&(r.checked=e[2][e[65]]),(!B||U[0]&4096|U[1]&16)&&o!==(o=((x=e[35].types[e[65]])==null?void 0:x.name)+"")&&le(u,o),(!B||U[0]&4096|U[1]&16&&_!==(_=`${(Q=e[35].types[e[65]])==null?void 0:Q.name} [${e[65]}]`))&&y(n,"title",_),(!B||U[0]&36864)&&a!==(a=e[15](e[12].materials[e[65]].quantity)+"")&&le(d,a);const Y={};U[1]&1&&(Y.extents=e[31]),U[0]&36864&&(Y.quantity=e[15](e[12].materials[e[65]].quantity)),U[0]&4096&&(Y.type_id=parseInt(e[65])),U[0]&256&&(Y.marketFilterLocation=e[8]),U[0]&69632&&(Y.overridePrice=e[16][e[65]]),U[0]&128&&(Y.buyOverheadRate=e[7]),U[0]&102400&&(Y.totalCost=e[16][e[65]]?e[16][e[65]]*e[15](e[12].materials[e[65]].quantity):null),!X&&U[0]&135168&&(X=!0,Y.price=e[17][e[65]],ht(()=>X=!1)),M.$set(Y),e[2][e[65]]?K?(K.p(e,U),U[0]&4100&&ge(K,1)):(K=Zr(e),K.c(),ge(K,1),K.m(F.parentNode,F)):K&&(yl(),Me(K,1,1,()=>{K=null}),gl())},i(C){B||(ge(M.$$.fragment,C),ge(K),B=!0)},o(C){Me(M.$$.fragment,C),Me(K),B=!1},d(C){C&&h(l),C&&h(c),C&&h(b),C&&h(p),C&&h(g),Dt(M),C&&h(L),K&&K.d(C),C&&h(F),A=!1,H()}}}function rs(e){let l,t,r,i;const s=[ls,ts],n=[];function o(u,_){return u[28]?1:0}return l=o(e),t=n[l]=s[l](e),{c(){t.c(),r=Pe()},l(u){t.l(u),r=Pe()},m(u,_){n[l].m(u,_),O(u,r,_),i=!0},p(u,_){let c=l;l=o(u),l===c?n[l].p(u,_):(yl(),Me(n[c],1,1,()=>{n[c]=null}),gl(),t=n[l],t?t.p(u,_):(t=n[l]=s[l](u),t.c()),ge(t,1),t.m(r.parentNode,r))},i(u){i||(ge(t),i=!0)},o(u){Me(t),i=!1},d(u){n[l].d(u),u&&h(r)}}}function is(e,l,t){let r,i,s,n,o,u,_,c,b,a,d=Ze,p=()=>(d(),d=ol(de,D=>t(41,a=D)),de),g,M=Ze,X=()=>(M(),M=ol(n,D=>t(42,g=D)),n),L,F,B,A,H;pt(e,es,D=>t(43,L=D)),pt(e,Er,D=>t(44,F=D)),pt(e,kr,D=>t(45,B=D)),pt(e,Gl,D=>t(29,A=D)),pt(e,vl,D=>t(35,H=D)),e.$$.on_destroy.push(()=>d()),e.$$.on_destroy.push(()=>M());let v=0,{selectedProductId:q=null}=l,{salesTaxRate:ae=.036}=l,{brokerFeeRate:K=.0113709973928}=l,{requiredQuantity:W=null}=l,C=1,{materialEfficiency:U=0}=l,{timeEfficiency:Y=0}=l,{manufacturedItems:x={}}=l,Q=null,{selectedLocationId:ve=null}=l,Oe=.01,de=null;p();let he=0,Ne=D=>D,re={},ee={},te=0,{marketFilterLocation:Te=null}=l,fe=0,Ie=0,{unitCost:Ge=null}=l,{compact:ze=!1}=l,ue=!1,N=10,{selectedCharacterId:$}=l,{extents:me=null}=l,oe,ce,Fe=[0,1e3];function xe(){C=lt(this.value),t(11,C),t(28,r),t(12,Q),t(36,W),t(5,q),t(20,ue),t(21,N),t(29,A),t(25,i)}function Se(){C=lt(this.value),t(11,C),t(28,r),t(12,Q),t(36,W),t(5,q),t(20,ue),t(21,N),t(29,A),t(25,i)}function qe(){ue=this.checked,t(20,ue),t(25,i),t(29,A),t(28,r),t(5,q)}function Ot(D){v=D,t(10,v)}function rt(D){U=D,t(0,U)}function He(D){Y=D,t(1,Y)}function wt(D){N=D,t(21,N)}function $e(){U=lt(this.value),t(0,U)}function Ct(){Y=lt(this.value),t(1,Y)}function Pt(){v=lt(this.value),t(10,v)}function Ye(D){ve=D,t(3,ve)}function G(){he=lt(this.value),t(14,he)}function Ve(){Ie=lt(this.value),t(19,Ie)}function Ke(D){e.$$.not_equal(ee[q],D)&&(ee[q]=D,t(17,ee))}function pe(D){oe=D,t(22,oe)}function dt(D){ce=D,t(23,ce)}function it(D){x[D]=this.checked,t(2,x),t(12,Q),t(28,r),t(36,W),t(5,q),t(29,A)}function We(D,we){e.$$.not_equal(ee[we],D)&&(ee[we]=D,t(17,ee))}function mt(D,we){e.$$.not_equal(re[we],D)&&(re[we]=D,t(16,re),t(2,x))}return e.$$set=D=>{"selectedProductId"in D&&t(5,q=D.selectedProductId),"salesTaxRate"in D&&t(6,ae=D.salesTaxRate),"brokerFeeRate"in D&&t(7,K=D.brokerFeeRate),"requiredQuantity"in D&&t(36,W=D.requiredQuantity),"materialEfficiency"in D&&t(0,U=D.materialEfficiency),"timeEfficiency"in D&&t(1,Y=D.timeEfficiency),"manufacturedItems"in D&&t(2,x=D.manufacturedItems),"selectedLocationId"in D&&t(3,ve=D.selectedLocationId),"marketFilterLocation"in D&&t(8,Te=D.marketFilterLocation),"unitCost"in D&&t(4,Ge=D.unitCost),"compact"in D&&t(37,ze=D.compact),"selectedCharacterId"in D&&t(9,$=D.selectedCharacterId),"extents"in D&&t(38,me=D.extents)},e.$$.update=()=>{var D,we,et,st,J,ie,nt,ut;if(e.$$.dirty[0]&536870944&&t(28,r=zl(A,q)),e.$$.dirty[0]&805306368&&t(25,i=qi(A,r==null?void 0:r.type_id)),e.$$.dirty[0]&268439584|e.$$.dirty[1]&32){let Z=r==null?void 0:r.activities[Ol];Z!=Q&&(t(12,Q=Z),Q&&W&&t(11,C=Math.ceil(W/Q.products[q].quantity)))}if(e.$$.dirty[1]&32,e.$$.dirty[0]&8|e.$$.dirty[1]&17408&&(ve&&p(t(30,de=ql(ve))),a?t(13,Oe=B==null?void 0:B.find(Z=>{var Ce;return Z.solar_system_id===((Ce=a.solar_system_id)!=null?Ce:a.system_id)}).cost_indices.find(Z=>Z.activity=="manufacturing").cost_index):t(13,Oe=.01)),e.$$.dirty[0]&33554432&&(i||t(20,ue=!1)),e.$$.dirty[0]&3145728&&ue&&t(11,C=N),e.$$.dirty[0]&18433|e.$$.dirty[1]&1024&&t(15,Ne=Z=>{var Ce,tt;return Math.max(C,Math.ceil(Z*C*(1-U/100)*(1+((tt=(Ce=a==null?void 0:a.modifiers)==null?void 0:Ce.materialConsumptionModifier)!=null?tt:0)/100)*(1+he/100)))}),e.$$.dirty[0]&4096|e.$$.dirty[1]&8448&&(t(39,fe=0),Q))for(let Z in Q.materials)t(39,fe+=Q.materials[Z].quantity*((we=(D=F[Z])==null?void 0:D.adjusted_price)!=null?we:0));if(e.$$.dirty[0]&10240|e.$$.dirty[1]&1280&&t(27,s=fe*Oe*(1+((st=(et=a==null?void 0:a.modifiers)==null?void 0:et.jobCostModifier)!=null?st:0)/100)*(1+((ie=(J=a==null?void 0:a.modifiers)==null?void 0:J.facilityTax)!=null?ie:0)/100)*C),e.$$.dirty[0]&134650880&&(t(18,te=0),Q)){for(let Z in Q.materials){let Ce=Ne(Q.materials[Z].quantity);t(18,te+=Ce*ee[Z])}t(18,te+=s),t(18,te+=v*C)}if(e.$$.dirty[0]&65540)for(let Z in re)x[Z]||t(16,re[Z]=void 0,re);e.$$.dirty[0]&512&&X(t(34,n=Ml[$])),e.$$.dirty[0]&4096|e.$$.dirty[1]&6144&&t(40,o=Q?[...Object.values(Q.requiredSkills||{}).map(Z=>Z.type_id),Ir].reduce((Z,Ce)=>{var Lt,qt,ke,Ut,at,Rt,Ee,jt;if(L.types[Ce]===void 0)return Z;let tt=(Rt=(at=(ke=(Lt=L.types[Ce][440])==null?void 0:Lt.value)!=null?ke:(qt=L.types[Ce][1982])==null?void 0:qt.value)!=null?at:(Ut=L.types[Ce][1961])==null?void 0:Ut.value)!=null?Rt:0;return tt*=(jt=(Ee=g==null?void 0:g.skills.find(Qt=>Qt.skill_id==Ce))==null?void 0:Ee.active_skill_level)!=null?jt:0,Z*(1+tt*.01)},1):1),e.$$.dirty[0]&530434|e.$$.dirty[1]&1536&&t(33,u=(Q==null?void 0:Q.time)*(1-Y/100)*o*(1+((ut=(nt=a==null?void 0:a.modifiers)==null?void 0:nt.jobDurationModifier)!=null?ut:0)/100)*(1+Ie/100)*C),e.$$.dirty[0]&131104&&t(26,_=ee[q]),e.$$.dirty[0]&6176&&t(24,c=(Q==null?void 0:Q.products[q].quantity)*C),e.$$.dirty[0]&84148224&&t(32,b=_*c-te),e.$$.dirty[0]&17043456&&t(4,Ge=Q?te/c:null),e.$$.dirty[0]&29495344|e.$$.dirty[1]&128&&(me===null?Q&&t(31,Fe[1]=1.1*Math.max(ee[q],Ge,oe!=null?oe:0,ce!=null?ce:0)*c,Fe):t(31,Fe=me))},[U,Y,x,ve,Ge,q,ae,K,Te,$,v,C,Q,Oe,he,Ne,re,ee,te,Ie,ue,N,oe,ce,c,i,_,s,r,A,de,Fe,b,u,n,H,W,ze,me,fe,o,a,g,L,F,B,xe,Se,qe,Ot,rt,He,wt,$e,Ct,Pt,Ye,G,Ve,Ke,pe,dt,it,We,mt]}class $r extends el{constructor(l){super();tl(this,l,is,rs,ll,{selectedProductId:5,salesTaxRate:6,brokerFeeRate:7,requiredQuantity:36,materialEfficiency:0,timeEfficiency:1,manufacturedItems:2,selectedLocationId:3,marketFilterLocation:8,unitCost:4,compact:37,selectedCharacterId:9,extents:38},null,[-1,-1,-1])}}function ei(e,l,t){const r=e.slice();return r[13]=l[t].type_id,r[14]=l[t].name,r}function ti(e,l,t){const r=e.slice();return r[17]=l[t],r[18]=l,r[19]=t,r}function li(e,l,t){const r=e.slice();return r[20]=l[t].market_group_id,r[14]=l[t].name,r}function ri(e){let l,t=e[14]+"",r,i;return{c(){l=I("option"),r=R(t),this.h()},l(s){l=k(s,"OPTION",{});var n=T(l);r=j(n,t),n.forEach(h),this.h()},h(){l.__value=i=e[20],l.value=l.__value},m(s,n){O(s,l,n),f(l,r)},p(s,n){n&6&&t!==(t=s[14]+"")&&le(r,t),n&6&&i!==(i=s[20])&&(l.__value=i,l.value=l.__value)},d(s){s&&h(l)}}}function ii(e){let l,t,r,i,s=Object.values(e[17]).filter(e[9]),n=[];for(let _=0;_<s.length;_+=1)n[_]=ri(li(e,s,_));function o(){e[10].call(l,e[19])}function u(..._){return e[11](e[17],e[19],..._)}return{c(){l=I("select");for(let _=0;_<n.length;_+=1)n[_].c();this.h()},l(_){l=k(_,"SELECT",{name:!0});var c=T(l);for(let b=0;b<n.length;b+=1)n[b].l(c);c.forEach(h),this.h()},h(){y(l,"name",t=e[19].toString()),e[3][e[19]]===void 0&&ml(o)},m(_,c){O(_,l,c);for(let b=0;b<n.length;b+=1)n[b].m(l,null);Mt(l,e[3][e[19]]),r||(i=[_e(l,"change",o),_e(l,"change",u)],r=!0)},p(_,c){if(e=_,c&6){s=Object.values(e[17]).filter(e[9]);let b;for(b=0;b<s.length;b+=1){const a=li(e,s,b);n[b]?n[b].p(a,c):(n[b]=ri(a),n[b].c(),n[b].m(l,null))}for(;b<n.length;b+=1)n[b].d(1);n.length=s.length}c&14&&Mt(l,e[3][e[19]])},d(_){_&&h(l),zt(n,_),r=!1,wl(i)}}}function si(e){let l,t=e[14]+"",r,i;return{c(){l=I("option"),r=R(t),this.h()},l(s){l=k(s,"OPTION",{});var n=T(l);r=j(n,t),n.forEach(h),this.h()},h(){l.__value=i=e[13],l.value=l.__value},m(s,n){O(s,l,n),f(l,r)},p(s,n){n&16&&t!==(t=s[14]+"")&&le(r,t),n&16&&i!==(i=s[13])&&(l.__value=i,l.value=l.__value)},d(s){s&&h(l)}}}function ss(e){let l,t,r,i,s,n,o,u=e[2],_=[];for(let a=0;a<u.length;a+=1)_[a]=ii(ti(e,u,a));let c=e[4],b=[];for(let a=0;a<c.length;a+=1)b[a]=si(ei(e,c,a));return{c(){l=I("p");for(let a=0;a<_.length;a+=1)_[a].c();t=S(),r=I("br"),i=R(`\r
    Item \r
    `),s=I("select");for(let a=0;a<b.length;a+=1)b[a].c()},l(a){l=k(a,"P",{});var d=T(l);for(let g=0;g<_.length;g+=1)_[g].l(d);t=V(d),r=k(d,"BR",{}),i=j(d,`\r
    Item \r
    `),s=k(d,"SELECT",{});var p=T(s);for(let g=0;g<b.length;g+=1)b[g].l(p);p.forEach(h),d.forEach(h)},m(a,d){O(a,l,d);for(let p=0;p<_.length;p+=1)_[p].m(l,null);f(l,t),f(l,r),f(l,i),f(l,s);for(let p=0;p<b.length;p+=1)b[p].m(s,null);Mt(s,e[0]),n||(o=_e(s,"change",e[5]),n=!0)},p(a,[d]){if(d&14){u=a[2];let p;for(p=0;p<u.length;p+=1){const g=ti(a,u,p);_[p]?_[p].p(g,d):(_[p]=ii(g),_[p].c(),_[p].m(l,t))}for(;p<_.length;p+=1)_[p].d(1);_.length=u.length}if(d&16){c=a[4];let p;for(p=0;p<c.length;p+=1){const g=ei(a,c,p);b[p]?b[p].p(g,d):(b[p]=si(g),b[p].c(),b[p].m(s,null))}for(;p<b.length;p+=1)b[p].d(1);b.length=c.length}d&17&&Mt(s,a[0])},i:Ze,o:Ze,d(a){a&&h(l),zt(_,a),zt(b,a),n=!1,o()}}}function ni(e){if(e.child_groups===void 0)return[e.market_group_id];let l=Object.keys(e.child_groups).map(t=>parseInt(t));for(let t in e.child_groups)l=l.concat(ni(e.child_groups[t]));return l}function ns(e,l,t){let r;pt(e,vl,M=>t(8,r=M));let i=new Set,s=[],n=[null],o=[],u=[],{selectableTypes:_=void 0}=l,{selectedTypeId:c=null}=l;const b=yi();function a(M){b("change",parseInt(M.target.value))}const d=M=>i.has(M.market_group_id);function p(M){n[M]=bl(this),t(3,n),t(2,s),t(8,r),t(3,n),t(1,i),t(8,r),t(7,o),t(6,_)}const g=(M,X,L)=>{M[L.target.value].child_groups&&t(3,n=[...n.slice(0,X+1),null])};return e.$$set=M=>{"selectableTypes"in M&&t(6,_=M.selectableTypes),"selectedTypeId"in M&&t(0,c=M.selectedTypeId)},e.$$.update=()=>{if(e.$$.dirty&320&&r.types&&t(7,o=_||Object.values(r.types)),e.$$.dirty&408){let M=n[n.length-1]||n[n.length-2];if(M){t(4,u=[]);let X=new Set,L=new Set(o.map(B=>B.type_id)),F=ni(r.markets.groups[M]);for(let B of F)r.markets.groups[B].types.forEach(A=>{L.has(A)&&X.add(A)});t(4,u=Array.from(X).map(B=>r.types[B]))}else t(4,u=o);u.sort((X,L)=>X.name.localeCompare(L.name))}if(e.$$.dirty&386&&r.markets&&r.types&&r.markets.groups){let M=new Set(o.map(X=>X.type_id));i.clear();for(let X in r.markets.groups){let L=r.markets.groups[X];for(let F of L.types)if(M.has(F)){let B=parseInt(X);do i.add(B),B=r.markets.groups[B].parent_group_id;while(B!==void 0)}}t(1,i),t(8,r),t(7,o),t(6,_)}if(e.$$.dirty&268&&r.markets){t(2,s=[r.markets.groupTree]);for(let M of n)M!=null&&r.markets.groups[M].child_groups&&s.push(r.markets.groups[M].child_groups)}},[c,i,s,n,u,a,_,o,r,d,p,g]}class us extends el{constructor(l){super();tl(this,l,ns,ss,ll,{selectableTypes:6,selectedTypeId:0})}}function os(e){var F,B,A,H;let l,t,r,i,s,n,o,u,_,c,b,a,d,p;document.title=l=""+((((F=e[0])==null?void 0:F.types)&&((B=e[0])==null?void 0:B.types[e[4]])?`${(H=(A=e[0])==null?void 0:A.types[e[4]])==null?void 0:H.name} - `:"")+"EVE Online Visual Industry Calculator");function g(v){e[7](v)}let M={};e[1]!==void 0&&(M.value=e[1]),r=new Ni({props:M}),ct.push(()=>_t(r,"value",g));function X(v){e[8](v)}let L={allowUnselected:!0};return e[3]!==void 0&&(L.value=e[3]),o=new Xl({props:L}),ct.push(()=>_t(o,"value",X)),c=new us({props:{selectedTypeId:e[4],selectableTypes:e[2]}}),c.$on("change",e[9]),d=new $r({props:{selectedProductId:e[4],selectedCharacterId:e[1],marketFilterLocation:e[3]}}),{c(){t=S(),kt(r.$$.fragment),s=I("br"),n=R(`\r
Filter market `),kt(o.$$.fragment),_=S(),kt(c.$$.fragment),b=S(),a=I("p"),kt(d.$$.fragment)},l(v){gi('[data-svelte="svelte-xymh63"]',document.head).forEach(h),t=V(v),Et(r.$$.fragment,v),s=k(v,"BR",{}),n=j(v,`\r
Filter market `),Et(o.$$.fragment,v),_=V(v),Et(c.$$.fragment,v),b=V(v),a=k(v,"P",{}),T(a).forEach(h),Et(d.$$.fragment,v)},m(v,q){O(v,t,q),Tt(r,v,q),O(v,s,q),O(v,n,q),Tt(o,v,q),O(v,_,q),Tt(c,v,q),O(v,b,q),O(v,a,q),Tt(d,v,q),p=!0},p(v,[q]){var U,Y,x,Q;(!p||q&17)&&l!==(l=""+((((U=v[0])==null?void 0:U.types)&&((Y=v[0])==null?void 0:Y.types[v[4]])?`${(Q=(x=v[0])==null?void 0:x.types[v[4]])==null?void 0:Q.name} - `:"")+"EVE Online Visual Industry Calculator"))&&(document.title=l);const ae={};!i&&q&2&&(i=!0,ae.value=v[1],ht(()=>i=!1)),r.$set(ae);const K={};!u&&q&8&&(u=!0,K.value=v[3],ht(()=>u=!1)),o.$set(K);const W={};q&16&&(W.selectedTypeId=v[4]),q&4&&(W.selectableTypes=v[2]),c.$set(W);const C={};q&16&&(C.selectedProductId=v[4]),q&2&&(C.selectedCharacterId=v[1]),q&8&&(C.marketFilterLocation=v[3]),d.$set(C)},i(v){p||(ge(r.$$.fragment,v),ge(o.$$.fragment,v),ge(c.$$.fragment,v),ge(d.$$.fragment,v),p=!0)},o(v){Me(r.$$.fragment,v),Me(o.$$.fragment,v),Me(c.$$.fragment,v),Me(d.$$.fragment,v),p=!1},d(v){v&&h(t),Dt(r,v),v&&h(s),v&&h(n),Dt(o,v),v&&h(_),Dt(c,v),v&&h(b),v&&h(a),Dt(d,v)}}}function as(e,l,t){let r,i,s,n;pt(e,vl,d=>t(0,i=d)),pt(e,Gl,d=>t(5,s=d)),pt(e,Di,d=>t(6,n=d));let o,u=null,_;function c(d){o=d,t(1,o)}function b(d){_=d,t(3,_)}const a=d=>{ki(`${d.detail}`,{keepfocus:!0})};return e.$$.update=()=>{if(e.$$.dirty&64&&t(4,r=parseInt(n.params.type)||null),e.$$.dirty&33&&s.types&&i.types){let d=function(g){var M,X;return Object.keys((X=(M=s.types[g].activities[Ol])==null?void 0:M.products)!=null?X:{}).map(L=>parseInt(L))},p=[];Object.values(s.types).forEach(g=>{p=[...p,...d(g.type_id)]}),t(2,u=p.filter(g=>i.types[g]!==void 0).map(g=>i.types[g]))}},[i,o,u,_,r,s,n,c,b,a]}class hs extends el{constructor(l){super();tl(this,l,as,os,ll,{})}}export{hs as default};
