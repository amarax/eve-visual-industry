import{S as Cl,i as Dl,s as Pl,e as h,t as q,c as y,a as R,g as M,d as u,f as C,D as r,h as ue,b as B,F as vl,G as Fe,H as Tt,I as gl,L as xe,_ as Si,N as he,O as ye,k as S,j as at,n as j,m as ft,o as _t,Q as ve,x as $,u as ie,v as ct,E as ti,$ as nt,r as Wt,w as Xt,a0 as wl,Y as ql,M as Ml,a1 as Lt,K as li,l as pl,y as ji,C as Li,a2 as ii,Z as Ni}from"../../chunks/vendor-dd7e5550.js";import{M as il,a as Ul,I as ri,C as Vi,A as Ai,b as wi,p as Ui,g as Qi}from"../../chunks/IndustryJob-4913fb84.js";import{b as ni}from"../../chunks/paths-28a87002.js";import{a as ui,F as vt,c as Il,L as Ql,U as Fl,I as Gl,D as Fi,d as Jl,M as Ol,A as si,l as Gi,e as Sl,f as oi,P as ai,g as Yl,R as fi,h as zl,i as Ji,j as _i,k as Yi,m as zi}from"../../chunks/EveMarketGroups-94ca141b.js";import{b as jl}from"../../chunks/EveCharacter-cb6d03ec.js";import"../../chunks/singletons-12a22614.js";function ci(e,l,t){const i=e.slice();return i[5]=l[t],i}function pi(e){var f,s;let l,t=((s=(f=e[2].get(e[5]))==null?void 0:f.name)!=null?s:e[5])+"",i,o;return{c(){l=h("option"),i=q(t),this.h()},l(a){l=y(a,"OPTION",{});var n=R(l);i=M(n,t),n.forEach(u),this.h()},h(){l.__value=o=e[5],l.value=l.__value},m(a,n){C(a,l,n),r(l,i)},p(a,n){var c,b;n&5&&t!==(t=((b=(c=a[2].get(a[5]))==null?void 0:c.name)!=null?b:a[5])+"")&&ue(i,t),n&1&&o!==(o=a[5])&&(l.__value=o,l.value=l.__value)},d(a){a&&u(l)}}}function Hi(e){let l,t,i,o,f=e[0],s=[];for(let a=0;a<f.length;a+=1)s[a]=pi(ci(e,f,a));return{c(){l=q(`Item \r
`),t=h("select");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){l=M(a,`Item \r
`),t=y(a,"SELECT",{class:!0});var n=R(t);for(let c=0;c<s.length;c+=1)s[c].l(n);n.forEach(u),this.h()},h(){B(t,"class","svelte-l65zkr")},m(a,n){C(a,l,n),C(a,t,n);for(let c=0;c<s.length;c+=1)s[c].m(t,null);vl(t,e[1]),i||(o=Fe(t,"change",e[3]),i=!0)},p(a,[n]){if(n&5){f=a[0];let c;for(c=0;c<f.length;c+=1){const b=ci(a,f,c);s[c]?s[c].p(b,n):(s[c]=pi(b),s[c].c(),s[c].m(t,null))}for(;c<s.length;c+=1)s[c].d(1);s.length=f.length}n&3&&vl(t,a[1])},i:Tt,o:Tt,d(a){a&&u(l),a&&u(t),gl(s,a),i=!1,o()}}}function Ki(e,l,t){let i;xe(e,ui,n=>t(2,i=n));let{selectableTypes:o=[]}=l,{selectedTypeId:f=null}=l;const s=Si();function a(n){s("change",parseInt(n.target.value))}return e.$$set=n=>{"selectableTypes"in n&&t(0,o=n.selectableTypes),"selectedTypeId"in n&&t(1,f=n.selectedTypeId)},[o,f,i,a]}class Zi extends Cl{constructor(l){super();Dl(this,l,Ki,Hi,Pl,{selectableTypes:0,selectedTypeId:1})}}function Wi(e,l){return e.reduce((t,i)=>t+(l?l(i):i),0)}function di(e,l,t){const i=e.slice();return i[58]=l[t],i}function mi(e,l,t){const i=e.slice();return i[61]=l[t],i}function bi(e,l,t){const i=e.slice();return i[64]=l[t],i[65]=l,i[66]=t,i}function hi(e){var z,K;let l,t=e[28].types[e[64]].name+"",i,o,f,s,a=((z=e[25].materials[e[64]])==null?void 0:z.quantity)+"",n,c,b,d,k,g;function U(O){e[51](O,e[64])}let L={compact:!0,extents:e[29],quantity:(K=e[25].materials[e[64]])==null?void 0:K.quantity,type_id:e[64],buyOverheadRate:e[1]};return e[5][e[64]]!==void 0&&(L.price=e[5][e[64]]),d=new il({props:L}),he.push(()=>ye(d,"price",U)),{c(){l=h("div"),i=q(t),f=S(),s=h("div"),n=q(a),c=S(),b=h("div"),at(d.$$.fragment),this.h()},l(O){l=y(O,"DIV",{class:!0,title:!0});var F=R(l);i=M(F,t),F.forEach(u),f=j(O),s=y(O,"DIV",{class:!0});var v=R(s);n=M(v,a),v.forEach(u),c=j(O),b=y(O,"DIV",{class:!0});var Q=R(b);ft(d.$$.fragment,Q),Q.forEach(u),this.h()},h(){B(l,"class","itemName"),B(l,"title",o=`${e[28].types[e[64]].name} [${e[64]}]`),B(s,"class","qty"),B(b,"class","graph svelte-1u87si0")},m(O,F){C(O,l,F),r(l,i),C(O,f,F),C(O,s,F),r(s,n),C(O,c,F),C(O,b,F),_t(d,b,null),g=!0},p(O,F){var Q,Y;e=O,(!g||F[0]&301989888)&&t!==(t=e[28].types[e[64]].name+"")&&ue(i,t),(!g||F[0]&301989888&&o!==(o=`${e[28].types[e[64]].name} [${e[64]}]`))&&B(l,"title",o),(!g||F[0]&33554432)&&a!==(a=((Q=e[25].materials[e[64]])==null?void 0:Q.quantity)+"")&&ue(n,a);const v={};F[0]&536870912&&(v.extents=e[29]),F[0]&33554432&&(v.quantity=(Y=e[25].materials[e[64]])==null?void 0:Y.quantity),F[0]&33554432&&(v.type_id=e[64]),F[0]&2&&(v.buyOverheadRate=e[1]),!k&&F[0]&33554464&&(k=!0,v.price=e[5][e[64]],ve(()=>k=!1)),d.$set(v)},i(O){g||($(d.$$.fragment,O),g=!0)},o(O){ie(d.$$.fragment,O),g=!1},d(O){O&&u(l),O&&u(f),O&&u(s),O&&u(c),O&&u(b),ct(d)}}}function yi(e){let l,t=e[61].name+"",i,o;return{c(){l=h("option"),i=q(t),this.h()},l(f){l=y(f,"OPTION",{});var s=R(l);i=M(s,t),s.forEach(u),this.h()},h(){l.__value=o=e[61].type_id,l.value=l.__value},m(f,s){C(f,l,s),r(l,i)},p(f,s){s[1]&1&&t!==(t=f[61].name+"")&&ue(i,t),s[1]&1&&o!==(o=f[61].type_id)&&(l.__value=o,l.value=l.__value)},d(f){f&&u(l)}}}function Xi(e){let l,t,i;return{c(){l=h("div"),t=S(),i=h("div"),this.h()},l(o){l=y(o,"DIV",{}),R(l).forEach(u),t=j(o),i=y(o,"DIV",{class:!0}),R(i).forEach(u),this.h()},h(){B(i,"class","graph svelte-1u87si0")},m(o,f){C(o,l,f),C(o,t,f),C(o,i,f)},p:Tt,i:Tt,o:Tt,d(o){o&&u(l),o&&u(t),o&&u(i)}}}function $i(e){let l,t=1+"",i,o,f,s,a,n;function c(d){e[53](d)}let b={compact:!0,extents:e[29],quantity:1,type_id:e[6],buyOverheadRate:e[1]};return e[5][e[6]]!==void 0&&(b.price=e[5][e[6]]),s=new il({props:b}),he.push(()=>ye(s,"price",c)),{c(){l=h("div"),i=q(t),o=S(),f=h("div"),at(s.$$.fragment),this.h()},l(d){l=y(d,"DIV",{class:!0});var k=R(l);i=M(k,t),k.forEach(u),o=j(d),f=y(d,"DIV",{class:!0});var g=R(f);ft(s.$$.fragment,g),g.forEach(u),this.h()},h(){B(l,"class","qty"),B(f,"class","graph svelte-1u87si0")},m(d,k){C(d,l,k),r(l,i),C(d,o,k),C(d,f,k),_t(s,f,null),n=!0},p(d,k){const g={};k[0]&536870912&&(g.extents=d[29]),k[0]&64&&(g.type_id=d[6]),k[0]&2&&(g.buyOverheadRate=d[1]),!a&&k[0]&96&&(a=!0,g.price=d[5][d[6]],ve(()=>a=!1)),s.$set(g)},i(d){n||($(s.$$.fragment,d),n=!0)},o(d){ie(s.$$.fragment,d),n=!1},d(d){d&&u(l),d&&u(o),d&&u(f),ct(s)}}}function vi(e){var f,s;let l,t=((s=e[28].types[(f=e[58])==null?void 0:f.type_id])==null?void 0:s.name)+"",i,o;return{c(){l=h("option"),i=q(t),this.h()},l(a){l=y(a,"OPTION",{});var n=R(l);i=M(n,t),n.forEach(u),this.h()},h(){l.__value=o=e[58],l.value=l.__value},m(a,n){C(a,l,n),r(l,i)},p(a,n){var c,b;n[0]&268435464&&t!==(t=((b=a[28].types[(c=a[58])==null?void 0:c.type_id])==null?void 0:b.name)+"")&&ue(i,t),n[0]&8&&o!==(o=a[58])&&(l.__value=o,l.value=l.__value)},d(a){a&&u(l)}}}function xi(e){let l,t=1+"",i,o,f,s,a,n;function c(d){e[56](d)}let b={compact:!0,extents:e[29],quantity:1,type_id:e[4].type_id,buyOverheadRate:e[1]};return e[5][e[4].type_id]!==void 0&&(b.price=e[5][e[4].type_id]),s=new il({props:b}),he.push(()=>ye(s,"price",c)),{c(){l=h("div"),i=q(t),o=S(),f=h("div"),at(s.$$.fragment),this.h()},l(d){l=y(d,"DIV",{class:!0});var k=R(l);i=M(k,t),k.forEach(u),o=j(d),f=y(d,"DIV",{class:!0});var g=R(f);ft(s.$$.fragment,g),g.forEach(u),this.h()},h(){B(l,"class","qty"),B(f,"class","graph svelte-1u87si0")},m(d,k){C(d,l,k),r(l,i),C(d,o,k),C(d,f,k),_t(s,f,null),n=!0},p(d,k){const g={};k[0]&536870912&&(g.extents=d[29]),k[0]&16&&(g.type_id=d[4].type_id),k[0]&2&&(g.buyOverheadRate=d[1]),!a&&k[0]&48&&(a=!0,g.price=d[5][d[4].type_id],ve(()=>a=!1)),s.$set(g)},i(d){n||($(s.$$.fragment,d),n=!0)},o(d){ie(s.$$.fragment,d),n=!1},d(d){d&&u(l),d&&u(o),d&&u(f),ct(s)}}}function er(e){let l,t,i,o,f,s,a;return{c(){l=h("div"),t=S(),i=h("div"),o=q("Blueprint cost per run "),f=h("input"),this.h()},l(n){l=y(n,"DIV",{}),R(l).forEach(u),t=j(n),i=y(n,"DIV",{class:!0});var c=R(i);o=M(c,"Blueprint cost per run "),f=y(c,"INPUT",{type:!0}),c.forEach(u),this.h()},h(){B(f,"type","number"),B(i,"class","graph svelte-1u87si0")},m(n,c){C(n,l,c),C(n,t,c),C(n,i,c),r(i,o),r(i,f),nt(f,e[7]),s||(a=Fe(f,"input",e[55]),s=!0)},p(n,c){c[0]&128&&Lt(f.value)!==n[7]&&nt(f,n[7])},i:Tt,o:Tt,d(n){n&&u(l),n&&u(t),n&&u(i),s=!1,a()}}}function tr(e){var Kt,$e,Ft;let l,t=((Kt=e[13])==null?void 0:Kt.name)+"",i,o,f,s,a,n,c,b=(($e=e[14])==null?void 0:$e.name)+"",d,k,g,U,L,z,K,O=((Ft=e[15])==null?void 0:Ft.name)+"",F,v,Q,Y,fe,X,se,G,ce,E,T,J,A,x,ee,Z,Te,oe,de,pe,Re,re,me,we,be,H,Ge,ze,Le,Ie,et,tt,Se,pt=dl(e[20])+"",gt,Ze,It,kt,He=dl(e[22])+"",D,Ne,je,lt,Ce=dl(e[23])+"",N,_e,dt,De,We=dl(100-e[21]*100)+"",Xe,qt,Ve,Je,Ae,ke,ae,Ee,mt,I,Pe,Mt,te,Jt,qe=vt(e[26])+"",ut,St,Yt,bt=Il(e[30])+"",it,ge,At,st,m=vt(e[12])+"",w,Be,le,ot,Rt=e[19]*100+"",Me,wt,Ut,zt,Qt=Math.ceil(Math.log(1-.9)/Math.log(1-e[19]))+"",Pt,ht,Ht,$t,rl,ml,el,Nt,nl=vt(e[0])+"",Oe,rt,bl,Bl;function Ll(_){e[46](_)}function Nl(_){e[47](_)}function hl(_){e[48](_)}function Ct(_){e[49](_)}let Ue={activity:Jl};e[8]!==void 0&&(Ue.activitySystemCostIndex=e[8]),e[9]!==void 0&&(Ue.activityTax=e[9]),e[10]!==void 0&&(Ue.structureRoleBonuses=e[10]),e[11]!==void 0&&(Ue.structureRigBonuses=e[11]),X=new Ql({props:Ue}),he.push(()=>ye(X,"activitySystemCostIndex",Ll)),he.push(()=>ye(X,"activityTax",Nl)),he.push(()=>ye(X,"structureRoleBonuses",hl)),he.push(()=>ye(X,"structureRigBonuses",Ct)),pe=new il({props:{compact:!0,extents:e[29],quantity:1,totalCost:e[26]}});let ul=Object.keys(e[25].materials).map(e[50]),Ye=[];for(let _=0;_<ul.length;_+=1)Ye[_]=hi(bi(e,ul,_));const Vl=_=>ie(Ye[_],1,1,()=>{Ye[_]=null});let al=Object.values(e[31]),Dt=[];for(let _=0;_<al.length;_+=1)Dt[_]=yi(mi(e,al,_));const sl=[$i,Xi],Ot=[];function Qe(_,V){return _[6]?0:1}Je=Qe(e),Ae=Ot[Je]=sl[Je](e);let fl=e[3],Et=[];for(let _=0;_<fl.length;_+=1)Et[_]=vi(di(e,fl,_));const p=[er,xi],P=[];function yt(_,V){return _[27]?0:1}return I=yt(e),Pe=P[I]=p[I](e),{c(){l=h("label"),i=q(t),o=S(),f=h("input"),s=S(),a=h("br"),n=S(),c=h("label"),d=q(b),k=S(),g=h("input"),U=S(),L=h("br"),z=S(),K=h("label"),F=q(O),v=S(),Q=h("input"),Y=S(),fe=h("p"),at(X.$$.fragment),T=h("br"),J=S(),A=h("div"),x=h("div"),ee=q("Job cost"),Z=S(),Te=h("div"),oe=S(),de=h("div"),at(pe.$$.fragment),Re=S();for(let _=0;_<Ye.length;_+=1)Ye[_].c();re=S(),me=h("div"),we=h("span"),be=h("select"),H=h("option"),Ge=q("No decryptor");for(let _=0;_<Dt.length;_+=1)Dt[_].c();ze=S(),Le=h("div"),Ie=h("dl"),et=h("dt"),tt=q("Runs"),Se=h("dd"),gt=q(pt),Ze=h("dt"),It=q("ME"),kt=h("dd"),D=q(He),Ne=h("dt"),je=q("TE"),lt=h("dd"),N=q(Ce),_e=h("dt"),dt=q("Probability"),De=h("dd"),Xe=q(We),qt=q("%"),Ve=S(),Ae.c(),ke=S(),ae=h("div"),Ee=h("select");for(let _=0;_<Et.length;_+=1)Et[_].c();mt=S(),Pe.c(),Mt=S(),te=h("p"),Jt=q("Invention job cost: "),ut=q(qe),St=h("br"),Yt=q(`\r
    Invention job duration: `),it=q(bt),ge=h("br"),At=q(`\r
    Invention cost per attempt: `),st=h("b"),w=q(m),Be=S(),le=h("p"),ot=q("Chance of success: "),Me=q(Rt),wt=q("% "),Ut=h("br"),zt=q(`\r
    Expected invention attempts to get >=90% chance to get >=1 successes: `),Pt=q(Qt),ht=S(),Ht=h("br"),$t=q(`\r
    Expected Runs: `),rl=q(e[24]),ml=h("br"),el=q(`\r
    Expected cost per run: `),Nt=h("b"),Oe=q(nl),this.h()},l(_){l=y(_,"LABEL",{});var V=R(l);i=M(V,t),o=j(V),f=y(V,"INPUT",{type:!0,min:!0,max:!0}),V.forEach(u),s=j(_),a=y(_,"BR",{}),n=j(_),c=y(_,"LABEL",{});var ne=R(c);d=M(ne,b),k=j(ne),g=y(ne,"INPUT",{type:!0,min:!0,max:!0}),ne.forEach(u),U=j(_),L=y(_,"BR",{}),z=j(_),K=y(_,"LABEL",{});var Bt=R(K);F=M(Bt,O),v=j(Bt),Q=y(Bt,"INPUT",{type:!0,min:!0,max:!0}),Bt.forEach(u),Y=j(_),fe=y(_,"P",{});var Gt=R(fe);ft(X.$$.fragment,Gt),T=y(Gt,"BR",{}),Gt.forEach(u),J=j(_),A=y(_,"DIV",{class:!0});var Ke=R(A);x=y(Ke,"DIV",{class:!0});var tl=R(x);ee=M(tl,"Job cost"),tl.forEach(u),Z=j(Ke),Te=y(Ke,"DIV",{class:!0}),R(Te).forEach(u),oe=j(Ke),de=y(Ke,"DIV",{class:!0});var _l=R(de);ft(pe.$$.fragment,_l),_l.forEach(u),Re=j(Ke);for(let xt=0;xt<Ye.length;xt+=1)Ye[xt].l(Ke);re=j(Ke),me=y(Ke,"DIV",{});var cl=R(me);we=y(cl,"SPAN",{class:!0});var W=R(we);be=y(W,"SELECT",{class:!0});var jt=R(be);H=y(jt,"OPTION",{});var kl=R(H);Ge=M(kl,"No decryptor"),kl.forEach(u);for(let xt=0;xt<Dt.length;xt+=1)Dt[xt].l(jt);jt.forEach(u),ze=j(W),Le=y(W,"DIV",{class:!0});var El=R(Le);Ie=y(El,"DL",{class:!0});var Zt=R(Ie);et=y(Zt,"DT",{});var ll=R(et);tt=M(ll,"Runs"),ll.forEach(u),Se=y(Zt,"DD",{});var Tl=R(Se);gt=M(Tl,pt),Tl.forEach(u),Ze=y(Zt,"DT",{});var Rl=R(Ze);It=M(Rl,"ME"),Rl.forEach(u),kt=y(Zt,"DD",{});var yl=R(kt);D=M(yl,He),yl.forEach(u),Ne=y(Zt,"DT",{});var Kl=R(Ne);je=M(Kl,"TE"),Kl.forEach(u),lt=y(Zt,"DD",{});var Zl=R(lt);N=M(Zl,Ce),Zl.forEach(u),_e=y(Zt,"DT",{});var Wl=R(_e);dt=M(Wl,"Probability"),Wl.forEach(u),De=y(Zt,"DD",{});var Al=R(De);Xe=M(Al,We),qt=M(Al,"%"),Al.forEach(u),Zt.forEach(u),El.forEach(u),W.forEach(u),cl.forEach(u),Ve=j(Ke),Ae.l(Ke),ke=j(Ke),ae=y(Ke,"DIV",{});var Xl=R(ae);Ee=y(Xl,"SELECT",{class:!0});var $l=R(Ee);for(let xt=0;xt<Et.length;xt+=1)Et[xt].l($l);$l.forEach(u),Xl.forEach(u),mt=j(Ke),Pe.l(Ke),Ke.forEach(u),Mt=j(_),te=y(_,"P",{});var ol=R(te);Jt=M(ol,"Invention job cost: "),ut=M(ol,qe),St=y(ol,"BR",{}),Yt=M(ol,`\r
    Invention job duration: `),it=M(ol,bt),ge=y(ol,"BR",{}),At=M(ol,`\r
    Invention cost per attempt: `),st=y(ol,"B",{});var xl=R(st);w=M(xl,m),xl.forEach(u),ol.forEach(u),Be=j(_),le=y(_,"P",{});var Vt=R(le);ot=M(Vt,"Chance of success: "),Me=M(Vt,Rt),wt=M(Vt,"% "),Ut=y(Vt,"BR",{}),zt=M(Vt,`\r
    Expected invention attempts to get >=90% chance to get >=1 successes: `),Pt=M(Vt,Qt),ht=j(Vt),Ht=y(Vt,"BR",{}),$t=M(Vt,`\r
    Expected Runs: `),rl=M(Vt,e[24]),ml=y(Vt,"BR",{}),el=M(Vt,`\r
    Expected cost per run: `),Nt=y(Vt,"B",{});var ei=R(Nt);Oe=M(ei,nl),ei.forEach(u),Vt.forEach(u),this.h()},h(){B(f,"type","range"),B(f,"min",0),B(f,"max",5),B(g,"type","range"),B(g,"min",0),B(g,"max",5),B(Q,"type","range"),B(Q,"min",0),B(Q,"max",5),B(x,"class","itemName"),B(Te,"class","qty"),B(de,"class","graph svelte-1u87si0"),H.__value=null,H.value=H.__value,B(be,"class","svelte-1u87si0"),e[6]===void 0&&ti(()=>e[52].call(be)),B(Ie,"class","svelte-1u87si0"),B(Le,"class","overlay svelte-1u87si0"),B(we,"class","overlay-parent"),B(Ee,"class","svelte-1u87si0"),e[4]===void 0&&ti(()=>e[54].call(Ee)),B(A,"class","breakdown")},m(_,V){C(_,l,V),r(l,i),r(l,o),r(l,f),nt(f,e[16]),C(_,s,V),C(_,a,V),C(_,n,V),C(_,c,V),r(c,d),r(c,k),r(c,g),nt(g,e[17]),C(_,U,V),C(_,L,V),C(_,z,V),C(_,K,V),r(K,F),r(K,v),r(K,Q),nt(Q,e[18]),C(_,Y,V),C(_,fe,V),_t(X,fe,null),r(fe,T),C(_,J,V),C(_,A,V),r(A,x),r(x,ee),r(A,Z),r(A,Te),r(A,oe),r(A,de),_t(pe,de,null),r(A,Re);for(let ne=0;ne<Ye.length;ne+=1)Ye[ne].m(A,null);r(A,re),r(A,me),r(me,we),r(we,be),r(be,H),r(H,Ge);for(let ne=0;ne<Dt.length;ne+=1)Dt[ne].m(be,null);vl(be,e[6]),r(we,ze),r(we,Le),r(Le,Ie),r(Ie,et),r(et,tt),r(Ie,Se),r(Se,gt),r(Ie,Ze),r(Ze,It),r(Ie,kt),r(kt,D),r(Ie,Ne),r(Ne,je),r(Ie,lt),r(lt,N),r(Ie,_e),r(_e,dt),r(Ie,De),r(De,Xe),r(De,qt),r(A,Ve),Ot[Je].m(A,null),r(A,ke),r(A,ae),r(ae,Ee);for(let ne=0;ne<Et.length;ne+=1)Et[ne].m(Ee,null);vl(Ee,e[4]),r(A,mt),P[I].m(A,null),C(_,Mt,V),C(_,te,V),r(te,Jt),r(te,ut),r(te,St),r(te,Yt),r(te,it),r(te,ge),r(te,At),r(te,st),r(st,w),C(_,Be,V),C(_,le,V),r(le,ot),r(le,Me),r(le,wt),r(le,Ut),r(le,zt),r(le,Pt),r(le,ht),r(le,Ht),r(le,$t),r(le,rl),r(le,ml),r(le,el),r(le,Nt),r(Nt,Oe),rt=!0,bl||(Bl=[Fe(f,"change",e[43]),Fe(f,"input",e[43]),Fe(g,"change",e[44]),Fe(g,"input",e[44]),Fe(Q,"change",e[45]),Fe(Q,"input",e[45]),Fe(be,"change",e[52]),Fe(Ee,"change",e[54])],bl=!0)},p(_,V){var tl,_l,cl;(!rt||V[0]&8192)&&t!==(t=((tl=_[13])==null?void 0:tl.name)+"")&&ue(i,t),V[0]&65536&&nt(f,_[16]),(!rt||V[0]&16384)&&b!==(b=((_l=_[14])==null?void 0:_l.name)+"")&&ue(d,b),V[0]&131072&&nt(g,_[17]),(!rt||V[0]&32768)&&O!==(O=((cl=_[15])==null?void 0:cl.name)+"")&&ue(F,O),V[0]&262144&&nt(Q,_[18]);const ne={};!se&&V[0]&256&&(se=!0,ne.activitySystemCostIndex=_[8],ve(()=>se=!1)),!G&&V[0]&512&&(G=!0,ne.activityTax=_[9],ve(()=>G=!1)),!ce&&V[0]&1024&&(ce=!0,ne.structureRoleBonuses=_[10],ve(()=>ce=!1)),!E&&V[0]&2048&&(E=!0,ne.structureRigBonuses=_[11],ve(()=>E=!1)),X.$set(ne);const Bt={};if(V[0]&536870912&&(Bt.extents=_[29]),V[0]&67108864&&(Bt.totalCost=_[26]),pe.$set(Bt),V[0]&838860834){ul=Object.keys(_[25].materials).map(_[50]);let W;for(W=0;W<ul.length;W+=1){const jt=bi(_,ul,W);Ye[W]?(Ye[W].p(jt,V),$(Ye[W],1)):(Ye[W]=hi(jt),Ye[W].c(),$(Ye[W],1),Ye[W].m(A,re))}for(Wt(),W=ul.length;W<Ye.length;W+=1)Vl(W);Xt()}if(V[1]&1){al=Object.values(_[31]);let W;for(W=0;W<al.length;W+=1){const jt=mi(_,al,W);Dt[W]?Dt[W].p(jt,V):(Dt[W]=yi(jt),Dt[W].c(),Dt[W].m(be,null))}for(;W<Dt.length;W+=1)Dt[W].d(1);Dt.length=al.length}V[0]&64|V[1]&1&&vl(be,_[6]),(!rt||V[0]&1048576)&&pt!==(pt=dl(_[20])+"")&&ue(gt,pt),(!rt||V[0]&4194304)&&He!==(He=dl(_[22])+"")&&ue(D,He),(!rt||V[0]&8388608)&&Ce!==(Ce=dl(_[23])+"")&&ue(N,Ce),(!rt||V[0]&2097152)&&We!==(We=dl(100-_[21]*100)+"")&&ue(Xe,We);let Gt=Je;if(Je=Qe(_),Je===Gt?Ot[Je].p(_,V):(Wt(),ie(Ot[Gt],1,1,()=>{Ot[Gt]=null}),Xt(),Ae=Ot[Je],Ae?Ae.p(_,V):(Ae=Ot[Je]=sl[Je](_),Ae.c()),$(Ae,1),Ae.m(A,ke)),V[0]&268435464){fl=_[3];let W;for(W=0;W<fl.length;W+=1){const jt=di(_,fl,W);Et[W]?Et[W].p(jt,V):(Et[W]=vi(jt),Et[W].c(),Et[W].m(Ee,null))}for(;W<Et.length;W+=1)Et[W].d(1);Et.length=fl.length}V[0]&24&&vl(Ee,_[4]);let Ke=I;I=yt(_),I===Ke?P[I].p(_,V):(Wt(),ie(P[Ke],1,1,()=>{P[Ke]=null}),Xt(),Pe=P[I],Pe?Pe.p(_,V):(Pe=P[I]=p[I](_),Pe.c()),$(Pe,1),Pe.m(A,null)),(!rt||V[0]&67108864)&&qe!==(qe=vt(_[26])+"")&&ue(ut,qe),(!rt||V[0]&1073741824)&&bt!==(bt=Il(_[30])+"")&&ue(it,bt),(!rt||V[0]&4096)&&m!==(m=vt(_[12])+"")&&ue(w,m),(!rt||V[0]&524288)&&Rt!==(Rt=_[19]*100+"")&&ue(Me,Rt),(!rt||V[0]&524288)&&Qt!==(Qt=Math.ceil(Math.log(1-.9)/Math.log(1-_[19]))+"")&&ue(Pt,Qt),(!rt||V[0]&16777216)&&ue(rl,_[24]),(!rt||V[0]&1)&&nl!==(nl=vt(_[0])+"")&&ue(Oe,nl)},i(_){if(!rt){$(X.$$.fragment,_),$(pe.$$.fragment,_);for(let V=0;V<ul.length;V+=1)$(Ye[V]);$(Ae),$(Pe),rt=!0}},o(_){ie(X.$$.fragment,_),ie(pe.$$.fragment,_),Ye=Ye.filter(Boolean);for(let V=0;V<Ye.length;V+=1)ie(Ye[V]);ie(Ae),ie(Pe),rt=!1},d(_){_&&u(l),_&&u(s),_&&u(a),_&&u(n),_&&u(c),_&&u(U),_&&u(L),_&&u(z),_&&u(K),_&&u(Y),_&&u(fe),ct(X),_&&u(J),_&&u(A),ct(pe),gl(Ye,_),gl(Dt,_),Ot[Je].d(),gl(Et,_),P[I].d(),_&&u(Mt),_&&u(te),_&&u(Be),_&&u(le),bl=!1,wl(Bl)}}}const lr=1124,ir=1112,rr=1113,nr=1114;let gi=2,Ii=4;function dl(e){return`${e>=0?"+":""}${Math.round(e)}`}function ur(e,l,t){let i,o,f,s,a,n,c,b=Tt,d=()=>(b(),b=Ml(K,N=>t(39,c=N)),K),k,g,U,L;xe(e,Fl,N=>t(28,n=N)),xe(e,Ul,N=>t(41,g=N)),xe(e,Gl,N=>t(42,U=N)),xe(e,Fi,N=>t(31,L=N)),e.$$.on_destroy.push(()=>b());let z=ql("currentCharacter");xe(e,z,N=>t(40,k=N));let K,{blueprintToInvent:O=null}=l,F=[],v=F[0];function Q(N){var _e;return n.categories[9].groups[(_e=n.types[N])==null?void 0:_e.group_id]!=null}let Y={},{brokerFeeRate:fe=.0151114234532}=l,X,se=0,G,ce,E,T,J,A=0,x,ee,Z,Te=3,oe=3,de=3,pe=.3,Re,re,me,we,{productME:be=gi}=l,{productTE:H=Ii}=l,{productRuns:Ge=1}=l,{expectedCostPerRun:ze=0}=l,{extents:Le=null}=l,Ie=[0,1e6];function et(){Te=Lt(this.value),t(16,Te),t(2,K),t(40,k),t(39,c),t(25,i),t(28,n),t(15,Z),t(13,x),t(14,ee),t(4,v),t(3,F),t(42,U),t(36,O)}function tt(){oe=Lt(this.value),t(17,oe),t(2,K),t(40,k),t(39,c),t(25,i),t(28,n),t(15,Z),t(13,x),t(14,ee),t(4,v),t(3,F),t(42,U),t(36,O)}function Se(){de=Lt(this.value),t(18,de),t(2,K),t(40,k),t(39,c),t(25,i),t(28,n),t(15,Z),t(13,x),t(14,ee),t(4,v),t(3,F),t(42,U),t(36,O)}function pt(N){ce=N,t(8,ce)}function gt(N){E=N,t(9,E)}function Ze(N){T=N,t(10,T)}function It(N){J=N,t(11,J)}const kt=N=>parseInt(N);function He(N,_e){e.$$.not_equal(Y[_e],N)&&(Y[_e]=N,t(5,Y))}function D(){X=li(this),t(6,X)}function Ne(N){e.$$.not_equal(Y[X],N)&&(Y[X]=N,t(5,Y))}function je(){v=li(this),t(4,v),t(3,F),t(42,U),t(36,O),t(3,F),t(42,U),t(36,O)}function lt(){se=Lt(this.value),t(7,se),t(27,o),t(5,Y),t(4,v),t(3,F),t(42,U),t(36,O)}function Ce(N){e.$$.not_equal(Y[v.type_id],N)&&(Y[v.type_id]=N,t(5,Y))}return e.$$set=N=>{"blueprintToInvent"in N&&t(36,O=N.blueprintToInvent),"brokerFeeRate"in N&&t(1,fe=N.brokerFeeRate),"productME"in N&&t(34,be=N.productME),"productTE"in N&&t(35,H=N.productTE),"productRuns"in N&&t(33,Ge=N.productRuns),"expectedCostPerRun"in N&&t(0,ze=N.expectedCostPerRun),"extents"in N&&t(37,Le=N.extents)},e.$$.update=()=>{var N,_e,dt,De,We,Xe,qt,Ve,Je,Ae;if(e.$$.dirty[1]&2080&&t(3,F=Object.values(U.types).filter(ke=>{var ae;return(ae=ke.activities[Jl])==null?void 0:ae.products[O==null?void 0:O.type_id]})),e.$$.dirty[0]&24&&F.length>=1&&F.indexOf(v)===-1&&t(4,v=F[0]),e.$$.dirty[0]&16&&t(25,i=v==null?void 0:v.activities[Jl]),e.$$.dirty[0]&16&&t(27,o=Q(v==null?void 0:v.type_id)),e.$$.dirty[0]&134217776&&(o||t(7,se=Y[v.type_id])),e.$$.dirty[1]&1184){t(38,G=0);let ke=O.activities[Ol];for(let ae in ke.materials)t(38,G+=ke.materials[ae].quantity*((_e=(N=g[ae])==null?void 0:N.adjusted_price)!=null?_e:0))}if(e.$$.dirty[0]&3840|e.$$.dirty[1]&128&&t(26,f=G*ce*.02*(1+((dt=T==null?void 0:T.jobCostModifier)!=null?dt:0)/100)*(1+((De=J==null?void 0:J.costReductionBonus)!=null?De:0)/100)*(1+E/100)),e.$$.dirty[0]&100667616&&(t(12,A=0),i&&(t(12,A+=se),t(12,A+=Wi(Object.values(i.materials),ke=>Y[ke.materialTypeID]*ke.quantity)),t(12,A+=(We=Y[X])!=null?We:0),t(12,A+=f))),e.$$.dirty[0]&33557504|e.$$.dirty[1]&256&&t(30,s=i.time*(1-.03*(((Xe=c==null?void 0:c.skills.find(ke=>ke.skill_id===si))==null?void 0:Xe.active_skill_level)||0))*(1+((qt=T==null?void 0:T.jobDurationModifier)!=null?qt:0)/100)*(1+((Ve=J==null?void 0:J.timeReductionBonus)!=null?Ve:0)/100)),e.$$.dirty[0]&302047236|e.$$.dirty[1]&768){let ae=function(mt){var I;return((I=c==null?void 0:c.skills.find(Pe=>Pe.skill_id===mt))==null?void 0:I.active_skill_level)||0},ke=!1;K!==jl[k]&&(d(t(2,K=jl[k])),ke=!0);let Ee=!1;for(let mt of Object.values(i==null?void 0:i.requiredSkills)){let I=n.types[mt.type_id];if(I.name.indexOf("Encryption")>=0){(ke||(Z==null?void 0:Z.type_id)!==I.type_id)&&(t(15,Z=I),t(18,de=ae(Z.type_id)));continue}Ee?(ke||(ee==null?void 0:ee.type_id)!==I.type_id)&&(t(14,ee=I),t(17,oe=ae(ee.type_id))):((ke||(x==null?void 0:x.type_id)!==I.type_id)&&(t(13,x=I),t(16,Te=ae(x.type_id))),Ee=!0)}}e.$$.dirty[0]&64&&(X?Gi(X).then(ke=>{t(20,Re=ke.dogma_attributes.find(ae=>ae.attribute_id==lr).value),t(21,re=ke.dogma_attributes.find(ae=>ae.attribute_id==ir).value),t(22,me=ke.dogma_attributes.find(ae=>ae.attribute_id==rr).value),t(23,we=ke.dogma_attributes.find(ae=>ae.attribute_id==nr).value)}):(t(20,Re=0),t(21,re=1),t(22,me=0),t(23,we=0))),e.$$.dirty[0]&36110336|e.$$.dirty[1]&32&&t(19,pe=((Je=i==null?void 0:i.products[O.type_id])==null?void 0:Je.probability)*(1+(Te+oe)/30+de/40)*re),e.$$.dirty[0]&12582912&&(t(34,be=gi+me),t(35,H=Ii+we)),e.$$.dirty[0]&34603008|e.$$.dirty[1]&36&&(t(33,Ge=((Ae=i==null?void 0:i.products[O.type_id])==null?void 0:Ae.quantity)+Re),isNaN(Ge)&&t(33,Ge=1)),e.$$.dirty[0]&524288|e.$$.dirty[1]&4&&t(24,a=Ge*pe),e.$$.dirty[0]&16781313&&(t(0,ze=A/a),isNaN(ze)&&t(0,ze=0)),e.$$.dirty[0]&4096|e.$$.dirty[1]&64&&t(29,Ie=Le||[0,A*1.5])},[ze,fe,K,F,v,Y,X,se,ce,E,T,J,A,x,ee,Z,Te,oe,de,pe,Re,re,me,we,a,i,f,o,n,Ie,s,L,z,Ge,be,H,O,Le,G,c,k,g,U,et,tt,Se,pt,gt,Ze,It,kt,He,D,Ne,je,lt,Ce]}class sr extends Cl{constructor(l){super();Dl(this,l,ur,tr,Pl,{blueprintToInvent:36,brokerFeeRate:1,productME:34,productTE:35,productRuns:33,expectedCostPerRun:0,extents:37},null,[-1,-1,-1])}}function ki(e,l,t){const i=e.slice();return i[51]=l[t],i[52]=l,i[53]=t,i}function or(e){var f;let l,t=((f=e[22].types[e[2]])==null?void 0:f.name)+"",i,o;return{c(){l=h("div"),i=q(t),this.h()},l(s){l=y(s,"DIV",{class:!0,title:!0});var a=R(l);i=M(a,t),a.forEach(u),this.h()},h(){var s;B(l,"class","itemName"),B(l,"title",o=`${(s=e[22].types[e[2]])==null?void 0:s.name} [${e[2]}]`)},m(s,a){C(s,l,a),r(l,i)},p(s,a){var n,c;a[0]&4194308&&t!==(t=((n=s[22].types[s[2]])==null?void 0:n.name)+"")&&ue(i,t),a[0]&4194308&&o!==(o=`${(c=s[22].types[s[2]])==null?void 0:c.name} [${s[2]}]`)&&B(l,"title",o)},d(s){s&&u(l)}}}function ar(e){let l;return{c(){l=h("div")},l(t){l=y(t,"DIV",{}),R(l).forEach(u)},m(t,i){C(t,l,i)},p:Tt,d(t){t&&u(l)}}}function Ei(e){let l,t,i,o,f;return{c(){l=h("label"),t=h("input"),i=q(" Override"),this.h()},l(s){l=y(s,"LABEL",{});var a=R(l);t=y(a,"INPUT",{type:!0}),i=M(a," Override"),a.forEach(u),this.h()},h(){B(t,"type","checkbox")},m(s,a){C(s,l,a),r(l,t),t.checked=e[8],r(l,i),o||(f=Fe(t,"change",e[39]),o=!0)},p(s,a){a[0]&256&&(t.checked=s[8])},d(s){s&&u(l),o=!1,f()}}}function Ti(e){let l,t,i,o,f,s;const a=[_r,fr],n=[];function c(b,d){return(t==null||d[0]&8650752)&&(t=!!Yl(b[51],b[23]).activity),t?0:1}return i=c(e,[-1,-1]),o=n[i]=a[i](e),{c(){l=h("div"),o.c(),f=S(),this.h()},l(b){l=y(b,"DIV",{class:!0});var d=R(l);o.l(d),f=j(d),d.forEach(u),this.h()},h(){B(l,"class","subItem")},m(b,d){C(b,l,d),n[i].m(l,null),r(l,f),s=!0},p(b,d){let k=i;i=c(b,d),i===k?n[i].p(b,d):(Wt(),ie(n[k],1,1,()=>{n[k]=null}),Xt(),o=n[i],o?o.p(b,d):(o=n[i]=a[i](b),o.c()),$(o,1),o.m(l,f))},i(b){s||($(o),s=!0)},o(b){ie(o),s=!1},d(b){b&&u(l),n[i].d()}}}function fr(e){var o;let l,t=((o=e[22].types[e[51]])==null?void 0:o.name)+"",i;return{c(){l=q("Could not find industry details for "),i=q(t)},l(f){l=M(f,"Could not find industry details for "),i=M(f,t)},m(f,s){C(f,l,s),C(f,i,s)},p(f,s){var a;s[0]&4456448&&t!==(t=((a=f[22].types[f[51]])==null?void 0:a.name)+"")&&ue(i,t)},i:Tt,o:Tt,d(f){f&&u(l),f&&u(i)}}}function _r(e){let l,t,i,o;function f(n){e[48](n,e[51])}function s(n){e[49](n)}let a={productTypeId:e[51],requiredQuantity:e[18].materialQuantity(e[51]),defaultLocationId:e[20],compact:!0};return e[19][e[51]]!==void 0&&(a.unitCost=e[19][e[51]]),e[1]!==void 0&&(a.producedItems=e[1]),l=new Hl({props:a}),he.push(()=>ye(l,"unitCost",f)),he.push(()=>ye(l,"producedItems",s)),{c(){at(l.$$.fragment)},l(n){ft(l.$$.fragment,n)},m(n,c){_t(l,n,c),o=!0},p(n,c){e=n;const b={};c[0]&262144&&(b.productTypeId=e[51]),c[0]&262144&&(b.requiredQuantity=e[18].materialQuantity(e[51])),c[0]&1048576&&(b.defaultLocationId=e[20]),!t&&c[0]&786432&&(t=!0,b.unitCost=e[19][e[51]],ve(()=>t=!1)),!i&&c[0]&2&&(i=!0,b.producedItems=e[1],ve(()=>i=!1)),l.$set(b)},i(n){o||($(l.$$.fragment,n),o=!0)},o(n){ie(l.$$.fragment,n),o=!1},d(n){ct(l,n)}}}function Ri(e){var ce;let l,t,i,o,f,s,a=((ce=e[22].types[e[51]])==null?void 0:ce.name)+"",n,c,b,d,k=e[18].materialQuantity(e[51])+"",g,U,L,z,K,O,F,v,Q,Y;function fe(){e[46].call(i,e[51])}function X(E){e[47](E,e[51])}let se={extents:e[16],quantity:e[18].materialQuantity(e[51]),type_id:e[51],overridePrice:e[1][e[51]]?e[19][e[51]]:void 0,buyOverheadRate:e[5],totalCost:e[1][e[51]]?e[19][e[51]]*e[18].materialQuantity(e[51]):null,compact:!0};e[9][e[51]]!==void 0&&(se.price=e[9][e[51]]),z=new il({props:se}),he.push(()=>ye(z,"price",X));let G=e[1][e[51]]&&Ti(e);return{c(){l=h("div"),t=h("label"),i=h("input"),f=S(),s=h("span"),n=q(a),b=S(),d=h("div"),g=q(k),U=S(),L=h("div"),at(z.$$.fragment),O=S(),G&&G.c(),F=pl(),this.h()},l(E){l=y(E,"DIV",{class:!0});var T=R(l);t=y(T,"LABEL",{});var J=R(t);i=y(J,"INPUT",{type:!0}),f=j(J),s=y(J,"SPAN",{title:!0});var A=R(s);n=M(A,a),A.forEach(u),J.forEach(u),T.forEach(u),b=j(E),d=y(E,"DIV",{class:!0});var x=R(d);g=M(x,k),x.forEach(u),U=j(E),L=y(E,"DIV",{class:!0});var ee=R(L);ft(z.$$.fragment,ee),ee.forEach(u),O=j(E),G&&G.l(E),F=pl(),this.h()},h(){var E;B(i,"type","checkbox"),i.disabled=o=!oi(e[51],e[23]),B(s,"title",c=`${(E=e[22].types[e[51]])==null?void 0:E.name} [${e[51]}]`),B(l,"class","itemName"),B(d,"class","qty"),B(L,"class","graph")},m(E,T){C(E,l,T),r(l,t),r(t,i),i.checked=e[1][e[51]],r(t,f),r(t,s),r(s,n),C(E,b,T),C(E,d,T),r(d,g),C(E,U,T),C(E,L,T),_t(z,L,null),C(E,O,T),G&&G.m(E,T),C(E,F,T),v=!0,Q||(Y=Fe(i,"change",fe),Q=!0)},p(E,T){var A,x;e=E,(!v||T[0]&8650752&&o!==(o=!oi(e[51],e[23])))&&(i.disabled=o),T[0]&262146&&(i.checked=e[1][e[51]]),(!v||T[0]&4456448)&&a!==(a=((A=e[22].types[e[51]])==null?void 0:A.name)+"")&&ue(n,a),(!v||T[0]&4456448&&c!==(c=`${(x=e[22].types[e[51]])==null?void 0:x.name} [${e[51]}]`))&&B(s,"title",c),(!v||T[0]&262144)&&k!==(k=e[18].materialQuantity(e[51])+"")&&ue(g,k);const J={};T[0]&65536&&(J.extents=e[16]),T[0]&262144&&(J.quantity=e[18].materialQuantity(e[51])),T[0]&262144&&(J.type_id=e[51]),T[0]&786434&&(J.overridePrice=e[1][e[51]]?e[19][e[51]]:void 0),T[0]&32&&(J.buyOverheadRate=e[5]),T[0]&786434&&(J.totalCost=e[1][e[51]]?e[19][e[51]]*e[18].materialQuantity(e[51]):null),!K&&T[0]&262656&&(K=!0,J.price=e[9][e[51]],ve(()=>K=!1)),z.$set(J),e[1][e[51]]?G?(G.p(e,T),T[0]&262146&&$(G,1)):(G=Ti(e),G.c(),$(G,1),G.m(F.parentNode,F)):G&&(Wt(),ie(G,1,1,()=>{G=null}),Xt())},i(E){v||($(z.$$.fragment,E),$(G),v=!0)},o(E){ie(z.$$.fragment,E),ie(G),v=!1},d(E){E&&u(l),E&&u(b),E&&u(d),E&&u(U),E&&u(L),ct(z),E&&u(O),G&&G.d(E),E&&u(F),Q=!1,Y()}}}function cr(e){var st;let l,t,i,o=e[18].producedQuantity+"",f,s,a,n,c=vt(e[9][e[2]])+"",b,d,k=Sl(e[18].profit)+"",g,U,L,z,K,O,F,v,Q,Y,fe,X=vt(e[0])+"",se,G,ce=vt(e[18].totalCost)+"",E,T,J,A,x,ee,Z,Te,oe,de,pe,Re,re,me,we,be,H,Ge,ze,Le,Ie,et,tt,Se,pt,gt,Ze,It,kt,He,D=Il(e[18].jobDuration)+"",Ne,je,lt,Ce,N,_e,dt,De,We,Xe,qt,Ve,Je,Ae;function ke(m,w){return m[6]?ar:or}let ae=ke(e),Ee=ae(e);function mt(m){e[34](m)}function I(m){e[35](m)}function Pe(m){e[36](m)}let Mt={extents:e[16],quantity:e[18].producedQuantity,type_id:e[2],buyOverheadRate:-e[4],sellOverheadRate:-e[5]-e[4],totalCost:e[18].totalCost};e[9][e[2]]!==void 0&&(Mt.price=e[9][e[2]]),e[14]!==void 0&&(Mt.lowestSellPrice=e[14]),e[15]!==void 0&&(Mt.highestBuyPrice=e[15]),K=new il({props:Mt}),he.push(()=>ye(K,"price",mt)),he.push(()=>ye(K,"lowestSellPrice",I)),he.push(()=>ye(K,"highestBuyPrice",Pe));let te=e[3]!==null&&Ei(e);function Jt(m){e[40](m)}function qe(m){e[41](m)}function ut(m){e[42](m)}function St(m){e[43](m)}function Yt(m){e[44](m)}let bt={activity:fi};e[20]!==void 0&&(bt.value=e[20]),e[10]!==void 0&&(bt.activitySystemCostIndex=e[10]),e[11]!==void 0&&(bt.activityTax=e[11]),e[12]!==void 0&&(bt.structureRoleBonuses=e[12]),e[13]!==void 0&&(bt.structureRigBonuses=e[13]),H=new Ql({props:bt}),he.push(()=>ye(H,"value",Jt)),he.push(()=>ye(H,"activitySystemCostIndex",qe)),he.push(()=>ye(H,"activityTax",ut)),he.push(()=>ye(H,"structureRoleBonuses",St)),he.push(()=>ye(H,"structureRigBonuses",Yt)),Xe=new il({props:{compact:!0,extents:e[16],quantity:e[18].producedQuantity,totalCost:e[18].jobCost}});let it=Object.keys(((st=e[18].activity)==null?void 0:st.materials)||{}).map(e[45]),ge=[];for(let m=0;m<it.length;m+=1)ge[m]=Ri(ki(e,it,m));const At=m=>ie(ge[m],1,1,()=>{ge[m]=null});return{c(){l=h("div"),Ee.c(),t=S(),i=h("div"),f=q(o),s=S(),a=h("div"),n=q(`Unit price\r
        `),b=q(c),d=q(`\r
        Total Profit \r
        `),g=q(k),U=S(),L=h("br"),z=S(),at(K.$$.fragment),Q=S(),Y=h("br"),fe=q(`\r
\r
        Unit cost `),se=q(X),G=q(" Total cost "),E=q(ce),J=S(),A=h("div"),x=q("Runs "),ee=h("input"),Te=S(),oe=h("input"),pe=S(),te&&te.c(),Re=S(),re=h("p"),me=h("b"),we=q("Facility"),be=S(),at(H.$$.fragment),tt=S(),Se=h("b"),pt=q("Production"),gt=S(),Ze=h("dl"),It=h("dt"),kt=q("Time"),He=h("dd"),Ne=q(D),lt=S(),Ce=h("div"),N=h("div"),_e=q("Job cost"),dt=h("div"),De=S(),We=h("div"),at(Xe.$$.fragment),qt=S();for(let m=0;m<ge.length;m+=1)ge[m].c();this.h()},l(m){l=y(m,"DIV",{class:!0});var w=R(l);Ee.l(w),t=j(w),i=y(w,"DIV",{class:!0});var Be=R(i);f=M(Be,o),Be.forEach(u),s=j(w),a=y(w,"DIV",{class:!0});var le=R(a);n=M(le,`Unit price\r
        `),b=M(le,c),d=M(le,`\r
        Total Profit \r
        `),g=M(le,k),U=j(le),L=y(le,"BR",{}),z=j(le),ft(K.$$.fragment,le),Q=j(le),Y=y(le,"BR",{}),fe=M(le,`\r
\r
        Unit cost `),se=M(le,X),G=M(le," Total cost "),E=M(le,ce),le.forEach(u),w.forEach(u),J=j(m),A=y(m,"DIV",{class:!0});var ot=R(A);x=M(ot,"Runs "),ee=y(ot,"INPUT",{type:!0,min:!0}),Te=j(ot),oe=y(ot,"INPUT",{type:!0}),pe=j(ot),te&&te.l(ot),ot.forEach(u),Re=j(m),re=y(m,"P",{});var Rt=R(re);me=y(Rt,"B",{});var Me=R(me);we=M(Me,"Facility"),Me.forEach(u),be=j(Rt),ft(H.$$.fragment,Rt),Rt.forEach(u),tt=j(m),Se=y(m,"B",{});var wt=R(Se);pt=M(wt,"Production"),wt.forEach(u),gt=j(m),Ze=y(m,"DL",{});var Ut=R(Ze);It=y(Ut,"DT",{});var zt=R(It);kt=M(zt,"Time"),zt.forEach(u),He=y(Ut,"DD",{title:!0});var Qt=R(He);Ne=M(Qt,D),Qt.forEach(u),Ut.forEach(u),lt=j(m),Ce=y(m,"DIV",{class:!0});var Pt=R(Ce);N=y(Pt,"DIV",{});var ht=R(N);_e=M(ht,"Job cost"),ht.forEach(u),dt=y(Pt,"DIV",{}),R(dt).forEach(u),De=j(Pt),We=y(Pt,"DIV",{class:!0});var Ht=R(We);ft(Xe.$$.fragment,Ht),Ht.forEach(u),qt=j(Pt);for(let $t=0;$t<ge.length;$t+=1)ge[$t].l(Pt);Pt.forEach(u),this.h()},h(){B(i,"class","qty"),B(a,"class","graph"),B(l,"class",T=`breakdown ${e[6]?"":"summary"}`),B(ee,"type","range"),B(ee,"min",1),ee.disabled=Z=e[3]!==null&&!e[8],B(oe,"type","number"),oe.disabled=de=e[3]!==null&&!e[8],B(A,"class","combinedInput"),B(He,"title",je=`${e[18].jobDuration}s`),B(We,"class","graph"),B(Ce,"class","breakdown")},m(m,w){C(m,l,w),Ee.m(l,null),r(l,t),r(l,i),r(i,f),r(l,s),r(l,a),r(a,n),r(a,b),r(a,d),r(a,g),r(a,U),r(a,L),r(a,z),_t(K,a,null),r(a,Q),r(a,Y),r(a,fe),r(a,se),r(a,G),r(a,E),C(m,J,w),C(m,A,w),r(A,x),r(A,ee),nt(ee,e[7]),r(A,Te),r(A,oe),nt(oe,e[7]),r(A,pe),te&&te.m(A,null),C(m,Re,w),C(m,re,w),r(re,me),r(me,we),r(re,be),_t(H,re,null),C(m,tt,w),C(m,Se,w),r(Se,pt),C(m,gt,w),C(m,Ze,w),r(Ze,It),r(It,kt),r(Ze,He),r(He,Ne),C(m,lt,w),C(m,Ce,w),r(Ce,N),r(N,_e),r(Ce,dt),r(Ce,De),r(Ce,We),_t(Xe,We,null),r(Ce,qt);for(let Be=0;Be<ge.length;Be+=1)ge[Be].m(Ce,null);Ve=!0,Je||(Ae=[Fe(ee,"change",e[37]),Fe(ee,"input",e[37]),Fe(oe,"input",e[38])],Je=!0)},p(m,w){var Rt;ae===(ae=ke(m))&&Ee?Ee.p(m,w):(Ee.d(1),Ee=ae(m),Ee&&(Ee.c(),Ee.m(l,t))),(!Ve||w[0]&262144)&&o!==(o=m[18].producedQuantity+"")&&ue(f,o),(!Ve||w[0]&516)&&c!==(c=vt(m[9][m[2]])+"")&&ue(b,c),(!Ve||w[0]&262144)&&k!==(k=Sl(m[18].profit)+"")&&ue(g,k);const Be={};w[0]&65536&&(Be.extents=m[16]),w[0]&262144&&(Be.quantity=m[18].producedQuantity),w[0]&4&&(Be.type_id=m[2]),w[0]&16&&(Be.buyOverheadRate=-m[4]),w[0]&48&&(Be.sellOverheadRate=-m[5]-m[4]),w[0]&262144&&(Be.totalCost=m[18].totalCost),!O&&w[0]&516&&(O=!0,Be.price=m[9][m[2]],ve(()=>O=!1)),!F&&w[0]&16384&&(F=!0,Be.lowestSellPrice=m[14],ve(()=>F=!1)),!v&&w[0]&32768&&(v=!0,Be.highestBuyPrice=m[15],ve(()=>v=!1)),K.$set(Be),(!Ve||w[0]&1)&&X!==(X=vt(m[0])+"")&&ue(se,X),(!Ve||w[0]&262144)&&ce!==(ce=vt(m[18].totalCost)+"")&&ue(E,ce),(!Ve||w[0]&64&&T!==(T=`breakdown ${m[6]?"":"summary"}`))&&B(l,"class",T),(!Ve||w[0]&264&&Z!==(Z=m[3]!==null&&!m[8]))&&(ee.disabled=Z),w[0]&128&&nt(ee,m[7]),(!Ve||w[0]&264&&de!==(de=m[3]!==null&&!m[8]))&&(oe.disabled=de),w[0]&128&&Lt(oe.value)!==m[7]&&nt(oe,m[7]),m[3]!==null?te?te.p(m,w):(te=Ei(m),te.c(),te.m(A,null)):te&&(te.d(1),te=null);const le={};!Ge&&w[0]&1048576&&(Ge=!0,le.value=m[20],ve(()=>Ge=!1)),!ze&&w[0]&1024&&(ze=!0,le.activitySystemCostIndex=m[10],ve(()=>ze=!1)),!Le&&w[0]&2048&&(Le=!0,le.activityTax=m[11],ve(()=>Le=!1)),!Ie&&w[0]&4096&&(Ie=!0,le.structureRoleBonuses=m[12],ve(()=>Ie=!1)),!et&&w[0]&8192&&(et=!0,le.structureRigBonuses=m[13],ve(()=>et=!1)),H.$set(le),(!Ve||w[0]&262144)&&D!==(D=Il(m[18].jobDuration)+"")&&ue(Ne,D),(!Ve||w[0]&262144&&je!==(je=`${m[18].jobDuration}s`))&&B(He,"title",je);const ot={};if(w[0]&65536&&(ot.extents=m[16]),w[0]&262144&&(ot.quantity=m[18].producedQuantity),w[0]&262144&&(ot.totalCost=m[18].jobCost),Xe.$set(ot),w[0]&14484002){it=Object.keys(((Rt=m[18].activity)==null?void 0:Rt.materials)||{}).map(m[45]);let Me;for(Me=0;Me<it.length;Me+=1){const wt=ki(m,it,Me);ge[Me]?(ge[Me].p(wt,w),$(ge[Me],1)):(ge[Me]=Ri(wt),ge[Me].c(),$(ge[Me],1),ge[Me].m(Ce,null))}for(Wt(),Me=it.length;Me<ge.length;Me+=1)At(Me);Xt()}},i(m){if(!Ve){$(K.$$.fragment,m),$(H.$$.fragment,m),$(Xe.$$.fragment,m);for(let w=0;w<it.length;w+=1)$(ge[w]);Ve=!0}},o(m){ie(K.$$.fragment,m),ie(H.$$.fragment,m),ie(Xe.$$.fragment,m),ge=ge.filter(Boolean);for(let w=0;w<ge.length;w+=1)ie(ge[w]);Ve=!1},d(m){m&&u(l),Ee.d(),ct(K),m&&u(J),m&&u(A),te&&te.d(),m&&u(Re),m&&u(re),ct(H),m&&u(tt),m&&u(Se),m&&u(gt),m&&u(Ze),m&&u(lt),m&&u(Ce),ct(Xe),gl(ge,m),Je=!1,wl(Ae)}}}const Ci=2660;function pr(e,l,t){let i,o,f,s=Tt,a=()=>(s(),s=Ml(i,D=>t(18,f=D)),i),n,c,b,d=Tt,k=()=>(d(),d=Ml(o,D=>t(30,b=D)),o),g,U,L,z,K;xe(e,Ul,D=>t(28,n=D)),xe(e,ri,D=>t(31,g=D)),xe(e,ai,D=>t(33,L=D)),xe(e,Fl,D=>t(22,z=D)),xe(e,Gl,D=>t(23,K=D)),e.$$.on_destroy.push(()=>s()),e.$$.on_destroy.push(()=>d());let{productTypeId:O=null}=l,{requiredQuantity:F=null}=l,v=1,Q=!1,Y={},{producedItems:fe={}}=l,X={},se=ql("currentCharacter");xe(e,se,D=>t(32,U=D));let G=ql("locations");xe(e,G,D=>t(29,c=D));let ce=Li({});ji("locations",ce);let{defaultLocationId:E=null}=l,T=E,J=.05,A=10,x,ee,{unitCost:Z=0}=l,{salesTaxRate:Te=.036}=l,{brokerFeeRate:oe=.0113709973928}=l,{compact:de=!1}=l,{extents:pe=null}=l,Re,re,me=[0,1e3];function we(D){e.$$.not_equal(Y[O],D)&&(Y[O]=D,t(9,Y),t(17,i),t(2,O),t(33,L))}function be(D){Re=D,t(14,Re)}function H(D){re=D,t(15,re)}function Ge(){v=Lt(this.value),t(7,v),t(3,F),t(8,Q),t(17,i),t(18,f),t(2,O),t(33,L)}function ze(){v=Lt(this.value),t(7,v),t(3,F),t(8,Q),t(17,i),t(18,f),t(2,O),t(33,L)}function Le(){Q=this.checked,t(8,Q)}function Ie(D){T=D,t(20,T)}function et(D){J=D,t(10,J)}function tt(D){A=D,t(11,A)}function Se(D){x=D,t(12,x)}function pt(D){ee=D,t(13,ee)}const gt=D=>parseInt(D);function Ze(D){fe[D]=this.checked,t(1,fe)}function It(D,Ne){e.$$.not_equal(Y[Ne],D)&&(Y[Ne]=D,t(9,Y),t(17,i),t(2,O),t(33,L))}function kt(D,Ne){e.$$.not_equal(X[Ne],D)&&(X[Ne]=D,t(19,X))}function He(D){fe=D,t(1,fe)}return e.$$set=D=>{"productTypeId"in D&&t(2,O=D.productTypeId),"requiredQuantity"in D&&t(3,F=D.requiredQuantity),"producedItems"in D&&t(1,fe=D.producedItems),"defaultLocationId"in D&&t(26,E=D.defaultLocationId),"unitCost"in D&&t(0,Z=D.unitCost),"salesTaxRate"in D&&t(4,Te=D.salesTaxRate),"brokerFeeRate"in D&&t(5,oe=D.brokerFeeRate),"compact"in D&&t(6,de=D.compact),"extents"in D&&t(27,pe=D.extents)},e.$$.update=()=>{var D,Ne,je;if(e.$$.dirty[0]&4|e.$$.dirty[1]&4&&a(t(17,i=Vi(O,L))),e.$$.dirty[0]&393608&&(F===null||Q?i.update({runs:v}):(i.update({requiredQuantity:F}),t(7,v=f.runs))),e.$$.dirty[1]&2&&k(t(21,o=jl[U])),e.$$.dirty[0]&1074135040|e.$$.dirty[1]&1){let Ce=Object.values((Ne=(D=f.activity)==null?void 0:D.requiredSkills)!=null?Ne:{}).map(_e=>_e.type_id).filter(_e=>g.types[_e]!=null).filter(_e=>g.types[_e][Ci]!=null).map(_e=>{var dt,De;return{value:g.types[_e][Ci].value*((De=(dt=b==null?void 0:b.skills.find(We=>We.skill_id==_e))==null?void 0:dt.active_skill_level)!=null?De:0)}}),N=Ai(1,Ce)*100-100;i.update({characterModifiers:{skill_jobDuration:N}})}if(e.$$.dirty[0]&536870912&&c){const lt=35835;let Ce=Object.values(c).filter(N=>(N==null?void 0:N.type_id)==lt).map(N=>[N==null?void 0:N.type_id,N]);ce.set(Object.fromEntries(Ce))}if(e.$$.dirty[0]&134144&&i.update({facilityModifiers:{systemCostIndex:J,taxRate:A}}),e.$$.dirty[0]&135168&&x&&i.update({facilityModifiers:{roleModifiers:{jobDuration:x.jobDurationModifier,materialConsumption:x.materialConsumptionModifier,jobCost:x.jobCostModifier}}}),e.$$.dirty[0]&139264&&ee&&i.update({facilityModifiers:{rigModifiers:{materialReduction:ee.materialReductionBonus,timeReduction:ee.timeReductionBonus,costReduction:ee.costReductionBonus}}}),e.$$.dirty[0]&131584){for(let lt in Y)t(9,Y),t(17,i),t(2,O),t(33,L);t(9,Y),t(17,i),t(2,O),t(33,L),i.update({prices:Y})}e.$$.dirty[0]&268566528&&i.update({indexPrices:n}),e.$$.dirty[0]&262144&&t(0,Z=f.unitCost),e.$$.dirty[0]&134595077&&(pe===null?(t(16,me[1]=1.1*Math.max((je=Y[O])!=null?je:0,Z!=null?Z:0,Re!=null?Re:0,re!=null?re:0)*f.producedQuantity,me),(me[1]==0||isNaN(me[1]))&&t(16,me[1]=1e3,me)):t(16,me=pe))},[Z,fe,O,F,Te,oe,de,v,Q,Y,J,A,x,ee,Re,re,me,i,f,X,T,o,z,K,se,G,E,pe,n,c,b,g,U,L,we,be,H,Ge,ze,Le,Ie,et,tt,Se,pt,gt,Ze,It,kt,He]}class Hl extends Cl{constructor(l){super();Dl(this,l,pr,cr,Pl,{productTypeId:2,requiredQuantity:3,producedItems:1,defaultLocationId:26,unitCost:0,salesTaxRate:4,brokerFeeRate:5,compact:6,extents:27},null,[-1,-1])}}function Di(e,l,t){const i=e.slice();return i[72]=l[t],i[73]=l,i[74]=t,i}function dr(e){var Et;let l,t,i=((Et=e[37].types[e[5]])==null?void 0:Et.name)+"",o,f,s,a,n,c,b,d,k=vt(e[28])+"",g,U,L=Sl(e[34])+"",z,K,O,F,v,Q,Y,fe,X,se,G,ce=vt(e[3])+"",E,T,J=vt(e[21])+"",A,x,ee,Z,Te,oe,de,pe,Re,re,me,we,be,H,Ge,ze,Le,Ie,et,tt,Se,pt,gt,Ze,It,kt,He,D,Ne,je,lt,Ce,N,_e,dt,De,We,Xe,qt,Ve,Je,Ae,ke,ae,Ee,mt,I,Pe,Mt,te,Jt,qe,ut,St,Yt,bt,it,ge,At,st,m,w,Be,le=Il(e[35])+"",ot,Rt,Me,wt,Ut,zt=vt(e[29])+"",Qt,Pt,ht,Ht,$t,rl,ml,el,Nt,nl,Oe,rt,bl;function Bl(p){e[46](p)}function Ll(p){e[47](p)}function Nl(p){e[48](p)}let hl={extents:e[32],quantity:e[26],type_id:e[5],buyOverheadRate:-e[6],sellOverheadRate:-e[7]-e[6],totalCost:e[21]};e[20][e[5]]!==void 0&&(hl.price=e[20][e[5]]),e[24]!==void 0&&(hl.lowestSellPrice=e[24]),e[25]!==void 0&&(hl.highestBuyPrice=e[25]),v=new il({props:hl}),he.push(()=>ye(v,"price",Bl)),he.push(()=>ye(v,"lowestSellPrice",Ll)),he.push(()=>ye(v,"highestBuyPrice",Nl));let Ct=e[8]!==null&&Pi(e),Ue=e[22]&&Bi(e);function ul(p){e[60](p)}function Ye(p){e[61](p)}function Vl(p){e[62](p)}function al(p){e[63](p)}function Dt(p){e[64](p)}let sl={activity:Ol};e[4]!==void 0&&(sl.value=e[4]),e[14]!==void 0&&(sl.activitySystemCostIndex=e[14]),e[15]!==void 0&&(sl.activityTax=e[15]),e[16]!==void 0&&(sl.structureRoleBonuses=e[16]),e[17]!==void 0&&(sl.structureRigBonuses=e[17]),te=new Ql({props:sl}),he.push(()=>ye(te,"value",ul)),he.push(()=>ye(te,"activitySystemCostIndex",Ye)),he.push(()=>ye(te,"activityTax",Vl)),he.push(()=>ye(te,"structureRoleBonuses",al)),he.push(()=>ye(te,"structureRigBonuses",Dt)),Nt=new il({props:{compact:!0,extents:e[32],quantity:e[26],totalCost:e[29]}});let Ot=Object.keys(e[12].materials).map(e[65]),Qe=[];for(let p=0;p<Ot.length;p+=1)Qe[p]=Mi(Di(e,Ot,p));const fl=p=>ie(Qe[p],1,1,()=>{Qe[p]=null});return{c(){l=h("div"),t=h("div"),o=q(i),s=S(),a=h("div"),n=q(e[26]),c=S(),b=h("div"),d=q(`Unit price\r
        `),g=q(k),U=q(`\r
        Total Profit \r
        `),z=q(L),K=S(),O=h("br"),F=S(),at(v.$$.fragment),X=S(),se=h("br"),G=q(`\r
\r
        Unit cost `),E=q(ce),T=q(" Total cost "),A=q(J),ee=S(),Z=h("div"),Te=q("Runs "),oe=h("input"),Re=S(),re=h("input"),we=S(),Ct&&Ct.c(),be=S(),H=h("p"),Ge=h("b"),ze=q("Blueprint"),Le=S(),Ie=h("br"),et=S(),tt=h("label"),Se=h("input"),gt=q(" Invent"),Ze=S(),It=h("br"),kt=S(),Ue&&Ue.c(),He=S(),D=h("label"),Ne=q("ME "),je=h("input"),lt=S(),Ce=q(e[0]),N=S(),_e=h("label"),dt=q("TE "),De=h("input"),We=S(),Xe=q(e[1]),qt=S(),Ve=h("br"),Je=S(),Ae=h("label"),ke=q("Cost per run "),ae=h("input"),Ee=S(),mt=h("p"),I=h("b"),Pe=q("Facility"),Mt=S(),at(te.$$.fragment),bt=S(),it=h("b"),ge=q("Manufacturing"),At=S(),st=h("dl"),m=h("dt"),w=q("Time"),Be=h("dd"),ot=q(le),Me=h("dt"),wt=q("Job Cost"),Ut=h("dd"),Qt=q(zt),Pt=S(),ht=h("div"),Ht=h("div"),$t=q("Job cost"),rl=h("div"),ml=S(),el=h("div"),at(Nt.$$.fragment),nl=S();for(let p=0;p<Qe.length;p+=1)Qe[p].c();this.h()},l(p){l=y(p,"DIV",{class:!0});var P=R(l);t=y(P,"DIV",{class:!0,title:!0});var yt=R(t);o=M(yt,i),yt.forEach(u),s=j(P),a=y(P,"DIV",{class:!0});var Kt=R(a);n=M(Kt,e[26]),Kt.forEach(u),c=j(P),b=y(P,"DIV",{class:!0});var $e=R(b);d=M($e,`Unit price\r
        `),g=M($e,k),U=M($e,`\r
        Total Profit \r
        `),z=M($e,L),K=j($e),O=y($e,"BR",{}),F=j($e),ft(v.$$.fragment,$e),X=j($e),se=y($e,"BR",{}),G=M($e,`\r
\r
        Unit cost `),E=M($e,ce),T=M($e," Total cost "),A=M($e,J),$e.forEach(u),P.forEach(u),ee=j(p),Z=y(p,"DIV",{class:!0});var Ft=R(Z);Te=M(Ft,"Runs "),oe=y(Ft,"INPUT",{type:!0,min:!0,max:!0}),Re=j(Ft),re=y(Ft,"INPUT",{type:!0,class:!0}),we=j(Ft),Ct&&Ct.l(Ft),Ft.forEach(u),be=j(p),H=y(p,"P",{});var _=R(H);Ge=y(_,"B",{});var V=R(Ge);ze=M(V,"Blueprint"),V.forEach(u),Le=j(_),Ie=y(_,"BR",{}),et=j(_),tt=y(_,"LABEL",{});var ne=R(tt);Se=y(ne,"INPUT",{type:!0}),gt=M(ne," Invent"),ne.forEach(u),Ze=j(_),It=y(_,"BR",{}),kt=j(_),Ue&&Ue.l(_),He=j(_),D=y(_,"LABEL",{});var Bt=R(D);Ne=M(Bt,"ME "),je=y(Bt,"INPUT",{type:!0,min:!0,max:!0}),lt=j(Bt),Ce=M(Bt,e[0]),Bt.forEach(u),N=j(_),_e=y(_,"LABEL",{});var Gt=R(_e);dt=M(Gt,"TE "),De=y(Gt,"INPUT",{type:!0,min:!0,max:!0,step:!0}),We=j(Gt),Xe=M(Gt,e[1]),Gt.forEach(u),qt=j(_),Ve=y(_,"BR",{}),Je=j(_),Ae=y(_,"LABEL",{});var Ke=R(Ae);ke=M(Ke,"Cost per run "),ae=y(Ke,"INPUT",{type:!0}),Ke.forEach(u),_.forEach(u),Ee=j(p),mt=y(p,"P",{});var tl=R(mt);I=y(tl,"B",{});var _l=R(I);Pe=M(_l,"Facility"),_l.forEach(u),Mt=j(tl),ft(te.$$.fragment,tl),tl.forEach(u),bt=j(p),it=y(p,"B",{});var cl=R(it);ge=M(cl,"Manufacturing"),cl.forEach(u),At=j(p),st=y(p,"DL",{});var W=R(st);m=y(W,"DT",{});var jt=R(m);w=M(jt,"Time"),jt.forEach(u),Be=y(W,"DD",{title:!0});var kl=R(Be);ot=M(kl,le),kl.forEach(u),Me=y(W,"DT",{});var El=R(Me);wt=M(El,"Job Cost"),El.forEach(u),Ut=y(W,"DD",{});var Zt=R(Ut);Qt=M(Zt,zt),Zt.forEach(u),W.forEach(u),Pt=j(p),ht=y(p,"DIV",{class:!0});var ll=R(ht);Ht=y(ll,"DIV",{});var Tl=R(Ht);$t=M(Tl,"Job cost"),Tl.forEach(u),rl=y(ll,"DIV",{}),R(rl).forEach(u),ml=j(ll),el=y(ll,"DIV",{class:!0});var Rl=R(el);ft(Nt.$$.fragment,Rl),Rl.forEach(u),nl=j(ll);for(let yl=0;yl<Qe.length;yl+=1)Qe[yl].l(ll);ll.forEach(u),this.h()},h(){var p,P;B(t,"class","itemName"),B(t,"title",f=`${(p=e[37].types[e[5]])==null?void 0:p.name} [${e[5]}]`),B(a,"class","qty"),B(b,"class","graph"),B(l,"class",x=""+(ii(`breakdown ${e[9]?"":"summary"}`)+" svelte-8kmzjq")),B(oe,"type","range"),B(oe,"min",1),B(oe,"max",de=e[22]?e[23]:(P=e[30])==null?void 0:P.maxProductionLimit),oe.disabled=pe=e[8]!==null&&!e[13],B(re,"type","number"),re.disabled=me=e[8]!==null&&!e[13],B(re,"class","svelte-8kmzjq"),B(Z,"class","combinedInput svelte-8kmzjq"),B(Se,"type","checkbox"),Se.disabled=pt=!e[27],B(je,"type","range"),B(je,"min",0),B(je,"max",10),je.disabled=e[22],B(De,"type","range"),B(De,"min",0),B(De,"max",20),B(De,"step",2),De.disabled=e[22],B(ae,"type","number"),ae.disabled=e[22],B(Be,"title",Rt=`${e[35]}s`),B(el,"class","graph"),B(ht,"class","breakdown")},m(p,P){C(p,l,P),r(l,t),r(t,o),r(l,s),r(l,a),r(a,n),r(l,c),r(l,b),r(b,d),r(b,g),r(b,U),r(b,z),r(b,K),r(b,O),r(b,F),_t(v,b,null),r(b,X),r(b,se),r(b,G),r(b,E),r(b,T),r(b,A),C(p,ee,P),C(p,Z,P),r(Z,Te),r(Z,oe),nt(oe,e[11]),r(Z,Re),r(Z,re),nt(re,e[11]),r(Z,we),Ct&&Ct.m(Z,null),C(p,be,P),C(p,H,P),r(H,Ge),r(Ge,ze),r(H,Le),r(H,Ie),r(H,et),r(H,tt),r(tt,Se),Se.checked=e[22],r(tt,gt),r(H,Ze),r(H,It),r(H,kt),Ue&&Ue.m(H,null),r(H,He),r(H,D),r(D,Ne),r(D,je),nt(je,e[0]),r(D,lt),r(D,Ce),r(H,N),r(H,_e),r(_e,dt),r(_e,De),nt(De,e[1]),r(_e,We),r(_e,Xe),r(H,qt),r(H,Ve),r(H,Je),r(H,Ae),r(Ae,ke),r(Ae,ae),nt(ae,e[10]),C(p,Ee,P),C(p,mt,P),r(mt,I),r(I,Pe),r(mt,Mt),_t(te,mt,null),C(p,bt,P),C(p,it,P),r(it,ge),C(p,At,P),C(p,st,P),r(st,m),r(m,w),r(st,Be),r(Be,ot),r(st,Me),r(Me,wt),r(st,Ut),r(Ut,Qt),C(p,Pt,P),C(p,ht,P),r(ht,Ht),r(Ht,$t),r(ht,rl),r(ht,ml),r(ht,el),_t(Nt,el,null),r(ht,nl);for(let yt=0;yt<Qe.length;yt+=1)Qe[yt].m(ht,null);Oe=!0,rt||(bl=[Fe(oe,"change",e[49]),Fe(oe,"input",e[49]),Fe(re,"input",e[50]),Fe(Se,"change",e[52]),Fe(je,"change",e[57]),Fe(je,"input",e[57]),Fe(De,"change",e[58]),Fe(De,"input",e[58]),Fe(ae,"input",e[59])],rt=!0)},p(p,P){var Ft,_,V;(!Oe||P[0]&32|P[1]&64)&&i!==(i=((Ft=p[37].types[p[5]])==null?void 0:Ft.name)+"")&&ue(o,i),(!Oe||P[0]&32|P[1]&64&&f!==(f=`${(_=p[37].types[p[5]])==null?void 0:_.name} [${p[5]}]`))&&B(t,"title",f),(!Oe||P[0]&67108864)&&ue(n,p[26]),(!Oe||P[0]&268435456)&&k!==(k=vt(p[28])+"")&&ue(g,k),(!Oe||P[1]&8)&&L!==(L=Sl(p[34])+"")&&ue(z,L);const yt={};P[1]&2&&(yt.extents=p[32]),P[0]&67108864&&(yt.quantity=p[26]),P[0]&32&&(yt.type_id=p[5]),P[0]&64&&(yt.buyOverheadRate=-p[6]),P[0]&192&&(yt.sellOverheadRate=-p[7]-p[6]),P[0]&2097152&&(yt.totalCost=p[21]),!Q&&P[0]&1048608&&(Q=!0,yt.price=p[20][p[5]],ve(()=>Q=!1)),!Y&&P[0]&16777216&&(Y=!0,yt.lowestSellPrice=p[24],ve(()=>Y=!1)),!fe&&P[0]&33554432&&(fe=!0,yt.highestBuyPrice=p[25],ve(()=>fe=!1)),v.$set(yt),(!Oe||P[0]&8)&&ce!==(ce=vt(p[3])+"")&&ue(E,ce),(!Oe||P[0]&2097152)&&J!==(J=vt(p[21])+"")&&ue(A,J),(!Oe||P[0]&512&&x!==(x=""+(ii(`breakdown ${p[9]?"":"summary"}`)+" svelte-8kmzjq")))&&B(l,"class",x),(!Oe||P[0]&1086324736&&de!==(de=p[22]?p[23]:(V=p[30])==null?void 0:V.maxProductionLimit))&&B(oe,"max",de),(!Oe||P[0]&8448&&pe!==(pe=p[8]!==null&&!p[13]))&&(oe.disabled=pe),P[0]&2048&&nt(oe,p[11]),(!Oe||P[0]&8448&&me!==(me=p[8]!==null&&!p[13]))&&(re.disabled=me),P[0]&2048&&Lt(re.value)!==p[11]&&nt(re,p[11]),p[8]!==null?Ct?Ct.p(p,P):(Ct=Pi(p),Ct.c(),Ct.m(Z,null)):Ct&&(Ct.d(1),Ct=null),(!Oe||P[0]&134217728&&pt!==(pt=!p[27]))&&(Se.disabled=pt),P[0]&4194304&&(Se.checked=p[22]),p[22]?Ue?(Ue.p(p,P),P[0]&4194304&&$(Ue,1)):(Ue=Bi(p),Ue.c(),$(Ue,1),Ue.m(H,He)):Ue&&(Wt(),ie(Ue,1,1,()=>{Ue=null}),Xt()),(!Oe||P[0]&4194304)&&(je.disabled=p[22]),P[0]&1&&nt(je,p[0]),(!Oe||P[0]&1)&&ue(Ce,p[0]),(!Oe||P[0]&4194304)&&(De.disabled=p[22]),P[0]&2&&nt(De,p[1]),(!Oe||P[0]&2)&&ue(Xe,p[1]),(!Oe||P[0]&4194304)&&(ae.disabled=p[22]),P[0]&1024&&Lt(ae.value)!==p[10]&&nt(ae,p[10]);const Kt={};!Jt&&P[0]&16&&(Jt=!0,Kt.value=p[4],ve(()=>Jt=!1)),!qe&&P[0]&16384&&(qe=!0,Kt.activitySystemCostIndex=p[14],ve(()=>qe=!1)),!ut&&P[0]&32768&&(ut=!0,Kt.activityTax=p[15],ve(()=>ut=!1)),!St&&P[0]&65536&&(St=!0,Kt.structureRoleBonuses=p[16],ve(()=>St=!1)),!Yt&&P[0]&131072&&(Yt=!0,Kt.structureRigBonuses=p[17],ve(()=>Yt=!1)),te.$set(Kt),(!Oe||P[1]&16)&&le!==(le=Il(p[35])+"")&&ue(ot,le),(!Oe||P[1]&16&&Rt!==(Rt=`${p[35]}s`))&&B(Be,"title",Rt),(!Oe||P[0]&536870912)&&zt!==(zt=vt(p[29])+"")&&ue(Qt,zt);const $e={};if(P[1]&2&&($e.extents=p[32]),P[0]&67108864&&($e.quantity=p[26]),P[0]&536870912&&($e.totalCost=p[29]),Nt.$set($e),P[0]&1839252|P[1]&71){Ot=Object.keys(p[12].materials).map(p[65]);let ne;for(ne=0;ne<Ot.length;ne+=1){const Bt=Di(p,Ot,ne);Qe[ne]?(Qe[ne].p(Bt,P),$(Qe[ne],1)):(Qe[ne]=Mi(Bt),Qe[ne].c(),$(Qe[ne],1),Qe[ne].m(ht,null))}for(Wt(),ne=Ot.length;ne<Qe.length;ne+=1)fl(ne);Xt()}},i(p){if(!Oe){$(v.$$.fragment,p),$(Ue),$(te.$$.fragment,p),$(Nt.$$.fragment,p);for(let P=0;P<Ot.length;P+=1)$(Qe[P]);Oe=!0}},o(p){ie(v.$$.fragment,p),ie(Ue),ie(te.$$.fragment,p),ie(Nt.$$.fragment,p),Qe=Qe.filter(Boolean);for(let P=0;P<Qe.length;P+=1)ie(Qe[P]);Oe=!1},d(p){p&&u(l),ct(v),p&&u(ee),p&&u(Z),Ct&&Ct.d(),p&&u(be),p&&u(H),Ue&&Ue.d(),p&&u(Ee),p&&u(mt),ct(te),p&&u(bt),p&&u(it),p&&u(At),p&&u(st),p&&u(Pt),p&&u(ht),ct(Nt),gl(Qe,p),rt=!1,wl(bl)}}}function mr(e){let l;return{c(){l=q("No blueprint selected yet")},l(t){l=M(t,"No blueprint selected yet")},m(t,i){C(t,l,i)},p:Tt,i:Tt,o:Tt,d(t){t&&u(l)}}}function Pi(e){let l,t,i,o,f;return{c(){l=h("label"),t=h("input"),i=q(" Override"),this.h()},l(s){l=y(s,"LABEL",{});var a=R(l);t=y(a,"INPUT",{type:!0}),i=M(a," Override"),a.forEach(u),this.h()},h(){B(t,"type","checkbox")},m(s,a){C(s,l,a),r(l,t),t.checked=e[13],r(l,i),o||(f=Fe(t,"change",e[51]),o=!0)},p(s,a){a[0]&8192&&(t.checked=s[13])},d(s){s&&u(l),o=!1,f()}}}function Bi(e){let l,t,i,o,f,s,a;function n(g){e[53](g)}function c(g){e[54](g)}function b(g){e[55](g)}function d(g){e[56](g)}let k={blueprintToInvent:e[30]};return e[10]!==void 0&&(k.expectedCostPerRun=e[10]),e[0]!==void 0&&(k.productME=e[0]),e[1]!==void 0&&(k.productTE=e[1]),e[23]!==void 0&&(k.productRuns=e[23]),t=new sr({props:k}),he.push(()=>ye(t,"expectedCostPerRun",n)),he.push(()=>ye(t,"productME",c)),he.push(()=>ye(t,"productTE",b)),he.push(()=>ye(t,"productRuns",d)),{c(){l=h("div"),at(t.$$.fragment),this.h()},l(g){l=y(g,"DIV",{class:!0});var U=R(l);ft(t.$$.fragment,U),U.forEach(u),this.h()},h(){B(l,"class","subItem")},m(g,U){C(g,l,U),_t(t,l,null),a=!0},p(g,U){const L={};U[0]&1073741824&&(L.blueprintToInvent=g[30]),!i&&U[0]&1024&&(i=!0,L.expectedCostPerRun=g[10],ve(()=>i=!1)),!o&&U[0]&1&&(o=!0,L.productME=g[0],ve(()=>o=!1)),!f&&U[0]&2&&(f=!0,L.productTE=g[1],ve(()=>f=!1)),!s&&U[0]&8388608&&(s=!0,L.productRuns=g[23],ve(()=>s=!1)),t.$set(L)},i(g){a||($(t.$$.fragment,g),a=!0)},o(g){ie(t.$$.fragment,g),a=!1},d(g){g&&u(l),ct(t)}}}function qi(e){let l,t,i,o,f,s,a;const n=[yr,hr,br],c=[];function b(d,k){return(t==null||k[0]&4096|k[1]&1)&&(t=!!zl(d[31],d[72])),t?0:((i==null||k[0]&4096|k[1]&1)&&(i=!!Yl(d[72],d[31]).activity),i?1:2)}return o=b(e,[-1,-1,-1]),f=c[o]=n[o](e),{c(){l=h("div"),f.c(),s=S(),this.h()},l(d){l=y(d,"DIV",{class:!0});var k=R(l);f.l(k),s=j(k),k.forEach(u),this.h()},h(){B(l,"class","subItem")},m(d,k){C(d,l,k),c[o].m(l,null),r(l,s),a=!0},p(d,k){let g=o;o=b(d,k),o===g?c[o].p(d,k):(Wt(),ie(c[g],1,1,()=>{c[g]=null}),Xt(),f=c[o],f?f.p(d,k):(f=c[o]=n[o](d),f.c()),$(f,1),f.m(l,s))},i(d){a||($(f),a=!0)},o(d){ie(f),a=!1},d(d){d&&u(l),c[o].d()}}}function br(e){var o;let l,t=((o=e[37].types[e[72]])==null?void 0:o.name)+"",i;return{c(){l=q("Could not find industry details for "),i=q(t)},l(f){l=M(f,"Could not find industry details for "),i=M(f,t)},m(f,s){C(f,l,s),C(f,i,s)},p(f,s){var a;s[0]&4096|s[1]&64&&t!==(t=((a=f[37].types[f[72]])==null?void 0:a.name)+"")&&ue(i,t)},i:Tt,o:Tt,d(f){f&&u(l),f&&u(i)}}}function hr(e){let l,t,i,o;function f(n){e[70](n,e[72])}function s(n){e[71](n)}let a={productTypeId:e[72],requiredQuantity:e[18](e[12].materials[e[72]].quantity),defaultLocationId:e[4],compact:!0};return e[19][e[72]]!==void 0&&(a.unitCost=e[19][e[72]]),e[2]!==void 0&&(a.producedItems=e[2]),l=new Hl({props:a}),he.push(()=>ye(l,"unitCost",f)),he.push(()=>ye(l,"producedItems",s)),{c(){at(l.$$.fragment)},l(n){ft(l.$$.fragment,n)},m(n,c){_t(l,n,c),o=!0},p(n,c){e=n;const b={};c[0]&4096&&(b.productTypeId=e[72]),c[0]&266240&&(b.requiredQuantity=e[18](e[12].materials[e[72]].quantity)),c[0]&16&&(b.defaultLocationId=e[4]),!t&&c[0]&528384&&(t=!0,b.unitCost=e[19][e[72]],ve(()=>t=!1)),!i&&c[0]&4&&(i=!0,b.producedItems=e[2],ve(()=>i=!1)),l.$set(b)},i(n){o||($(l.$$.fragment,n),o=!0)},o(n){ie(l.$$.fragment,n),o=!1},d(n){ct(l,n)}}}function yr(e){let l,t,i,o;function f(n){e[68](n,e[72])}function s(n){e[69](n)}let a={selectedProductId:e[72],requiredQuantity:e[18](e[12].materials[e[72]].quantity),materialEfficiency:10,timeEfficiency:20,selectedLocationId:e[4],compact:!0};return e[19][e[72]]!==void 0&&(a.unitCost=e[19][e[72]]),e[2]!==void 0&&(a.producedItems=e[2]),l=new Oi({props:a}),he.push(()=>ye(l,"unitCost",f)),he.push(()=>ye(l,"producedItems",s)),{c(){at(l.$$.fragment)},l(n){ft(l.$$.fragment,n)},m(n,c){_t(l,n,c),o=!0},p(n,c){e=n;const b={};c[0]&4096&&(b.selectedProductId=e[72]),c[0]&266240&&(b.requiredQuantity=e[18](e[12].materials[e[72]].quantity)),c[0]&16&&(b.selectedLocationId=e[4]),!t&&c[0]&528384&&(t=!0,b.unitCost=e[19][e[72]],ve(()=>t=!1)),!i&&c[0]&4&&(i=!0,b.producedItems=e[2],ve(()=>i=!1)),l.$set(b)},i(n){o||($(l.$$.fragment,n),o=!0)},o(n){ie(l.$$.fragment,n),o=!1},d(n){ct(l,n)}}}function Mi(e){var ce;let l,t,i,o,f,s,a=((ce=e[37].types[e[72]])==null?void 0:ce.name)+"",n,c,b,d,k=e[18](e[12].materials[e[72]].quantity)+"",g,U,L,z,K,O,F,v,Q,Y;function fe(){e[66].call(i,e[72])}function X(E){e[67](E,e[72])}let se={extents:e[32],quantity:e[18](e[12].materials[e[72]].quantity),type_id:e[72],overridePrice:e[19][e[72]],buyOverheadRate:e[7],totalCost:e[19][e[72]]?e[19][e[72]]*e[18](e[12].materials[e[72]].quantity):null,compact:!0};e[20][e[72]]!==void 0&&(se.price=e[20][e[72]]),z=new il({props:se}),he.push(()=>ye(z,"price",X));let G=e[2][e[72]]&&qi(e);return{c(){l=h("div"),t=h("label"),i=h("input"),f=S(),s=h("span"),n=q(a),b=S(),d=h("div"),g=q(k),U=S(),L=h("div"),at(z.$$.fragment),O=S(),G&&G.c(),F=pl(),this.h()},l(E){l=y(E,"DIV",{class:!0});var T=R(l);t=y(T,"LABEL",{});var J=R(t);i=y(J,"INPUT",{type:!0}),f=j(J),s=y(J,"SPAN",{title:!0});var A=R(s);n=M(A,a),A.forEach(u),J.forEach(u),T.forEach(u),b=j(E),d=y(E,"DIV",{class:!0});var x=R(d);g=M(x,k),x.forEach(u),U=j(E),L=y(E,"DIV",{class:!0});var ee=R(L);ft(z.$$.fragment,ee),ee.forEach(u),O=j(E),G&&G.l(E),F=pl(),this.h()},h(){var E;B(i,"type","checkbox"),i.disabled=o=!e[33](e[72]),B(s,"title",c=`${(E=e[37].types[e[72]])==null?void 0:E.name} [${e[72]}]`),B(l,"class","itemName"),B(d,"class","qty"),B(L,"class","graph")},m(E,T){C(E,l,T),r(l,t),r(t,i),i.checked=e[2][e[72]],r(t,f),r(t,s),r(s,n),C(E,b,T),C(E,d,T),r(d,g),C(E,U,T),C(E,L,T),_t(z,L,null),C(E,O,T),G&&G.m(E,T),C(E,F,T),v=!0,Q||(Y=Fe(i,"change",fe),Q=!0)},p(E,T){var A,x;e=E,(!v||T[0]&4096|T[1]&4&&o!==(o=!e[33](e[72])))&&(i.disabled=o),T[0]&4100&&(i.checked=e[2][e[72]]),(!v||T[0]&4096|T[1]&64)&&a!==(a=((A=e[37].types[e[72]])==null?void 0:A.name)+"")&&ue(n,a),(!v||T[0]&4096|T[1]&64&&c!==(c=`${(x=e[37].types[e[72]])==null?void 0:x.name} [${e[72]}]`))&&B(s,"title",c),(!v||T[0]&266240)&&k!==(k=e[18](e[12].materials[e[72]].quantity)+"")&&ue(g,k);const J={};T[1]&2&&(J.extents=e[32]),T[0]&266240&&(J.quantity=e[18](e[12].materials[e[72]].quantity)),T[0]&4096&&(J.type_id=e[72]),T[0]&528384&&(J.overridePrice=e[19][e[72]]),T[0]&128&&(J.buyOverheadRate=e[7]),T[0]&790528&&(J.totalCost=e[19][e[72]]?e[19][e[72]]*e[18](e[12].materials[e[72]].quantity):null),!K&&T[0]&1052672&&(K=!0,J.price=e[20][e[72]],ve(()=>K=!1)),z.$set(J),e[2][e[72]]?G?(G.p(e,T),T[0]&4100&&$(G,1)):(G=qi(e),G.c(),$(G,1),G.m(F.parentNode,F)):G&&(Wt(),ie(G,1,1,()=>{G=null}),Xt())},i(E){v||($(z.$$.fragment,E),$(G),v=!0)},o(E){ie(z.$$.fragment,E),ie(G),v=!1},d(E){E&&u(l),E&&u(b),E&&u(d),E&&u(U),E&&u(L),ct(z),E&&u(O),G&&G.d(E),E&&u(F),Q=!1,Y()}}}function vr(e){let l,t,i,o;const f=[mr,dr],s=[];function a(n,c){return n[30]?1:0}return l=a(e),t=s[l]=f[l](e),{c(){t.c(),i=pl()},l(n){t.l(n),i=pl()},m(n,c){s[l].m(n,c),C(n,i,c),o=!0},p(n,c){let b=l;l=a(n),l===b?s[l].p(n,c):(Wt(),ie(s[b],1,1,()=>{s[b]=null}),Xt(),t=s[l],t?t.p(n,c):(t=s[l]=f[l](n),t.c()),$(t,1),t.m(i.parentNode,i))},i(n){o||($(t),o=!0)},o(n){ie(t),o=!1},d(n){s[l].d(n),n&&u(i)}}}function gr(e,l,t){let i,o,f,s,a,n,c,b,d,k,g,U=Tt,L=()=>(U(),U=Ml(s,I=>t(42,g=I)),s),z,K,O,F;xe(e,Gl,I=>t(31,k=I)),xe(e,ri,I=>t(43,z=I)),xe(e,Ul,I=>t(45,O=I)),xe(e,Fl,I=>t(37,F=I)),e.$$.on_destroy.push(()=>U());let v=0,{selectedProductId:Q=null}=l,{salesTaxRate:Y=.036}=l,{brokerFeeRate:fe=.0113709973928}=l,{requiredQuantity:X=null}=l,se=1,{materialEfficiency:G=0}=l,{timeEfficiency:ce=0}=l,{producedItems:E={}}=l,T=null,J=!1,{selectedLocationId:A=null}=l,x,ee,Z,Te,oe=I=>I,de={},pe={},Re=0,re=0,{unitCost:me=null}=l,{compact:we=!1}=l,be=!1,H=10,Ge=ql("currentCharacter");xe(e,Ge,I=>t(44,K=I));let{extents:ze=null}=l,Le,Ie,et=[0,1e3],tt=()=>!1;function Se(I){e.$$.not_equal(pe[Q],I)&&(pe[Q]=I,t(20,pe))}function pt(I){Le=I,t(24,Le)}function gt(I){Ie=I,t(25,Ie)}function Ze(){se=Lt(this.value),t(11,se),t(8,X),t(13,J),t(12,T),t(5,Q),t(22,be),t(23,H),t(30,i),t(27,o),t(31,k)}function It(){se=Lt(this.value),t(11,se),t(8,X),t(13,J),t(12,T),t(5,Q),t(22,be),t(23,H),t(30,i),t(27,o),t(31,k)}function kt(){J=this.checked,t(13,J)}function He(){be=this.checked,t(22,be),t(27,o),t(31,k),t(30,i),t(5,Q)}function D(I){v=I,t(10,v)}function Ne(I){G=I,t(0,G)}function je(I){ce=I,t(1,ce)}function lt(I){H=I,t(23,H)}function Ce(){G=Lt(this.value),t(0,G)}function N(){ce=Lt(this.value),t(1,ce)}function _e(){v=Lt(this.value),t(10,v)}function dt(I){A=I,t(4,A)}function De(I){x=I,t(14,x)}function We(I){ee=I,t(15,ee)}function Xe(I){Z=I,t(16,Z)}function qt(I){Te=I,t(17,Te)}const Ve=I=>parseInt(I);function Je(I){E[I]=this.checked,t(2,E),t(12,T),t(30,i),t(31,k),t(5,Q)}function Ae(I,Pe){e.$$.not_equal(pe[Pe],I)&&(pe[Pe]=I,t(20,pe))}function ke(I,Pe){e.$$.not_equal(de[Pe],I)&&(de[Pe]=I,t(19,de),t(2,E))}function ae(I){E=I,t(2,E)}function Ee(I,Pe){e.$$.not_equal(de[Pe],I)&&(de[Pe]=I,t(19,de),t(2,E))}function mt(I){E=I,t(2,E)}return e.$$set=I=>{"selectedProductId"in I&&t(5,Q=I.selectedProductId),"salesTaxRate"in I&&t(6,Y=I.salesTaxRate),"brokerFeeRate"in I&&t(7,fe=I.brokerFeeRate),"requiredQuantity"in I&&t(8,X=I.requiredQuantity),"materialEfficiency"in I&&t(0,G=I.materialEfficiency),"timeEfficiency"in I&&t(1,ce=I.timeEfficiency),"producedItems"in I&&t(2,E=I.producedItems),"selectedLocationId"in I&&t(4,A=I.selectedLocationId),"unitCost"in I&&t(3,me=I.unitCost),"compact"in I&&t(9,we=I.compact),"extents"in I&&t(39,ze=I.extents)},e.$$.update=()=>{var I,Pe,Mt,te,Jt;if(e.$$.dirty[0]&32|e.$$.dirty[1]&1&&t(30,i=zl(k,Q)),e.$$.dirty[0]&1073741824|e.$$.dirty[1]&1&&t(27,o=Ji(k,i==null?void 0:i.type_id)),e.$$.dirty[0]&1073741824&&t(12,T=i==null?void 0:i.activities[Ol]),e.$$.dirty[0]&12576&&X!==null&&!J&&T&&t(11,se=Math.ceil(X/T.products[Q].quantity)),e.$$.dirty[0]&134217728&&(o||t(22,be=!1)),e.$$.dirty[0]&12582912&&be&&t(11,se=H),e.$$.dirty[0]&198657&&t(18,oe=qe=>{var ut,St;return Math.max(se,Math.ceil(qe*se*(1-G/100)*(1+((ut=Z==null?void 0:Z.materialConsumptionModifier)!=null?ut:0)/100)*(1+((St=Te==null?void 0:Te.materialReductionBonus)!=null?St:0)/100)))}),e.$$.dirty[0]&4096|e.$$.dirty[1]&16896&&(t(40,re=0),T))for(let qe in T.materials)t(40,re+=T.materials[qe].quantity*((Pe=(I=O[qe])==null?void 0:I.adjusted_price)!=null?Pe:0));if(e.$$.dirty[0]&116736|e.$$.dirty[1]&512&&t(29,f=re*x*(1+((Mt=Z==null?void 0:Z.jobCostModifier)!=null?Mt:0)/100)*(1+ee/100)*se),e.$$.dirty[0]&540285952&&(t(21,Re=0),T)){for(let qe in T.materials){let ut=oe(T.materials[qe].quantity);t(21,Re+=ut*pe[qe])}t(21,Re+=f),t(21,Re+=v*se)}if(e.$$.dirty[0]&524292)for(let qe in de)E[qe]||t(19,de[qe]=void 0,de);e.$$.dirty[1]&8192&&L(t(36,s=jl[K])),e.$$.dirty[0]&4096|e.$$.dirty[1]&6144&&t(41,a=T?[...Object.values(T.requiredSkills||{}).map(qe=>qe.type_id),si].reduce((qe,ut)=>{var Yt,bt,it,ge,At,st,m,w;if(z.types[ut]===void 0)return qe;let St=(st=(At=(it=(Yt=z.types[ut][440])==null?void 0:Yt.value)!=null?it:(bt=z.types[ut][1982])==null?void 0:bt.value)!=null?At:(ge=z.types[ut][1961])==null?void 0:ge.value)!=null?st:0;return St*=(w=(m=g==null?void 0:g.skills.find(Be=>Be.skill_id==ut))==null?void 0:m.active_skill_level)!=null?w:0,qe*(1+St*.01)},1):1),e.$$.dirty[0]&202754|e.$$.dirty[1]&1024&&t(35,n=(T==null?void 0:T.time)*(1-ce/100)*a*(1+((te=Z==null?void 0:Z.jobDurationModifier)!=null?te:0)/100)*(1+((Jt=Te==null?void 0:Te.timeReductionBonus)!=null?Jt:0)/100)*se),e.$$.dirty[0]&1048608&&t(28,c=pe[Q]),e.$$.dirty[0]&6176&&t(26,b=(T==null?void 0:T.products[Q].quantity)*se),e.$$.dirty[0]&337641472&&t(34,d=c*b-Re),e.$$.dirty[0]&69210112&&t(3,me=T?Re/b:null),e.$$.dirty[0]&118493224|e.$$.dirty[1]&256&&(ze===null?T&&t(32,et[1]=1.1*Math.max(pe[Q],me,Le!=null?Le:0,Ie!=null?Ie:0)*b,et):t(32,et=ze)),e.$$.dirty[1]&1&&t(33,tt=qe=>zl(k,qe)!=null||Yl(qe,k).activity!=null)},[G,ce,E,me,A,Q,Y,fe,X,we,v,se,T,J,x,ee,Z,Te,oe,de,pe,Re,be,H,Le,Ie,b,o,c,f,i,k,et,tt,d,n,s,F,Ge,ze,re,a,g,z,K,O,Se,pt,gt,Ze,It,kt,He,D,Ne,je,lt,Ce,N,_e,dt,De,We,Xe,qt,Ve,Je,Ae,ke,ae,Ee,mt]}class Oi extends Cl{constructor(l){super();Dl(this,l,gr,vr,Pl,{selectedProductId:5,salesTaxRate:6,brokerFeeRate:7,requiredQuantity:8,materialEfficiency:0,timeEfficiency:1,producedItems:2,selectedLocationId:4,unitCost:3,compact:9,extents:39},null,[-1,-1,-1])}}function Ir(e){let l,t;return l=new Oi({props:{selectedProductId:e[1]}}),{c(){at(l.$$.fragment)},l(i){ft(l.$$.fragment,i)},m(i,o){_t(l,i,o),t=!0},p(i,o){const f={};o&2&&(f.selectedProductId=i[1]),l.$set(f)},i(i){t||($(l.$$.fragment,i),t=!0)},o(i){ie(l.$$.fragment,i),t=!1},d(i){ct(l,i)}}}function kr(e){let l,t;return l=new Hl({props:{productTypeId:e[1]}}),{c(){at(l.$$.fragment)},l(i){ft(l.$$.fragment,i)},m(i,o){_t(l,i,o),t=!0},p(i,o){const f={};o&2&&(f.productTypeId=i[1]),l.$set(f)},i(i){t||($(l.$$.fragment,i),t=!0)},o(i){ie(l.$$.fragment,i),t=!1},d(i){ct(l,i)}}}function Er(e){let l,t,i,o,f,s,a,n,c,b,d,k,g,U,L,z;document.title=l=""+((e[2].get(e[1])?`${e[2].get(e[1]).name} - `:"")+"EVE Online Visual Industry Calculator"),o=new wi({props:{value:e[0]}}),o.$on("change",e[10]),d=new Zi({props:{selectedTypeId:e[1],selectableTypes:e[4]}}),d.$on("change",e[11]);const K=[kr,Ir],O=[];function F(v,Q){return v[3]===fi?0:v[3]===Ol?1:-1}return~(g=F(e))&&(U=O[g]=K[g](e)),{c(){t=S(),i=h("p"),at(o.$$.fragment),f=S(),s=h("a"),a=q("Compare group"),c=h("br"),b=S(),at(d.$$.fragment),k=S(),U&&U.c(),L=pl(),this.h()},l(v){Ni('[data-svelte="svelte-856uus"]',document.head).forEach(u),t=j(v),i=y(v,"P",{});var Y=R(i);ft(o.$$.fragment,Y),f=j(Y),s=y(Y,"A",{href:!0});var fe=R(s);a=M(fe,"Compare group"),fe.forEach(u),c=y(Y,"BR",{}),b=j(Y),ft(d.$$.fragment,Y),Y.forEach(u),k=j(v),U&&U.l(v),L=pl(),this.h()},h(){B(s,"href",n=`${ni}/compare/${e[0]}`)},m(v,Q){C(v,t,Q),C(v,i,Q),_t(o,i,null),r(i,f),r(i,s),r(s,a),r(i,c),r(i,b),_t(d,i,null),C(v,k,Q),~g&&O[g].m(v,Q),C(v,L,Q),z=!0},p(v,[Q]){(!z||Q&6)&&l!==(l=""+((v[2].get(v[1])?`${v[2].get(v[1]).name} - `:"")+"EVE Online Visual Industry Calculator"))&&(document.title=l);const Y={};Q&1&&(Y.value=v[0]),o.$set(Y),(!z||Q&1&&n!==(n=`${ni}/compare/${v[0]}`))&&B(s,"href",n);const fe={};Q&2&&(fe.selectedTypeId=v[1]),Q&16&&(fe.selectableTypes=v[4]),d.$set(fe);let X=g;g=F(v),g===X?~g&&O[g].p(v,Q):(U&&(Wt(),ie(O[X],1,1,()=>{O[X]=null}),Xt()),~g?(U=O[g],U?U.p(v,Q):(U=O[g]=K[g](v),U.c()),$(U,1),U.m(L.parentNode,L)):U=null)},i(v){z||($(o.$$.fragment,v),$(d.$$.fragment,v),$(U),z=!0)},o(v){ie(o.$$.fragment,v),ie(d.$$.fragment,v),ie(U),z=!1},d(v){v&&u(t),v&&u(i),ct(o),ct(d),v&&u(k),~g&&O[g].d(v),v&&u(L)}}}function Tr(e,l,t){let i,o,f,s,a,n,c,b;xe(e,ai,L=>t(6,s=L)),xe(e,Yi,L=>t(7,a=L)),xe(e,zi,L=>t(8,n=L)),xe(e,ui,L=>t(2,c=L)),xe(e,Ui,L=>t(9,b=L));let d,k;const g=L=>{t(0,d=L.detail)},U=L=>{Qi(`${L.detail}`,{keepfocus:!0})};return e.$$.update=()=>{var L,z;e.$$.dirty&512&&t(1,i=parseInt(b.params.type)||null),e.$$.dirty&487&&(i!==k&&(_i(d,n,a,s).includes(i)||t(0,d=(L=c.get(i))==null?void 0:L.market_group_id)),t(5,k=i)),e.$$.dirty&449&&t(4,o=_i(d,n,a,s)),e.$$.dirty&66&&t(3,f=(z=s.get(i))==null?void 0:z.activity.activity.activityID)},[d,i,c,f,o,k,s,a,n,b,g,U]}class Mr extends Cl{constructor(l){super();Dl(this,l,Tr,Er,Pl,{})}}export{Mr as default};
