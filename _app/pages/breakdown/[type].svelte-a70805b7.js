import{S as Cl,i as Dl,s as Pl,e as y,c as v,a as R,d as s,b as q,E as Fl,f as D,F as pl,G as Ne,t as M,g as O,D as u,h as ue,I as dl,$ as Ol,k as L,n as N,H as Tt,T as dt,a0 as ji,K as Gl,L as me,M as be,j as mt,m as bt,o as ht,O as he,x as W,u as ne,v as yt,a1 as lt,r as Wt,w as Xt,Z as Sl,U as jl,a2 as Lt,l as ml,y as Li,C as Ni,a3 as ri,_ as Vi}from"../../chunks/vendor-c867dc14.js";import{M as il,a as Jl,I as ni,C as wi,A as Ai,p as Ui,g as Qi}from"../../chunks/IndustryJob-3570b195.js";import{U as Bl,F as vt,b as Il,L as Yl,I as Ll,D as Fi,c as zl,M as ql,A as ui,l as Gi,d as Nl,e as si,f as Hl,R as Kl,g as Zl,h as Ji,i as Yi}from"../../chunks/LocationSelector-31fe7db1.js";import{b as Vl}from"../../chunks/EveCharacter-1b7cb305.js";import"../../chunks/singletons-12a22614.js";import"../../chunks/paths-28a87002.js";function oi(e,l,t){const i=e.slice();return i[13]=l[t].type_id,i[14]=l[t].name,i}function ai(e,l,t){const i=e.slice();return i[17]=l[t],i[18]=l,i[19]=t,i}function fi(e,l,t){const i=e.slice();return i[20]=l[t].market_group_id,i[14]=l[t].name,i}function _i(e){let l,t=e[14]+"",i,a;return{c(){l=y("option"),i=M(t),this.h()},l(r){l=v(r,"OPTION",{});var n=R(l);i=O(n,t),n.forEach(s),this.h()},h(){l.__value=a=e[20],l.value=l.__value},m(r,n){D(r,l,n),u(l,i)},p(r,n){n&6&&t!==(t=r[14]+"")&&ue(i,t),n&6&&a!==(a=r[20])&&(l.__value=a,l.value=l.__value)},d(r){r&&s(l)}}}function ci(e){let l,t,i,a,r=Object.values(e[17]).filter(e[9]),n=[];for(let c=0;c<r.length;c+=1)n[c]=_i(fi(e,r,c));function f(){e[10].call(l,e[19])}function o(...c){return e[11](e[17],e[19],...c)}return{c(){l=y("select");for(let c=0;c<n.length;c+=1)n[c].c();this.h()},l(c){l=v(c,"SELECT",{name:!0,class:!0});var d=R(l);for(let _=0;_<n.length;_+=1)n[_].l(d);d.forEach(s),this.h()},h(){q(l,"name",t=e[19].toString()),q(l,"class","svelte-l65zkr"),e[3][e[19]]===void 0&&Fl(f)},m(c,d){D(c,l,d);for(let _=0;_<n.length;_+=1)n[_].m(l,null);pl(l,e[3][e[19]]),i||(a=[Ne(l,"change",f),Ne(l,"change",o)],i=!0)},p(c,d){if(e=c,d&6){r=Object.values(e[17]).filter(e[9]);let _;for(_=0;_<r.length;_+=1){const m=fi(e,r,_);n[_]?n[_].p(m,d):(n[_]=_i(m),n[_].c(),n[_].m(l,null))}for(;_<n.length;_+=1)n[_].d(1);n.length=r.length}d&14&&pl(l,e[3][e[19]])},d(c){c&&s(l),dl(n,c),i=!1,Ol(a)}}}function pi(e){let l,t=e[14]+"",i,a;return{c(){l=y("option"),i=M(t),this.h()},l(r){l=v(r,"OPTION",{});var n=R(l);i=O(n,t),n.forEach(s),this.h()},h(){l.__value=a=e[13],l.value=l.__value},m(r,n){D(r,l,n),u(l,i)},p(r,n){n&16&&t!==(t=r[14]+"")&&ue(i,t),n&16&&a!==(a=r[13])&&(l.__value=a,l.value=l.__value)},d(r){r&&s(l)}}}function zi(e){let l,t,i,a,r,n,f,o=e[2],c=[];for(let m=0;m<o.length;m+=1)c[m]=ci(ai(e,o,m));let d=e[4],_=[];for(let m=0;m<d.length;m+=1)_[m]=pi(oi(e,d,m));return{c(){l=y("p");for(let m=0;m<c.length;m+=1)c[m].c();t=L(),i=y("br"),a=M(`\r
    Item \r
    `),r=y("select");for(let m=0;m<_.length;m+=1)_[m].c();this.h()},l(m){l=v(m,"P",{});var g=R(l);for(let U=0;U<c.length;U+=1)c[U].l(g);t=N(g),i=v(g,"BR",{}),a=O(g,`\r
    Item \r
    `),r=v(g,"SELECT",{class:!0});var C=R(r);for(let U=0;U<_.length;U+=1)_[U].l(C);C.forEach(s),g.forEach(s),this.h()},h(){q(r,"class","svelte-l65zkr")},m(m,g){D(m,l,g);for(let C=0;C<c.length;C+=1)c[C].m(l,null);u(l,t),u(l,i),u(l,a),u(l,r);for(let C=0;C<_.length;C+=1)_[C].m(r,null);pl(r,e[0]),n||(f=Ne(r,"change",e[5]),n=!0)},p(m,[g]){if(g&14){o=m[2];let C;for(C=0;C<o.length;C+=1){const U=ai(m,o,C);c[C]?c[C].p(U,g):(c[C]=ci(U),c[C].c(),c[C].m(l,t))}for(;C<c.length;C+=1)c[C].d(1);c.length=o.length}if(g&16){d=m[4];let C;for(C=0;C<d.length;C+=1){const U=oi(m,d,C);_[C]?_[C].p(U,g):(_[C]=pi(U),_[C].c(),_[C].m(r,null))}for(;C<_.length;C+=1)_[C].d(1);_.length=d.length}g&17&&pl(r,m[0])},i:Tt,o:Tt,d(m){m&&s(l),dl(c,m),dl(_,m),n=!1,f()}}}function di(e){if(e.child_groups===void 0)return[e.market_group_id];let l=Object.keys(e.child_groups).map(t=>parseInt(t));for(let t in e.child_groups)l=l.concat(di(e.child_groups[t]));return l}function Hi(e,l,t){let i;dt(e,Bl,V=>t(8,i=V));let a=new Set,r=[],n=[null],f=[],o=[],{selectableTypes:c=void 0}=l,{selectedTypeId:d=null}=l;const _=ji();function m(V){_("change",parseInt(V.target.value))}const g=V=>a.has(V.market_group_id);function C(V){n[V]=Gl(this),t(3,n),t(2,r),t(8,i),t(3,n),t(1,a),t(8,i),t(7,f),t(6,c)}const U=(V,w,I)=>{V[I.target.value].child_groups&&t(3,n=[...n.slice(0,w+1),null])};return e.$$set=V=>{"selectableTypes"in V&&t(6,c=V.selectableTypes),"selectedTypeId"in V&&t(0,d=V.selectedTypeId)},e.$$.update=()=>{if(e.$$.dirty&320&&i.types&&t(7,f=c||Object.values(i.types)),e.$$.dirty&408){let V=n[n.length-1]||n[n.length-2];if(V){t(4,o=[]);let w=new Set,I=new Set(f.map(P=>P.type_id)),S=di(i.markets.groups[V]);for(let P of S)i.markets.groups[P].types.forEach(Y=>{I.has(Y)&&w.add(Y)});t(4,o=Array.from(w).map(P=>i.types[P]))}else t(4,o=f);o.sort((w,I)=>w.name.localeCompare(I.name))}if(e.$$.dirty&386&&i.markets&&i.types&&i.markets.groups){let V=new Set(f.map(w=>w.type_id));a.clear();for(let w in i.markets.groups){let I=i.markets.groups[w];for(let S of I.types)if(V.has(S)){let P=parseInt(w);do a.add(P),P=i.markets.groups[P].parent_group_id;while(P!==void 0)}}t(1,a),t(8,i),t(7,f),t(6,c)}if(e.$$.dirty&268&&i.markets){t(2,r=[i.markets.groupTree]);for(let V of n)V!=null&&i.markets.groups[V].child_groups&&r.push(i.markets.groups[V].child_groups)}},[d,a,r,n,o,m,c,f,i,g,C,U]}class Ki extends Cl{constructor(l){super();Dl(this,l,Hi,zi,Pl,{selectableTypes:6,selectedTypeId:0})}}function Zi(e,l){return e.reduce((t,i)=>t+(l?l(i):i),0)}function mi(e,l,t){const i=e.slice();return i[58]=l[t],i}function bi(e,l,t){const i=e.slice();return i[61]=l[t],i}function hi(e,l,t){const i=e.slice();return i[64]=l[t],i[65]=l,i[66]=t,i}function yi(e){var V,w;let l,t=e[28].types[e[64]].name+"",i,a,r,n,f=((V=e[25].materials[e[64]])==null?void 0:V.quantity)+"",o,c,d,_,m,g;function C(I){e[51](I,e[64])}let U={compact:!0,extents:e[29],quantity:(w=e[25].materials[e[64]])==null?void 0:w.quantity,type_id:e[64],buyOverheadRate:e[1]};return e[5][e[64]]!==void 0&&(U.price=e[5][e[64]]),_=new il({props:U}),me.push(()=>be(_,"price",C)),{c(){l=y("div"),i=M(t),r=L(),n=y("div"),o=M(f),c=L(),d=y("div"),mt(_.$$.fragment),this.h()},l(I){l=v(I,"DIV",{class:!0,title:!0});var S=R(l);i=O(S,t),S.forEach(s),r=N(I),n=v(I,"DIV",{class:!0});var P=R(n);o=O(P,f),P.forEach(s),c=N(I),d=v(I,"DIV",{class:!0});var Y=R(d);bt(_.$$.fragment,Y),Y.forEach(s),this.h()},h(){q(l,"class","itemName"),q(l,"title",a=`${e[28].types[e[64]].name} [${e[64]}]`),q(n,"class","qty"),q(d,"class","graph svelte-1u87si0")},m(I,S){D(I,l,S),u(l,i),D(I,r,S),D(I,n,S),u(n,o),D(I,c,S),D(I,d,S),ht(_,d,null),g=!0},p(I,S){var Y,X;e=I,(!g||S[0]&301989888)&&t!==(t=e[28].types[e[64]].name+"")&&ue(i,t),(!g||S[0]&301989888&&a!==(a=`${e[28].types[e[64]].name} [${e[64]}]`))&&q(l,"title",a),(!g||S[0]&33554432)&&f!==(f=((Y=e[25].materials[e[64]])==null?void 0:Y.quantity)+"")&&ue(o,f);const P={};S[0]&536870912&&(P.extents=e[29]),S[0]&33554432&&(P.quantity=(X=e[25].materials[e[64]])==null?void 0:X.quantity),S[0]&33554432&&(P.type_id=e[64]),S[0]&2&&(P.buyOverheadRate=e[1]),!m&&S[0]&33554464&&(m=!0,P.price=e[5][e[64]],he(()=>m=!1)),_.$set(P)},i(I){g||(W(_.$$.fragment,I),g=!0)},o(I){ne(_.$$.fragment,I),g=!1},d(I){I&&s(l),I&&s(r),I&&s(n),I&&s(c),I&&s(d),yt(_)}}}function vi(e){let l,t=e[61].name+"",i,a;return{c(){l=y("option"),i=M(t),this.h()},l(r){l=v(r,"OPTION",{});var n=R(l);i=O(n,t),n.forEach(s),this.h()},h(){l.__value=a=e[61].type_id,l.value=l.__value},m(r,n){D(r,l,n),u(l,i)},p(r,n){n[1]&1&&t!==(t=r[61].name+"")&&ue(i,t),n[1]&1&&a!==(a=r[61].type_id)&&(l.__value=a,l.value=l.__value)},d(r){r&&s(l)}}}function Wi(e){let l,t,i;return{c(){l=y("div"),t=L(),i=y("div"),this.h()},l(a){l=v(a,"DIV",{}),R(l).forEach(s),t=N(a),i=v(a,"DIV",{class:!0}),R(i).forEach(s),this.h()},h(){q(i,"class","graph svelte-1u87si0")},m(a,r){D(a,l,r),D(a,t,r),D(a,i,r)},p:Tt,i:Tt,o:Tt,d(a){a&&s(l),a&&s(t),a&&s(i)}}}function Xi(e){let l,t=1+"",i,a,r,n,f,o;function c(_){e[53](_)}let d={compact:!0,extents:e[29],quantity:1,type_id:e[6],buyOverheadRate:e[1]};return e[5][e[6]]!==void 0&&(d.price=e[5][e[6]]),n=new il({props:d}),me.push(()=>be(n,"price",c)),{c(){l=y("div"),i=M(t),a=L(),r=y("div"),mt(n.$$.fragment),this.h()},l(_){l=v(_,"DIV",{class:!0});var m=R(l);i=O(m,t),m.forEach(s),a=N(_),r=v(_,"DIV",{class:!0});var g=R(r);bt(n.$$.fragment,g),g.forEach(s),this.h()},h(){q(l,"class","qty"),q(r,"class","graph svelte-1u87si0")},m(_,m){D(_,l,m),u(l,i),D(_,a,m),D(_,r,m),ht(n,r,null),o=!0},p(_,m){const g={};m[0]&536870912&&(g.extents=_[29]),m[0]&64&&(g.type_id=_[6]),m[0]&2&&(g.buyOverheadRate=_[1]),!f&&m[0]&96&&(f=!0,g.price=_[5][_[6]],he(()=>f=!1)),n.$set(g)},i(_){o||(W(n.$$.fragment,_),o=!0)},o(_){ne(n.$$.fragment,_),o=!1},d(_){_&&s(l),_&&s(a),_&&s(r),yt(n)}}}function gi(e){var r,n;let l,t=((n=e[28].types[(r=e[58])==null?void 0:r.type_id])==null?void 0:n.name)+"",i,a;return{c(){l=y("option"),i=M(t),this.h()},l(f){l=v(f,"OPTION",{});var o=R(l);i=O(o,t),o.forEach(s),this.h()},h(){l.__value=a=e[58],l.value=l.__value},m(f,o){D(f,l,o),u(l,i)},p(f,o){var c,d;o[0]&268435464&&t!==(t=((d=f[28].types[(c=f[58])==null?void 0:c.type_id])==null?void 0:d.name)+"")&&ue(i,t),o[0]&8&&a!==(a=f[58])&&(l.__value=a,l.value=l.__value)},d(f){f&&s(l)}}}function $i(e){let l,t=1+"",i,a,r,n,f,o;function c(_){e[56](_)}let d={compact:!0,extents:e[29],quantity:1,type_id:e[4].type_id,buyOverheadRate:e[1]};return e[5][e[4].type_id]!==void 0&&(d.price=e[5][e[4].type_id]),n=new il({props:d}),me.push(()=>be(n,"price",c)),{c(){l=y("div"),i=M(t),a=L(),r=y("div"),mt(n.$$.fragment),this.h()},l(_){l=v(_,"DIV",{class:!0});var m=R(l);i=O(m,t),m.forEach(s),a=N(_),r=v(_,"DIV",{class:!0});var g=R(r);bt(n.$$.fragment,g),g.forEach(s),this.h()},h(){q(l,"class","qty"),q(r,"class","graph svelte-1u87si0")},m(_,m){D(_,l,m),u(l,i),D(_,a,m),D(_,r,m),ht(n,r,null),o=!0},p(_,m){const g={};m[0]&536870912&&(g.extents=_[29]),m[0]&16&&(g.type_id=_[4].type_id),m[0]&2&&(g.buyOverheadRate=_[1]),!f&&m[0]&48&&(f=!0,g.price=_[5][_[4].type_id],he(()=>f=!1)),n.$set(g)},i(_){o||(W(n.$$.fragment,_),o=!0)},o(_){ne(n.$$.fragment,_),o=!1},d(_){_&&s(l),_&&s(a),_&&s(r),yt(n)}}}function xi(e){let l,t,i,a,r,n,f;return{c(){l=y("div"),t=L(),i=y("div"),a=M("Blueprint cost per run "),r=y("input"),this.h()},l(o){l=v(o,"DIV",{}),R(l).forEach(s),t=N(o),i=v(o,"DIV",{class:!0});var c=R(i);a=O(c,"Blueprint cost per run "),r=v(c,"INPUT",{type:!0}),c.forEach(s),this.h()},h(){q(r,"type","number"),q(i,"class","graph svelte-1u87si0")},m(o,c){D(o,l,c),D(o,t,c),D(o,i,c),u(i,a),u(i,r),lt(r,e[7]),n||(f=Ne(r,"input",e[55]),n=!0)},p(o,c){c[0]&128&&Lt(r.value)!==o[7]&&lt(r,o[7])},i:Tt,o:Tt,d(o){o&&s(l),o&&s(t),o&&s(i),n=!1,f()}}}function er(e){var Kt,We,Ft;let l,t=((Kt=e[13])==null?void 0:Kt.name)+"",i,a,r,n,f,o,c,d=((We=e[14])==null?void 0:We.name)+"",_,m,g,C,U,V,w,I=((Ft=e[15])==null?void 0:Ft.name)+"",S,P,Y,X,ve,$,ie,J,ce,E,T,z,A,Z,x,ee,Ee,oe,pe,fe,Te,re,je,Ue,de,H,Ge,ze,Ve,ge,Xe,$e,Le,ot=bl(e[20])+"",gt,Ke,It,kt,j=bl(e[22])+"",Re,it,Me,xe,_e=bl(e[23])+"",Q,Ce,at,Be,rt=bl(100-e[21]*100)+"",Ze,qt,we,Je,Ae,Ie,ae,ke,ft,k,De,Mt,te,Jt,qe=vt(e[26])+"",nt,St,Yt,_t=Il(e[30])+"",et,ye,wt,ut,h=vt(e[12])+"",G,Pe,le,st,Rt=e[19]*100+"",Oe,At,Ut,zt,Qt=Math.ceil(Math.log(1-.9)/Math.log(1-e[19]))+"",Pt,ct,Ht,$t,rl,hl,el,Nt,nl=vt(e[0])+"",Se,tt,yl,Ml;function wl(p){e[46](p)}function Al(p){e[47](p)}function vl(p){e[48](p)}function Ct(p){e[49](p)}let Qe={activity:zl};e[8]!==void 0&&(Qe.activitySystemCostIndex=e[8]),e[9]!==void 0&&(Qe.activityTax=e[9]),e[10]!==void 0&&(Qe.structureRoleBonuses=e[10]),e[11]!==void 0&&(Qe.structureRigBonuses=e[11]),$=new Yl({props:Qe}),me.push(()=>be($,"activitySystemCostIndex",wl)),me.push(()=>be($,"activityTax",Al)),me.push(()=>be($,"structureRoleBonuses",vl)),me.push(()=>be($,"structureRigBonuses",Ct)),fe=new il({props:{compact:!0,extents:e[29],quantity:1,totalCost:e[26]}});let ul=Object.keys(e[25].materials).map(e[50]),Ye=[];for(let p=0;p<ul.length;p+=1)Ye[p]=yi(hi(e,ul,p));const Ul=p=>ne(Ye[p],1,1,()=>{Ye[p]=null});let al=Object.values(e[31]),Dt=[];for(let p=0;p<al.length;p+=1)Dt[p]=vi(bi(e,al,p));const sl=[Xi,Wi],Ot=[];function Fe(p,F){return p[6]?0:1}Je=Fe(e),Ae=Ot[Je]=sl[Je](e);let fl=e[3],Et=[];for(let p=0;p<fl.length;p+=1)Et[p]=gi(mi(e,fl,p));const b=[xi,$i],B=[];function pt(p,F){return p[27]?0:1}return k=pt(e),De=B[k]=b[k](e),{c(){l=y("label"),i=M(t),a=L(),r=y("input"),n=L(),f=y("br"),o=L(),c=y("label"),_=M(d),m=L(),g=y("input"),C=L(),U=y("br"),V=L(),w=y("label"),S=M(I),P=L(),Y=y("input"),X=L(),ve=y("p"),mt($.$$.fragment),T=y("br"),z=L(),A=y("div"),Z=y("div"),x=M("Job cost"),ee=L(),Ee=y("div"),oe=L(),pe=y("div"),mt(fe.$$.fragment),Te=L();for(let p=0;p<Ye.length;p+=1)Ye[p].c();re=L(),je=y("div"),Ue=y("span"),de=y("select"),H=y("option"),Ge=M("No decryptor");for(let p=0;p<Dt.length;p+=1)Dt[p].c();ze=L(),Ve=y("div"),ge=y("dl"),Xe=y("dt"),$e=M("Runs"),Le=y("dd"),gt=M(ot),Ke=y("dt"),It=M("ME"),kt=y("dd"),Re=M(j),it=y("dt"),Me=M("TE"),xe=y("dd"),Q=M(_e),Ce=y("dt"),at=M("Probability"),Be=y("dd"),Ze=M(rt),qt=M("%"),we=L(),Ae.c(),Ie=L(),ae=y("div"),ke=y("select");for(let p=0;p<Et.length;p+=1)Et[p].c();ft=L(),De.c(),Mt=L(),te=y("p"),Jt=M("Invention job cost: "),nt=M(qe),St=y("br"),Yt=M(`\r
    Invention job duration: `),et=M(_t),ye=y("br"),wt=M(`\r
    Invention cost per attempt: `),ut=y("b"),G=M(h),Pe=L(),le=y("p"),st=M("Chance of success: "),Oe=M(Rt),At=M("% "),Ut=y("br"),zt=M(`\r
    Expected invention attempts to get >=90% chance to get >=1 successes: `),Pt=M(Qt),ct=L(),Ht=y("br"),$t=M(`\r
    Expected Runs: `),rl=M(e[24]),hl=y("br"),el=M(`\r
    Expected cost per run: `),Nt=y("b"),Se=M(nl),this.h()},l(p){l=v(p,"LABEL",{});var F=R(l);i=O(F,t),a=N(F),r=v(F,"INPUT",{type:!0,min:!0,max:!0}),F.forEach(s),n=N(p),f=v(p,"BR",{}),o=N(p),c=v(p,"LABEL",{});var se=R(c);_=O(se,d),m=N(se),g=v(se,"INPUT",{type:!0,min:!0,max:!0}),se.forEach(s),C=N(p),U=v(p,"BR",{}),V=N(p),w=v(p,"LABEL",{});var Bt=R(w);S=O(Bt,I),P=N(Bt),Y=v(Bt,"INPUT",{type:!0,min:!0,max:!0}),Bt.forEach(s),X=N(p),ve=v(p,"P",{});var Gt=R(ve);bt($.$$.fragment,Gt),T=v(Gt,"BR",{}),Gt.forEach(s),z=N(p),A=v(p,"DIV",{class:!0});var He=R(A);Z=v(He,"DIV",{class:!0});var tl=R(Z);x=O(tl,"Job cost"),tl.forEach(s),ee=N(He),Ee=v(He,"DIV",{class:!0}),R(Ee).forEach(s),oe=N(He),pe=v(He,"DIV",{class:!0});var _l=R(pe);bt(fe.$$.fragment,_l),_l.forEach(s),Te=N(He);for(let xt=0;xt<Ye.length;xt+=1)Ye[xt].l(He);re=N(He),je=v(He,"DIV",{});var cl=R(je);Ue=v(cl,"SPAN",{class:!0});var K=R(Ue);de=v(K,"SELECT",{class:!0});var jt=R(de);H=v(jt,"OPTION",{});var kl=R(H);Ge=O(kl,"No decryptor"),kl.forEach(s);for(let xt=0;xt<Dt.length;xt+=1)Dt[xt].l(jt);jt.forEach(s),ze=N(K),Ve=v(K,"DIV",{class:!0});var El=R(Ve);ge=v(El,"DL",{class:!0});var Zt=R(ge);Xe=v(Zt,"DT",{});var ll=R(Xe);$e=O(ll,"Runs"),ll.forEach(s),Le=v(Zt,"DD",{});var Tl=R(Le);gt=O(Tl,ot),Tl.forEach(s),Ke=v(Zt,"DT",{});var Rl=R(Ke);It=O(Rl,"ME"),Rl.forEach(s),kt=v(Zt,"DD",{});var gl=R(kt);Re=O(gl,j),gl.forEach(s),it=v(Zt,"DT",{});var Xl=R(it);Me=O(Xl,"TE"),Xl.forEach(s),xe=v(Zt,"DD",{});var $l=R(xe);Q=O($l,_e),$l.forEach(s),Ce=v(Zt,"DT",{});var xl=R(Ce);at=O(xl,"Probability"),xl.forEach(s),Be=v(Zt,"DD",{});var Ql=R(Be);Ze=O(Ql,rt),qt=O(Ql,"%"),Ql.forEach(s),Zt.forEach(s),El.forEach(s),K.forEach(s),cl.forEach(s),we=N(He),Ae.l(He),Ie=N(He),ae=v(He,"DIV",{});var ei=R(ae);ke=v(ei,"SELECT",{class:!0});var ti=R(ke);for(let xt=0;xt<Et.length;xt+=1)Et[xt].l(ti);ti.forEach(s),ei.forEach(s),ft=N(He),De.l(He),He.forEach(s),Mt=N(p),te=v(p,"P",{});var ol=R(te);Jt=O(ol,"Invention job cost: "),nt=O(ol,qe),St=v(ol,"BR",{}),Yt=O(ol,`\r
    Invention job duration: `),et=O(ol,_t),ye=v(ol,"BR",{}),wt=O(ol,`\r
    Invention cost per attempt: `),ut=v(ol,"B",{});var li=R(ut);G=O(li,h),li.forEach(s),ol.forEach(s),Pe=N(p),le=v(p,"P",{});var Vt=R(le);st=O(Vt,"Chance of success: "),Oe=O(Vt,Rt),At=O(Vt,"% "),Ut=v(Vt,"BR",{}),zt=O(Vt,`\r
    Expected invention attempts to get >=90% chance to get >=1 successes: `),Pt=O(Vt,Qt),ct=N(Vt),Ht=v(Vt,"BR",{}),$t=O(Vt,`\r
    Expected Runs: `),rl=O(Vt,e[24]),hl=v(Vt,"BR",{}),el=O(Vt,`\r
    Expected cost per run: `),Nt=v(Vt,"B",{});var ii=R(Nt);Se=O(ii,nl),ii.forEach(s),Vt.forEach(s),this.h()},h(){q(r,"type","range"),q(r,"min",0),q(r,"max",5),q(g,"type","range"),q(g,"min",0),q(g,"max",5),q(Y,"type","range"),q(Y,"min",0),q(Y,"max",5),q(Z,"class","itemName"),q(Ee,"class","qty"),q(pe,"class","graph svelte-1u87si0"),H.__value=null,H.value=H.__value,q(de,"class","svelte-1u87si0"),e[6]===void 0&&Fl(()=>e[52].call(de)),q(ge,"class","svelte-1u87si0"),q(Ve,"class","overlay svelte-1u87si0"),q(Ue,"class","overlay-parent"),q(ke,"class","svelte-1u87si0"),e[4]===void 0&&Fl(()=>e[54].call(ke)),q(A,"class","breakdown")},m(p,F){D(p,l,F),u(l,i),u(l,a),u(l,r),lt(r,e[16]),D(p,n,F),D(p,f,F),D(p,o,F),D(p,c,F),u(c,_),u(c,m),u(c,g),lt(g,e[17]),D(p,C,F),D(p,U,F),D(p,V,F),D(p,w,F),u(w,S),u(w,P),u(w,Y),lt(Y,e[18]),D(p,X,F),D(p,ve,F),ht($,ve,null),u(ve,T),D(p,z,F),D(p,A,F),u(A,Z),u(Z,x),u(A,ee),u(A,Ee),u(A,oe),u(A,pe),ht(fe,pe,null),u(A,Te);for(let se=0;se<Ye.length;se+=1)Ye[se].m(A,null);u(A,re),u(A,je),u(je,Ue),u(Ue,de),u(de,H),u(H,Ge);for(let se=0;se<Dt.length;se+=1)Dt[se].m(de,null);pl(de,e[6]),u(Ue,ze),u(Ue,Ve),u(Ve,ge),u(ge,Xe),u(Xe,$e),u(ge,Le),u(Le,gt),u(ge,Ke),u(Ke,It),u(ge,kt),u(kt,Re),u(ge,it),u(it,Me),u(ge,xe),u(xe,Q),u(ge,Ce),u(Ce,at),u(ge,Be),u(Be,Ze),u(Be,qt),u(A,we),Ot[Je].m(A,null),u(A,Ie),u(A,ae),u(ae,ke);for(let se=0;se<Et.length;se+=1)Et[se].m(ke,null);pl(ke,e[4]),u(A,ft),B[k].m(A,null),D(p,Mt,F),D(p,te,F),u(te,Jt),u(te,nt),u(te,St),u(te,Yt),u(te,et),u(te,ye),u(te,wt),u(te,ut),u(ut,G),D(p,Pe,F),D(p,le,F),u(le,st),u(le,Oe),u(le,At),u(le,Ut),u(le,zt),u(le,Pt),u(le,ct),u(le,Ht),u(le,$t),u(le,rl),u(le,hl),u(le,el),u(le,Nt),u(Nt,Se),tt=!0,yl||(Ml=[Ne(r,"change",e[43]),Ne(r,"input",e[43]),Ne(g,"change",e[44]),Ne(g,"input",e[44]),Ne(Y,"change",e[45]),Ne(Y,"input",e[45]),Ne(de,"change",e[52]),Ne(ke,"change",e[54])],yl=!0)},p(p,F){var tl,_l,cl;(!tt||F[0]&8192)&&t!==(t=((tl=p[13])==null?void 0:tl.name)+"")&&ue(i,t),F[0]&65536&&lt(r,p[16]),(!tt||F[0]&16384)&&d!==(d=((_l=p[14])==null?void 0:_l.name)+"")&&ue(_,d),F[0]&131072&&lt(g,p[17]),(!tt||F[0]&32768)&&I!==(I=((cl=p[15])==null?void 0:cl.name)+"")&&ue(S,I),F[0]&262144&&lt(Y,p[18]);const se={};!ie&&F[0]&256&&(ie=!0,se.activitySystemCostIndex=p[8],he(()=>ie=!1)),!J&&F[0]&512&&(J=!0,se.activityTax=p[9],he(()=>J=!1)),!ce&&F[0]&1024&&(ce=!0,se.structureRoleBonuses=p[10],he(()=>ce=!1)),!E&&F[0]&2048&&(E=!0,se.structureRigBonuses=p[11],he(()=>E=!1)),$.$set(se);const Bt={};if(F[0]&536870912&&(Bt.extents=p[29]),F[0]&67108864&&(Bt.totalCost=p[26]),fe.$set(Bt),F[0]&838860834){ul=Object.keys(p[25].materials).map(p[50]);let K;for(K=0;K<ul.length;K+=1){const jt=hi(p,ul,K);Ye[K]?(Ye[K].p(jt,F),W(Ye[K],1)):(Ye[K]=yi(jt),Ye[K].c(),W(Ye[K],1),Ye[K].m(A,re))}for(Wt(),K=ul.length;K<Ye.length;K+=1)Ul(K);Xt()}if(F[1]&1){al=Object.values(p[31]);let K;for(K=0;K<al.length;K+=1){const jt=bi(p,al,K);Dt[K]?Dt[K].p(jt,F):(Dt[K]=vi(jt),Dt[K].c(),Dt[K].m(de,null))}for(;K<Dt.length;K+=1)Dt[K].d(1);Dt.length=al.length}F[0]&64|F[1]&1&&pl(de,p[6]),(!tt||F[0]&1048576)&&ot!==(ot=bl(p[20])+"")&&ue(gt,ot),(!tt||F[0]&4194304)&&j!==(j=bl(p[22])+"")&&ue(Re,j),(!tt||F[0]&8388608)&&_e!==(_e=bl(p[23])+"")&&ue(Q,_e),(!tt||F[0]&2097152)&&rt!==(rt=bl(100-p[21]*100)+"")&&ue(Ze,rt);let Gt=Je;if(Je=Fe(p),Je===Gt?Ot[Je].p(p,F):(Wt(),ne(Ot[Gt],1,1,()=>{Ot[Gt]=null}),Xt(),Ae=Ot[Je],Ae?Ae.p(p,F):(Ae=Ot[Je]=sl[Je](p),Ae.c()),W(Ae,1),Ae.m(A,Ie)),F[0]&268435464){fl=p[3];let K;for(K=0;K<fl.length;K+=1){const jt=mi(p,fl,K);Et[K]?Et[K].p(jt,F):(Et[K]=gi(jt),Et[K].c(),Et[K].m(ke,null))}for(;K<Et.length;K+=1)Et[K].d(1);Et.length=fl.length}F[0]&24&&pl(ke,p[4]);let He=k;k=pt(p),k===He?B[k].p(p,F):(Wt(),ne(B[He],1,1,()=>{B[He]=null}),Xt(),De=B[k],De?De.p(p,F):(De=B[k]=b[k](p),De.c()),W(De,1),De.m(A,null)),(!tt||F[0]&67108864)&&qe!==(qe=vt(p[26])+"")&&ue(nt,qe),(!tt||F[0]&1073741824)&&_t!==(_t=Il(p[30])+"")&&ue(et,_t),(!tt||F[0]&4096)&&h!==(h=vt(p[12])+"")&&ue(G,h),(!tt||F[0]&524288)&&Rt!==(Rt=p[19]*100+"")&&ue(Oe,Rt),(!tt||F[0]&524288)&&Qt!==(Qt=Math.ceil(Math.log(1-.9)/Math.log(1-p[19]))+"")&&ue(Pt,Qt),(!tt||F[0]&16777216)&&ue(rl,p[24]),(!tt||F[0]&1)&&nl!==(nl=vt(p[0])+"")&&ue(Se,nl)},i(p){if(!tt){W($.$$.fragment,p),W(fe.$$.fragment,p);for(let F=0;F<ul.length;F+=1)W(Ye[F]);W(Ae),W(De),tt=!0}},o(p){ne($.$$.fragment,p),ne(fe.$$.fragment,p),Ye=Ye.filter(Boolean);for(let F=0;F<Ye.length;F+=1)ne(Ye[F]);ne(Ae),ne(De),tt=!1},d(p){p&&s(l),p&&s(n),p&&s(f),p&&s(o),p&&s(c),p&&s(C),p&&s(U),p&&s(V),p&&s(w),p&&s(X),p&&s(ve),yt($),p&&s(z),p&&s(A),yt(fe),dl(Ye,p),dl(Dt,p),Ot[Je].d(),dl(Et,p),B[k].d(),p&&s(Mt),p&&s(te),p&&s(Pe),p&&s(le),yl=!1,Ol(Ml)}}}const tr=1124,lr=1112,ir=1113,rr=1114;let Ii=2,ki=4;function bl(e){return`${e>=0?"+":""}${Math.round(e)}`}function nr(e,l,t){let i,a,r,n,f,o,c,d=Tt,_=()=>(d(),d=jl(w,Q=>t(39,c=Q)),w),m,g,C,U;dt(e,Bl,Q=>t(28,o=Q)),dt(e,Jl,Q=>t(41,g=Q)),dt(e,Ll,Q=>t(42,C=Q)),dt(e,Fi,Q=>t(31,U=Q)),e.$$.on_destroy.push(()=>d());let V=Sl("currentCharacter");dt(e,V,Q=>t(40,m=Q));let w,{blueprintToInvent:I=null}=l,S=[],P=S[0];function Y(Q){var Ce;return o.categories[9].groups[(Ce=o.types[Q])==null?void 0:Ce.group_id]!=null}let X={},{brokerFeeRate:ve=.0151114234532}=l,$,ie=0,J,ce,E,T,z,A=0,Z,x,ee,Ee=3,oe=3,pe=3,fe=.3,Te,re,je,Ue,{productME:de=Ii}=l,{productTE:H=ki}=l,{productRuns:Ge=1}=l,{expectedCostPerRun:ze=0}=l,{extents:Ve=null}=l,ge=[0,1e6];function Xe(){Ee=Lt(this.value),t(16,Ee),t(2,w),t(40,m),t(39,c),t(25,i),t(28,o),t(15,ee),t(13,Z),t(14,x),t(4,P),t(3,S),t(42,C),t(36,I)}function $e(){oe=Lt(this.value),t(17,oe),t(2,w),t(40,m),t(39,c),t(25,i),t(28,o),t(15,ee),t(13,Z),t(14,x),t(4,P),t(3,S),t(42,C),t(36,I)}function Le(){pe=Lt(this.value),t(18,pe),t(2,w),t(40,m),t(39,c),t(25,i),t(28,o),t(15,ee),t(13,Z),t(14,x),t(4,P),t(3,S),t(42,C),t(36,I)}function ot(Q){ce=Q,t(8,ce)}function gt(Q){E=Q,t(9,E)}function Ke(Q){T=Q,t(10,T)}function It(Q){z=Q,t(11,z)}const kt=Q=>parseInt(Q);function j(Q,Ce){e.$$.not_equal(X[Ce],Q)&&(X[Ce]=Q,t(5,X))}function Re(){$=Gl(this),t(6,$)}function it(Q){e.$$.not_equal(X[$],Q)&&(X[$]=Q,t(5,X))}function Me(){P=Gl(this),t(4,P),t(3,S),t(42,C),t(36,I),t(3,S),t(42,C),t(36,I)}function xe(){ie=Lt(this.value),t(7,ie),t(27,a),t(5,X),t(4,P),t(3,S),t(42,C),t(36,I)}function _e(Q){e.$$.not_equal(X[P.type_id],Q)&&(X[P.type_id]=Q,t(5,X))}return e.$$set=Q=>{"blueprintToInvent"in Q&&t(36,I=Q.blueprintToInvent),"brokerFeeRate"in Q&&t(1,ve=Q.brokerFeeRate),"productME"in Q&&t(34,de=Q.productME),"productTE"in Q&&t(35,H=Q.productTE),"productRuns"in Q&&t(33,Ge=Q.productRuns),"expectedCostPerRun"in Q&&t(0,ze=Q.expectedCostPerRun),"extents"in Q&&t(37,Ve=Q.extents)},e.$$.update=()=>{var Q,Ce,at,Be,rt,Ze,qt,we,Je,Ae;if(e.$$.dirty[1]&2080&&t(3,S=Object.values(C.types).filter(Ie=>{var ae;return(ae=Ie.activities[zl])==null?void 0:ae.products[I==null?void 0:I.type_id]})),e.$$.dirty[0]&24&&S.length>=1&&S.indexOf(P)===-1&&t(4,P=S[0]),e.$$.dirty[0]&16&&t(25,i=P==null?void 0:P.activities[zl]),e.$$.dirty[0]&16&&t(27,a=Y(P==null?void 0:P.type_id)),e.$$.dirty[0]&134217776&&(a||t(7,ie=X[P.type_id])),e.$$.dirty[1]&1184){t(38,J=0);let Ie=I.activities[ql];for(let ae in Ie.materials)t(38,J+=Ie.materials[ae].quantity*((Ce=(Q=g[ae])==null?void 0:Q.adjusted_price)!=null?Ce:0))}if(e.$$.dirty[0]&3840|e.$$.dirty[1]&128&&t(26,r=J*ce*.02*(1+((at=T==null?void 0:T.jobCostModifier)!=null?at:0)/100)*(1+((Be=z==null?void 0:z.costReductionBonus)!=null?Be:0)/100)*(1+E/100)),e.$$.dirty[0]&100667616&&(t(12,A=0),i&&(t(12,A+=ie),t(12,A+=Zi(Object.values(i.materials),Ie=>X[Ie.materialTypeID]*Ie.quantity)),t(12,A+=(rt=X[$])!=null?rt:0),t(12,A+=r))),e.$$.dirty[0]&33557504|e.$$.dirty[1]&256&&t(30,n=i.time*(1-.03*(((Ze=c==null?void 0:c.skills.find(Ie=>Ie.skill_id===ui))==null?void 0:Ze.active_skill_level)||0))*(1+((qt=T==null?void 0:T.jobDurationModifier)!=null?qt:0)/100)*(1+((we=z==null?void 0:z.timeReductionBonus)!=null?we:0)/100)),e.$$.dirty[0]&302047236|e.$$.dirty[1]&768){let ae=function(ft){var k;return((k=c==null?void 0:c.skills.find(De=>De.skill_id===ft))==null?void 0:k.active_skill_level)||0},Ie=!1;w!==Vl[m]&&(_(t(2,w=Vl[m])),Ie=!0);let ke=!1;for(let ft of Object.values(i==null?void 0:i.requiredSkills)){let k=o.types[ft.type_id];if(k.name.indexOf("Encryption")>=0){(Ie||(ee==null?void 0:ee.type_id)!==k.type_id)&&(t(15,ee=k),t(18,pe=ae(ee.type_id)));continue}ke?(Ie||(x==null?void 0:x.type_id)!==k.type_id)&&(t(14,x=k),t(17,oe=ae(x.type_id))):((Ie||(Z==null?void 0:Z.type_id)!==k.type_id)&&(t(13,Z=k),t(16,Ee=ae(Z.type_id))),ke=!0)}}e.$$.dirty[0]&64&&($?Gi($).then(Ie=>{t(20,Te=Ie.dogma_attributes.find(ae=>ae.attribute_id==tr).value),t(21,re=Ie.dogma_attributes.find(ae=>ae.attribute_id==lr).value),t(22,je=Ie.dogma_attributes.find(ae=>ae.attribute_id==ir).value),t(23,Ue=Ie.dogma_attributes.find(ae=>ae.attribute_id==rr).value)}):(t(20,Te=0),t(21,re=1),t(22,je=0),t(23,Ue=0))),e.$$.dirty[0]&36110336|e.$$.dirty[1]&32&&t(19,fe=((Je=i==null?void 0:i.products[I.type_id])==null?void 0:Je.probability)*(1+(Ee+oe)/30+pe/40)*re),e.$$.dirty[0]&12582912&&(t(34,de=Ii+je),t(35,H=ki+Ue)),e.$$.dirty[0]&34603008|e.$$.dirty[1]&36&&(t(33,Ge=((Ae=i==null?void 0:i.products[I.type_id])==null?void 0:Ae.quantity)+Te),isNaN(Ge)&&t(33,Ge=1)),e.$$.dirty[0]&524288|e.$$.dirty[1]&4&&t(24,f=Ge*fe),e.$$.dirty[0]&16781313&&(t(0,ze=A/f),isNaN(ze)&&t(0,ze=0)),e.$$.dirty[0]&4096|e.$$.dirty[1]&64&&t(29,ge=Ve||[0,A*1.5])},[ze,ve,w,S,P,X,$,ie,ce,E,T,z,A,Z,x,ee,Ee,oe,pe,fe,Te,re,je,Ue,f,i,r,a,o,ge,n,U,V,Ge,de,H,I,Ve,J,c,m,g,C,Xe,$e,Le,ot,gt,Ke,It,kt,j,Re,it,Me,xe,_e]}class ur extends Cl{constructor(l){super();Dl(this,l,nr,er,Pl,{blueprintToInvent:36,brokerFeeRate:1,productME:34,productTE:35,productRuns:33,expectedCostPerRun:0,extents:37},null,[-1,-1,-1])}}function Ei(e,l,t){const i=e.slice();return i[50]=l[t],i[51]=l,i[52]=t,i}function sr(e){var r;let l,t=((r=e[23].types[e[2]])==null?void 0:r.name)+"",i,a;return{c(){l=y("div"),i=M(t),this.h()},l(n){l=v(n,"DIV",{class:!0,title:!0});var f=R(l);i=O(f,t),f.forEach(s),this.h()},h(){var n;q(l,"class","itemName"),q(l,"title",a=`${(n=e[23].types[e[2]])==null?void 0:n.name} [${e[2]}]`)},m(n,f){D(n,l,f),u(l,i)},p(n,f){var o,c;f[0]&8388612&&t!==(t=((o=n[23].types[n[2]])==null?void 0:o.name)+"")&&ue(i,t),f[0]&8388612&&a!==(a=`${(c=n[23].types[n[2]])==null?void 0:c.name} [${n[2]}]`)&&q(l,"title",a)},d(n){n&&s(l)}}}function or(e){let l;return{c(){l=y("div")},l(t){l=v(t,"DIV",{}),R(l).forEach(s)},m(t,i){D(t,l,i)},p:Tt,d(t){t&&s(l)}}}function Ti(e){let l,t,i,a,r;return{c(){l=y("label"),t=y("input"),i=M(" Override"),this.h()},l(n){l=v(n,"LABEL",{});var f=R(l);t=v(f,"INPUT",{type:!0}),i=O(f," Override"),f.forEach(s),this.h()},h(){q(t,"type","checkbox")},m(n,f){D(n,l,f),u(l,t),t.checked=e[8],u(l,i),a||(r=Ne(t,"change",e[38]),a=!0)},p(n,f){f[0]&256&&(t.checked=n[8])},d(n){n&&s(l),a=!1,r()}}}function Ri(e){let l,t,i,a,r,n;const f=[fr,ar],o=[];function c(d,_){return(t==null||_[0]&786432)&&(t=!!Hl(d[50],d[19]).activity),t?0:1}return i=c(e,[-1,-1]),a=o[i]=f[i](e),{c(){l=y("div"),a.c(),r=L(),this.h()},l(d){l=v(d,"DIV",{class:!0});var _=R(l);a.l(_),r=N(_),_.forEach(s),this.h()},h(){q(l,"class","subItem")},m(d,_){D(d,l,_),o[i].m(l,null),u(l,r),n=!0},p(d,_){let m=i;i=c(d,_),i===m?o[i].p(d,_):(Wt(),ne(o[m],1,1,()=>{o[m]=null}),Xt(),a=o[i],a?a.p(d,_):(a=o[i]=f[i](d),a.c()),W(a,1),a.m(l,r))},i(d){n||(W(a),n=!0)},o(d){ne(a),n=!1},d(d){d&&s(l),o[i].d()}}}function ar(e){var a;let l,t=((a=e[23].types[e[50]])==null?void 0:a.name)+"",i;return{c(){l=M("Could not find industry details for "),i=M(t)},l(r){l=O(r,"Could not find industry details for "),i=O(r,t)},m(r,n){D(r,l,n),D(r,i,n)},p(r,n){var f;n[0]&8650752&&t!==(t=((f=r[23].types[r[50]])==null?void 0:f.name)+"")&&ue(i,t)},i:Tt,o:Tt,d(r){r&&s(l),r&&s(i)}}}function fr(e){let l,t,i,a;function r(o){e[47](o,e[50])}function n(o){e[48](o)}let f={productTypeId:e[50],requiredQuantity:e[18].materialQuantity(e[50]),defaultLocationId:e[21],compact:!0};return e[20][e[50]]!==void 0&&(f.unitCost=e[20][e[50]]),e[1]!==void 0&&(f.producedItems=e[1]),l=new Wl({props:f}),me.push(()=>be(l,"unitCost",r)),me.push(()=>be(l,"producedItems",n)),{c(){mt(l.$$.fragment)},l(o){bt(l.$$.fragment,o)},m(o,c){ht(l,o,c),a=!0},p(o,c){e=o;const d={};c[0]&262144&&(d.productTypeId=e[50]),c[0]&262144&&(d.requiredQuantity=e[18].materialQuantity(e[50])),c[0]&2097152&&(d.defaultLocationId=e[21]),!t&&c[0]&1310720&&(t=!0,d.unitCost=e[20][e[50]],he(()=>t=!1)),!i&&c[0]&2&&(i=!0,d.producedItems=e[1],he(()=>i=!1)),l.$set(d)},i(o){a||(W(l.$$.fragment,o),a=!0)},o(o){ne(l.$$.fragment,o),a=!1},d(o){yt(l,o)}}}function Ci(e){var ce;let l,t,i,a,r,n,f=((ce=e[23].types[e[50]])==null?void 0:ce.name)+"",o,c,d,_,m=e[18].materialQuantity(e[50])+"",g,C,U,V,w,I,S,P,Y,X;function ve(){e[45].call(i,e[50])}function $(E){e[46](E,e[50])}let ie={extents:e[16],quantity:e[18].materialQuantity(e[50]),type_id:e[50],overridePrice:e[1][e[50]]?e[20][e[50]]:void 0,buyOverheadRate:e[5],totalCost:e[1][e[50]]?e[20][e[50]]*e[18].materialQuantity(e[50]):null,compact:!0};e[9][e[50]]!==void 0&&(ie.price=e[9][e[50]]),V=new il({props:ie}),me.push(()=>be(V,"price",$));let J=e[1][e[50]]&&Ri(e);return{c(){l=y("div"),t=y("label"),i=y("input"),r=L(),n=y("span"),o=M(f),d=L(),_=y("div"),g=M(m),C=L(),U=y("div"),mt(V.$$.fragment),I=L(),J&&J.c(),S=ml(),this.h()},l(E){l=v(E,"DIV",{class:!0});var T=R(l);t=v(T,"LABEL",{});var z=R(t);i=v(z,"INPUT",{type:!0}),r=N(z),n=v(z,"SPAN",{title:!0});var A=R(n);o=O(A,f),A.forEach(s),z.forEach(s),T.forEach(s),d=N(E),_=v(E,"DIV",{class:!0});var Z=R(_);g=O(Z,m),Z.forEach(s),C=N(E),U=v(E,"DIV",{class:!0});var x=R(U);bt(V.$$.fragment,x),x.forEach(s),I=N(E),J&&J.l(E),S=ml(),this.h()},h(){var E;q(i,"type","checkbox"),i.disabled=a=!si(e[50],e[19]),q(n,"title",c=`${(E=e[23].types[e[50]])==null?void 0:E.name} [${e[50]}]`),q(l,"class","itemName"),q(_,"class","qty"),q(U,"class","graph")},m(E,T){D(E,l,T),u(l,t),u(t,i),i.checked=e[1][e[50]],u(t,r),u(t,n),u(n,o),D(E,d,T),D(E,_,T),u(_,g),D(E,C,T),D(E,U,T),ht(V,U,null),D(E,I,T),J&&J.m(E,T),D(E,S,T),P=!0,Y||(X=Ne(i,"change",ve),Y=!0)},p(E,T){var A,Z;e=E,(!P||T[0]&786432&&a!==(a=!si(e[50],e[19])))&&(i.disabled=a),T[0]&262146&&(i.checked=e[1][e[50]]),(!P||T[0]&8650752)&&f!==(f=((A=e[23].types[e[50]])==null?void 0:A.name)+"")&&ue(o,f),(!P||T[0]&8650752&&c!==(c=`${(Z=e[23].types[e[50]])==null?void 0:Z.name} [${e[50]}]`))&&q(n,"title",c),(!P||T[0]&262144)&&m!==(m=e[18].materialQuantity(e[50])+"")&&ue(g,m);const z={};T[0]&65536&&(z.extents=e[16]),T[0]&262144&&(z.quantity=e[18].materialQuantity(e[50])),T[0]&262144&&(z.type_id=e[50]),T[0]&1310722&&(z.overridePrice=e[1][e[50]]?e[20][e[50]]:void 0),T[0]&32&&(z.buyOverheadRate=e[5]),T[0]&1310722&&(z.totalCost=e[1][e[50]]?e[20][e[50]]*e[18].materialQuantity(e[50]):null),!w&&T[0]&262656&&(w=!0,z.price=e[9][e[50]],he(()=>w=!1)),V.$set(z),e[1][e[50]]?J?(J.p(e,T),T[0]&262146&&W(J,1)):(J=Ri(e),J.c(),W(J,1),J.m(S.parentNode,S)):J&&(Wt(),ne(J,1,1,()=>{J=null}),Xt())},i(E){P||(W(V.$$.fragment,E),W(J),P=!0)},o(E){ne(V.$$.fragment,E),ne(J),P=!1},d(E){E&&s(l),E&&s(d),E&&s(_),E&&s(C),E&&s(U),yt(V),E&&s(I),J&&J.d(E),E&&s(S),Y=!1,X()}}}function _r(e){var ut;let l,t,i,a=e[18].producedQuantity+"",r,n,f,o,c=vt(e[9][e[2]])+"",d,_,m=Nl(e[18].profit)+"",g,C,U,V,w,I,S,P,Y,X,ve,$=vt(e[0])+"",ie,J,ce=vt(e[18].totalCost)+"",E,T,z,A,Z,x,ee,Ee,oe,pe,fe,Te,re,je,Ue,de,H,Ge,ze,Ve,ge,Xe,$e,Le,ot,gt,Ke,It,kt,j,Re=Il(e[18].jobDuration)+"",it,Me,xe,_e,Q,Ce,at,Be,rt,Ze,qt,we,Je,Ae;function Ie(h,G){return h[6]?or:sr}let ae=Ie(e),ke=ae(e);function ft(h){e[33](h)}function k(h){e[34](h)}function De(h){e[35](h)}let Mt={extents:e[16],quantity:e[18].producedQuantity,type_id:e[2],buyOverheadRate:-e[4],sellOverheadRate:-e[5]-e[4],totalCost:e[18].totalCost};e[9][e[2]]!==void 0&&(Mt.price=e[9][e[2]]),e[14]!==void 0&&(Mt.lowestSellPrice=e[14]),e[15]!==void 0&&(Mt.highestBuyPrice=e[15]),w=new il({props:Mt}),me.push(()=>be(w,"price",ft)),me.push(()=>be(w,"lowestSellPrice",k)),me.push(()=>be(w,"highestBuyPrice",De));let te=e[3]!==null&&Ti(e);function Jt(h){e[39](h)}function qe(h){e[40](h)}function nt(h){e[41](h)}function St(h){e[42](h)}function Yt(h){e[43](h)}let _t={activity:Kl};e[21]!==void 0&&(_t.value=e[21]),e[10]!==void 0&&(_t.activitySystemCostIndex=e[10]),e[11]!==void 0&&(_t.activityTax=e[11]),e[12]!==void 0&&(_t.structureRoleBonuses=e[12]),e[13]!==void 0&&(_t.structureRigBonuses=e[13]),H=new Yl({props:_t}),me.push(()=>be(H,"value",Jt)),me.push(()=>be(H,"activitySystemCostIndex",qe)),me.push(()=>be(H,"activityTax",nt)),me.push(()=>be(H,"structureRoleBonuses",St)),me.push(()=>be(H,"structureRigBonuses",Yt)),Ze=new il({props:{compact:!0,extents:e[16],quantity:e[18].producedQuantity,totalCost:e[18].jobCost}});let et=Object.keys(((ut=e[18].activity)==null?void 0:ut.materials)||{}).map(e[44]),ye=[];for(let h=0;h<et.length;h+=1)ye[h]=Ci(Ei(e,et,h));const wt=h=>ne(ye[h],1,1,()=>{ye[h]=null});return{c(){l=y("div"),ke.c(),t=L(),i=y("div"),r=M(a),n=L(),f=y("div"),o=M(`Unit price\r
        `),d=M(c),_=M(`\r
        Total Profit \r
        `),g=M(m),C=L(),U=y("br"),V=L(),mt(w.$$.fragment),Y=L(),X=y("br"),ve=M(`\r
\r
        Unit cost `),ie=M($),J=M(" Total cost "),E=M(ce),z=L(),A=y("div"),Z=M("Runs "),x=y("input"),Ee=L(),oe=y("input"),fe=L(),te&&te.c(),Te=L(),re=y("p"),je=y("b"),Ue=M("Facility"),de=L(),mt(H.$$.fragment),$e=L(),Le=y("b"),ot=M("Production"),gt=L(),Ke=y("dl"),It=y("dt"),kt=M("Time"),j=y("dd"),it=M(Re),xe=L(),_e=y("div"),Q=y("div"),Ce=M("Job cost"),at=y("div"),Be=L(),rt=y("div"),mt(Ze.$$.fragment),qt=L();for(let h=0;h<ye.length;h+=1)ye[h].c();this.h()},l(h){l=v(h,"DIV",{class:!0});var G=R(l);ke.l(G),t=N(G),i=v(G,"DIV",{class:!0});var Pe=R(i);r=O(Pe,a),Pe.forEach(s),n=N(G),f=v(G,"DIV",{class:!0});var le=R(f);o=O(le,`Unit price\r
        `),d=O(le,c),_=O(le,`\r
        Total Profit \r
        `),g=O(le,m),C=N(le),U=v(le,"BR",{}),V=N(le),bt(w.$$.fragment,le),Y=N(le),X=v(le,"BR",{}),ve=O(le,`\r
\r
        Unit cost `),ie=O(le,$),J=O(le," Total cost "),E=O(le,ce),le.forEach(s),G.forEach(s),z=N(h),A=v(h,"DIV",{class:!0});var st=R(A);Z=O(st,"Runs "),x=v(st,"INPUT",{type:!0,min:!0}),Ee=N(st),oe=v(st,"INPUT",{type:!0}),fe=N(st),te&&te.l(st),st.forEach(s),Te=N(h),re=v(h,"P",{});var Rt=R(re);je=v(Rt,"B",{});var Oe=R(je);Ue=O(Oe,"Facility"),Oe.forEach(s),de=N(Rt),bt(H.$$.fragment,Rt),Rt.forEach(s),$e=N(h),Le=v(h,"B",{});var At=R(Le);ot=O(At,"Production"),At.forEach(s),gt=N(h),Ke=v(h,"DL",{});var Ut=R(Ke);It=v(Ut,"DT",{});var zt=R(It);kt=O(zt,"Time"),zt.forEach(s),j=v(Ut,"DD",{title:!0});var Qt=R(j);it=O(Qt,Re),Qt.forEach(s),Ut.forEach(s),xe=N(h),_e=v(h,"DIV",{class:!0});var Pt=R(_e);Q=v(Pt,"DIV",{});var ct=R(Q);Ce=O(ct,"Job cost"),ct.forEach(s),at=v(Pt,"DIV",{}),R(at).forEach(s),Be=N(Pt),rt=v(Pt,"DIV",{class:!0});var Ht=R(rt);bt(Ze.$$.fragment,Ht),Ht.forEach(s),qt=N(Pt);for(let $t=0;$t<ye.length;$t+=1)ye[$t].l(Pt);Pt.forEach(s),this.h()},h(){q(i,"class","qty"),q(f,"class","graph"),q(l,"class",T=`breakdown ${e[6]?"":"summary"}`),q(x,"type","range"),q(x,"min",1),x.disabled=ee=e[3]!==null&&!e[8],q(oe,"type","number"),oe.disabled=pe=e[3]!==null&&!e[8],q(A,"class","combinedInput"),q(j,"title",Me=`${e[18].jobDuration}s`),q(rt,"class","graph"),q(_e,"class","breakdown")},m(h,G){D(h,l,G),ke.m(l,null),u(l,t),u(l,i),u(i,r),u(l,n),u(l,f),u(f,o),u(f,d),u(f,_),u(f,g),u(f,C),u(f,U),u(f,V),ht(w,f,null),u(f,Y),u(f,X),u(f,ve),u(f,ie),u(f,J),u(f,E),D(h,z,G),D(h,A,G),u(A,Z),u(A,x),lt(x,e[7]),u(A,Ee),u(A,oe),lt(oe,e[7]),u(A,fe),te&&te.m(A,null),D(h,Te,G),D(h,re,G),u(re,je),u(je,Ue),u(re,de),ht(H,re,null),D(h,$e,G),D(h,Le,G),u(Le,ot),D(h,gt,G),D(h,Ke,G),u(Ke,It),u(It,kt),u(Ke,j),u(j,it),D(h,xe,G),D(h,_e,G),u(_e,Q),u(Q,Ce),u(_e,at),u(_e,Be),u(_e,rt),ht(Ze,rt,null),u(_e,qt);for(let Pe=0;Pe<ye.length;Pe+=1)ye[Pe].m(_e,null);we=!0,Je||(Ae=[Ne(x,"change",e[36]),Ne(x,"input",e[36]),Ne(oe,"input",e[37])],Je=!0)},p(h,G){var Rt;ae===(ae=Ie(h))&&ke?ke.p(h,G):(ke.d(1),ke=ae(h),ke&&(ke.c(),ke.m(l,t))),(!we||G[0]&262144)&&a!==(a=h[18].producedQuantity+"")&&ue(r,a),(!we||G[0]&516)&&c!==(c=vt(h[9][h[2]])+"")&&ue(d,c),(!we||G[0]&262144)&&m!==(m=Nl(h[18].profit)+"")&&ue(g,m);const Pe={};G[0]&65536&&(Pe.extents=h[16]),G[0]&262144&&(Pe.quantity=h[18].producedQuantity),G[0]&4&&(Pe.type_id=h[2]),G[0]&16&&(Pe.buyOverheadRate=-h[4]),G[0]&48&&(Pe.sellOverheadRate=-h[5]-h[4]),G[0]&262144&&(Pe.totalCost=h[18].totalCost),!I&&G[0]&516&&(I=!0,Pe.price=h[9][h[2]],he(()=>I=!1)),!S&&G[0]&16384&&(S=!0,Pe.lowestSellPrice=h[14],he(()=>S=!1)),!P&&G[0]&32768&&(P=!0,Pe.highestBuyPrice=h[15],he(()=>P=!1)),w.$set(Pe),(!we||G[0]&1)&&$!==($=vt(h[0])+"")&&ue(ie,$),(!we||G[0]&262144)&&ce!==(ce=vt(h[18].totalCost)+"")&&ue(E,ce),(!we||G[0]&64&&T!==(T=`breakdown ${h[6]?"":"summary"}`))&&q(l,"class",T),(!we||G[0]&264&&ee!==(ee=h[3]!==null&&!h[8]))&&(x.disabled=ee),G[0]&128&&lt(x,h[7]),(!we||G[0]&264&&pe!==(pe=h[3]!==null&&!h[8]))&&(oe.disabled=pe),G[0]&128&&Lt(oe.value)!==h[7]&&lt(oe,h[7]),h[3]!==null?te?te.p(h,G):(te=Ti(h),te.c(),te.m(A,null)):te&&(te.d(1),te=null);const le={};!Ge&&G[0]&2097152&&(Ge=!0,le.value=h[21],he(()=>Ge=!1)),!ze&&G[0]&1024&&(ze=!0,le.activitySystemCostIndex=h[10],he(()=>ze=!1)),!Ve&&G[0]&2048&&(Ve=!0,le.activityTax=h[11],he(()=>Ve=!1)),!ge&&G[0]&4096&&(ge=!0,le.structureRoleBonuses=h[12],he(()=>ge=!1)),!Xe&&G[0]&8192&&(Xe=!0,le.structureRigBonuses=h[13],he(()=>Xe=!1)),H.$set(le),(!we||G[0]&262144)&&Re!==(Re=Il(h[18].jobDuration)+"")&&ue(it,Re),(!we||G[0]&262144&&Me!==(Me=`${h[18].jobDuration}s`))&&q(j,"title",Me);const st={};if(G[0]&65536&&(st.extents=h[16]),G[0]&262144&&(st.quantity=h[18].producedQuantity),G[0]&262144&&(st.totalCost=h[18].jobCost),Ze.$set(st),G[0]&12386850){et=Object.keys(((Rt=h[18].activity)==null?void 0:Rt.materials)||{}).map(h[44]);let Oe;for(Oe=0;Oe<et.length;Oe+=1){const At=Ei(h,et,Oe);ye[Oe]?(ye[Oe].p(At,G),W(ye[Oe],1)):(ye[Oe]=Ci(At),ye[Oe].c(),W(ye[Oe],1),ye[Oe].m(_e,null))}for(Wt(),Oe=et.length;Oe<ye.length;Oe+=1)wt(Oe);Xt()}},i(h){if(!we){W(w.$$.fragment,h),W(H.$$.fragment,h),W(Ze.$$.fragment,h);for(let G=0;G<et.length;G+=1)W(ye[G]);we=!0}},o(h){ne(w.$$.fragment,h),ne(H.$$.fragment,h),ne(Ze.$$.fragment,h),ye=ye.filter(Boolean);for(let G=0;G<ye.length;G+=1)ne(ye[G]);we=!1},d(h){h&&s(l),ke.d(),yt(w),h&&s(z),h&&s(A),te&&te.d(),h&&s(Te),h&&s(re),yt(H),h&&s($e),h&&s(Le),h&&s(gt),h&&s(Ke),h&&s(xe),h&&s(_e),yt(Ze),dl(ye,h),Je=!1,Ol(Ae)}}}const Di=2660;function cr(e,l,t){let i,a,r,n=Tt,f=()=>(n(),n=jl(i,j=>t(18,r=j)),i),o,c,d,_=Tt,m=()=>(_(),_=jl(a,j=>t(30,d=j)),a),g,C,U,V;dt(e,Jl,j=>t(28,o=j)),dt(e,ni,j=>t(31,g=j)),dt(e,Ll,j=>t(19,U=j)),dt(e,Bl,j=>t(23,V=j)),e.$$.on_destroy.push(()=>n()),e.$$.on_destroy.push(()=>_());let{productTypeId:w=null}=l,{requiredQuantity:I=null}=l,S=1,P=!1,Y={},{producedItems:X={}}=l,ve={},$=Sl("currentCharacter");dt(e,$,j=>t(32,C=j));let ie=Sl("locations");dt(e,ie,j=>t(29,c=j));let J=Ni({});Li("locations",J);let{defaultLocationId:ce=null}=l,E=ce,T=.05,z=10,A,Z,{unitCost:x=0}=l,{salesTaxRate:ee=.036}=l,{brokerFeeRate:Ee=.0113709973928}=l,{compact:oe=!1}=l,{extents:pe=null}=l,fe,Te,re=[0,1e3];function je(j){e.$$.not_equal(Y[w],j)&&(Y[w]=j,t(9,Y),t(17,i),t(2,w),t(19,U))}function Ue(j){fe=j,t(14,fe)}function de(j){Te=j,t(15,Te)}function H(){S=Lt(this.value),t(7,S),t(3,I),t(8,P),t(17,i),t(18,r),t(2,w),t(19,U)}function Ge(){S=Lt(this.value),t(7,S),t(3,I),t(8,P),t(17,i),t(18,r),t(2,w),t(19,U)}function ze(){P=this.checked,t(8,P)}function Ve(j){E=j,t(21,E)}function ge(j){T=j,t(10,T)}function Xe(j){z=j,t(11,z)}function $e(j){A=j,t(12,A)}function Le(j){Z=j,t(13,Z)}const ot=j=>parseInt(j);function gt(j){X[j]=this.checked,t(1,X)}function Ke(j,Re){e.$$.not_equal(Y[Re],j)&&(Y[Re]=j,t(9,Y),t(17,i),t(2,w),t(19,U))}function It(j,Re){e.$$.not_equal(ve[Re],j)&&(ve[Re]=j,t(20,ve))}function kt(j){X=j,t(1,X)}return e.$$set=j=>{"productTypeId"in j&&t(2,w=j.productTypeId),"requiredQuantity"in j&&t(3,I=j.requiredQuantity),"producedItems"in j&&t(1,X=j.producedItems),"defaultLocationId"in j&&t(26,ce=j.defaultLocationId),"unitCost"in j&&t(0,x=j.unitCost),"salesTaxRate"in j&&t(4,ee=j.salesTaxRate),"brokerFeeRate"in j&&t(5,Ee=j.brokerFeeRate),"compact"in j&&t(6,oe=j.compact),"extents"in j&&t(27,pe=j.extents)},e.$$.update=()=>{var j,Re,it;if(e.$$.dirty[0]&524292&&f(t(17,i=wi(w))),e.$$.dirty[0]&393608&&(I===null||P?i.update({runs:S}):(i.update({requiredQuantity:I}),t(7,S=r.runs))),e.$$.dirty[1]&2&&m(t(22,a=Vl[C])),e.$$.dirty[0]&1074135040|e.$$.dirty[1]&1){let xe=Object.values((Re=(j=r.activity)==null?void 0:j.requiredSkills)!=null?Re:{}).map(Q=>Q.type_id).filter(Q=>g.types[Q]!=null).filter(Q=>g.types[Q][Di]!=null).map(Q=>{var Ce,at;return{value:g.types[Q][Di].value*((at=(Ce=d==null?void 0:d.skills.find(Be=>Be.skill_id==Q))==null?void 0:Ce.active_skill_level)!=null?at:0)}}),_e=Ai(1,xe)*100-100;i.update({characterModifiers:{skill_jobDuration:_e}})}if(e.$$.dirty[0]&536870912&&c){const Me=35835;let xe=Object.values(c).filter(_e=>(_e==null?void 0:_e.type_id)==Me).map(_e=>[_e==null?void 0:_e.type_id,_e]);J.set(Object.fromEntries(xe))}if(e.$$.dirty[0]&134144&&i.update({facilityModifiers:{systemCostIndex:T,taxRate:z}}),e.$$.dirty[0]&135168&&A&&i.update({facilityModifiers:{roleModifiers:{jobDuration:A.jobDurationModifier,materialConsumption:A.materialConsumptionModifier,jobCost:A.jobCostModifier}}}),e.$$.dirty[0]&139264&&Z&&i.update({facilityModifiers:{rigModifiers:{materialReduction:Z.materialReductionBonus,timeReduction:Z.timeReductionBonus,costReduction:Z.costReductionBonus}}}),e.$$.dirty[0]&131584){for(let Me in Y)t(9,Y),t(17,i),t(2,w),t(19,U);t(9,Y),t(17,i),t(2,w),t(19,U),i.update({prices:Y})}e.$$.dirty[0]&268566528&&i.update({indexPrices:o}),e.$$.dirty[0]&262144&&t(0,x=r.unitCost),e.$$.dirty[0]&134595077&&(pe===null?(t(16,re[1]=1.1*Math.max((it=Y[w])!=null?it:0,x!=null?x:0,fe!=null?fe:0,Te!=null?Te:0)*r.producedQuantity,re),(re[1]==0||isNaN(re[1]))&&t(16,re[1]=1e3,re)):t(16,re=pe))},[x,X,w,I,ee,Ee,oe,S,P,Y,T,z,A,Z,fe,Te,re,i,r,U,ve,E,a,V,$,ie,ce,pe,o,c,d,g,C,je,Ue,de,H,Ge,ze,Ve,ge,Xe,$e,Le,ot,gt,Ke,It,kt]}class Wl extends Cl{constructor(l){super();Dl(this,l,cr,_r,Pl,{productTypeId:2,requiredQuantity:3,producedItems:1,defaultLocationId:26,unitCost:0,salesTaxRate:4,brokerFeeRate:5,compact:6,extents:27},null,[-1,-1])}}function Pi(e,l,t){const i=e.slice();return i[72]=l[t],i[73]=l,i[74]=t,i}function pr(e){var Et;let l,t,i=((Et=e[37].types[e[5]])==null?void 0:Et.name)+"",a,r,n,f,o,c,d,_,m=vt(e[28])+"",g,C,U=Nl(e[34])+"",V,w,I,S,P,Y,X,ve,$,ie,J,ce=vt(e[3])+"",E,T,z=vt(e[21])+"",A,Z,x,ee,Ee,oe,pe,fe,Te,re,je,Ue,de,H,Ge,ze,Ve,ge,Xe,$e,Le,ot,gt,Ke,It,kt,j,Re,it,Me,xe,_e,Q,Ce,at,Be,rt,Ze,qt,we,Je,Ae,Ie,ae,ke,ft,k,De,Mt,te,Jt,qe,nt,St,Yt,_t,et,ye,wt,ut,h,G,Pe,le=Il(e[35])+"",st,Rt,Oe,At,Ut,zt=vt(e[29])+"",Qt,Pt,ct,Ht,$t,rl,hl,el,Nt,nl,Se,tt,yl;function Ml(b){e[46](b)}function wl(b){e[47](b)}function Al(b){e[48](b)}let vl={extents:e[32],quantity:e[26],type_id:e[5],buyOverheadRate:-e[6],sellOverheadRate:-e[7]-e[6],totalCost:e[21]};e[20][e[5]]!==void 0&&(vl.price=e[20][e[5]]),e[24]!==void 0&&(vl.lowestSellPrice=e[24]),e[25]!==void 0&&(vl.highestBuyPrice=e[25]),P=new il({props:vl}),me.push(()=>be(P,"price",Ml)),me.push(()=>be(P,"lowestSellPrice",wl)),me.push(()=>be(P,"highestBuyPrice",Al));let Ct=e[8]!==null&&Bi(e),Qe=e[22]&&qi(e);function ul(b){e[60](b)}function Ye(b){e[61](b)}function Ul(b){e[62](b)}function al(b){e[63](b)}function Dt(b){e[64](b)}let sl={activity:ql};e[4]!==void 0&&(sl.value=e[4]),e[14]!==void 0&&(sl.activitySystemCostIndex=e[14]),e[15]!==void 0&&(sl.activityTax=e[15]),e[16]!==void 0&&(sl.structureRoleBonuses=e[16]),e[17]!==void 0&&(sl.structureRigBonuses=e[17]),te=new Yl({props:sl}),me.push(()=>be(te,"value",ul)),me.push(()=>be(te,"activitySystemCostIndex",Ye)),me.push(()=>be(te,"activityTax",Ul)),me.push(()=>be(te,"structureRoleBonuses",al)),me.push(()=>be(te,"structureRigBonuses",Dt)),Nt=new il({props:{compact:!0,extents:e[32],quantity:e[26],totalCost:e[29]}});let Ot=Object.keys(e[12].materials).map(e[65]),Fe=[];for(let b=0;b<Ot.length;b+=1)Fe[b]=Oi(Pi(e,Ot,b));const fl=b=>ne(Fe[b],1,1,()=>{Fe[b]=null});return{c(){l=y("div"),t=y("div"),a=M(i),n=L(),f=y("div"),o=M(e[26]),c=L(),d=y("div"),_=M(`Unit price\r
        `),g=M(m),C=M(`\r
        Total Profit \r
        `),V=M(U),w=L(),I=y("br"),S=L(),mt(P.$$.fragment),$=L(),ie=y("br"),J=M(`\r
\r
        Unit cost `),E=M(ce),T=M(" Total cost "),A=M(z),x=L(),ee=y("div"),Ee=M("Runs "),oe=y("input"),Te=L(),re=y("input"),Ue=L(),Ct&&Ct.c(),de=L(),H=y("p"),Ge=y("b"),ze=M("Blueprint"),Ve=L(),ge=y("br"),Xe=L(),$e=y("label"),Le=y("input"),gt=M(" Invent"),Ke=L(),It=y("br"),kt=L(),Qe&&Qe.c(),j=L(),Re=y("label"),it=M("ME "),Me=y("input"),xe=L(),_e=M(e[0]),Q=L(),Ce=y("label"),at=M("TE "),Be=y("input"),rt=L(),Ze=M(e[1]),qt=L(),we=y("br"),Je=L(),Ae=y("label"),Ie=M("Cost per run "),ae=y("input"),ke=L(),ft=y("p"),k=y("b"),De=M("Facility"),Mt=L(),mt(te.$$.fragment),_t=L(),et=y("b"),ye=M("Manufacturing"),wt=L(),ut=y("dl"),h=y("dt"),G=M("Time"),Pe=y("dd"),st=M(le),Oe=y("dt"),At=M("Job Cost"),Ut=y("dd"),Qt=M(zt),Pt=L(),ct=y("div"),Ht=y("div"),$t=M("Job cost"),rl=y("div"),hl=L(),el=y("div"),mt(Nt.$$.fragment),nl=L();for(let b=0;b<Fe.length;b+=1)Fe[b].c();this.h()},l(b){l=v(b,"DIV",{class:!0});var B=R(l);t=v(B,"DIV",{class:!0,title:!0});var pt=R(t);a=O(pt,i),pt.forEach(s),n=N(B),f=v(B,"DIV",{class:!0});var Kt=R(f);o=O(Kt,e[26]),Kt.forEach(s),c=N(B),d=v(B,"DIV",{class:!0});var We=R(d);_=O(We,`Unit price\r
        `),g=O(We,m),C=O(We,`\r
        Total Profit \r
        `),V=O(We,U),w=N(We),I=v(We,"BR",{}),S=N(We),bt(P.$$.fragment,We),$=N(We),ie=v(We,"BR",{}),J=O(We,`\r
\r
        Unit cost `),E=O(We,ce),T=O(We," Total cost "),A=O(We,z),We.forEach(s),B.forEach(s),x=N(b),ee=v(b,"DIV",{class:!0});var Ft=R(ee);Ee=O(Ft,"Runs "),oe=v(Ft,"INPUT",{type:!0,min:!0,max:!0}),Te=N(Ft),re=v(Ft,"INPUT",{type:!0,class:!0}),Ue=N(Ft),Ct&&Ct.l(Ft),Ft.forEach(s),de=N(b),H=v(b,"P",{});var p=R(H);Ge=v(p,"B",{});var F=R(Ge);ze=O(F,"Blueprint"),F.forEach(s),Ve=N(p),ge=v(p,"BR",{}),Xe=N(p),$e=v(p,"LABEL",{});var se=R($e);Le=v(se,"INPUT",{type:!0}),gt=O(se," Invent"),se.forEach(s),Ke=N(p),It=v(p,"BR",{}),kt=N(p),Qe&&Qe.l(p),j=N(p),Re=v(p,"LABEL",{});var Bt=R(Re);it=O(Bt,"ME "),Me=v(Bt,"INPUT",{type:!0,min:!0,max:!0}),xe=N(Bt),_e=O(Bt,e[0]),Bt.forEach(s),Q=N(p),Ce=v(p,"LABEL",{});var Gt=R(Ce);at=O(Gt,"TE "),Be=v(Gt,"INPUT",{type:!0,min:!0,max:!0,step:!0}),rt=N(Gt),Ze=O(Gt,e[1]),Gt.forEach(s),qt=N(p),we=v(p,"BR",{}),Je=N(p),Ae=v(p,"LABEL",{});var He=R(Ae);Ie=O(He,"Cost per run "),ae=v(He,"INPUT",{type:!0}),He.forEach(s),p.forEach(s),ke=N(b),ft=v(b,"P",{});var tl=R(ft);k=v(tl,"B",{});var _l=R(k);De=O(_l,"Facility"),_l.forEach(s),Mt=N(tl),bt(te.$$.fragment,tl),tl.forEach(s),_t=N(b),et=v(b,"B",{});var cl=R(et);ye=O(cl,"Manufacturing"),cl.forEach(s),wt=N(b),ut=v(b,"DL",{});var K=R(ut);h=v(K,"DT",{});var jt=R(h);G=O(jt,"Time"),jt.forEach(s),Pe=v(K,"DD",{title:!0});var kl=R(Pe);st=O(kl,le),kl.forEach(s),Oe=v(K,"DT",{});var El=R(Oe);At=O(El,"Job Cost"),El.forEach(s),Ut=v(K,"DD",{});var Zt=R(Ut);Qt=O(Zt,zt),Zt.forEach(s),K.forEach(s),Pt=N(b),ct=v(b,"DIV",{class:!0});var ll=R(ct);Ht=v(ll,"DIV",{});var Tl=R(Ht);$t=O(Tl,"Job cost"),Tl.forEach(s),rl=v(ll,"DIV",{}),R(rl).forEach(s),hl=N(ll),el=v(ll,"DIV",{class:!0});var Rl=R(el);bt(Nt.$$.fragment,Rl),Rl.forEach(s),nl=N(ll);for(let gl=0;gl<Fe.length;gl+=1)Fe[gl].l(ll);ll.forEach(s),this.h()},h(){var b,B;q(t,"class","itemName"),q(t,"title",r=`${(b=e[37].types[e[5]])==null?void 0:b.name} [${e[5]}]`),q(f,"class","qty"),q(d,"class","graph"),q(l,"class",Z=""+(ri(`breakdown ${e[9]?"":"summary"}`)+" svelte-8kmzjq")),q(oe,"type","range"),q(oe,"min",1),q(oe,"max",pe=e[22]?e[23]:(B=e[30])==null?void 0:B.maxProductionLimit),oe.disabled=fe=e[8]!==null&&!e[13],q(re,"type","number"),re.disabled=je=e[8]!==null&&!e[13],q(re,"class","svelte-8kmzjq"),q(ee,"class","combinedInput svelte-8kmzjq"),q(Le,"type","checkbox"),Le.disabled=ot=!e[27],q(Me,"type","range"),q(Me,"min",0),q(Me,"max",10),Me.disabled=e[22],q(Be,"type","range"),q(Be,"min",0),q(Be,"max",20),q(Be,"step",2),Be.disabled=e[22],q(ae,"type","number"),ae.disabled=e[22],q(Pe,"title",Rt=`${e[35]}s`),q(el,"class","graph"),q(ct,"class","breakdown")},m(b,B){D(b,l,B),u(l,t),u(t,a),u(l,n),u(l,f),u(f,o),u(l,c),u(l,d),u(d,_),u(d,g),u(d,C),u(d,V),u(d,w),u(d,I),u(d,S),ht(P,d,null),u(d,$),u(d,ie),u(d,J),u(d,E),u(d,T),u(d,A),D(b,x,B),D(b,ee,B),u(ee,Ee),u(ee,oe),lt(oe,e[11]),u(ee,Te),u(ee,re),lt(re,e[11]),u(ee,Ue),Ct&&Ct.m(ee,null),D(b,de,B),D(b,H,B),u(H,Ge),u(Ge,ze),u(H,Ve),u(H,ge),u(H,Xe),u(H,$e),u($e,Le),Le.checked=e[22],u($e,gt),u(H,Ke),u(H,It),u(H,kt),Qe&&Qe.m(H,null),u(H,j),u(H,Re),u(Re,it),u(Re,Me),lt(Me,e[0]),u(Re,xe),u(Re,_e),u(H,Q),u(H,Ce),u(Ce,at),u(Ce,Be),lt(Be,e[1]),u(Ce,rt),u(Ce,Ze),u(H,qt),u(H,we),u(H,Je),u(H,Ae),u(Ae,Ie),u(Ae,ae),lt(ae,e[10]),D(b,ke,B),D(b,ft,B),u(ft,k),u(k,De),u(ft,Mt),ht(te,ft,null),D(b,_t,B),D(b,et,B),u(et,ye),D(b,wt,B),D(b,ut,B),u(ut,h),u(h,G),u(ut,Pe),u(Pe,st),u(ut,Oe),u(Oe,At),u(ut,Ut),u(Ut,Qt),D(b,Pt,B),D(b,ct,B),u(ct,Ht),u(Ht,$t),u(ct,rl),u(ct,hl),u(ct,el),ht(Nt,el,null),u(ct,nl);for(let pt=0;pt<Fe.length;pt+=1)Fe[pt].m(ct,null);Se=!0,tt||(yl=[Ne(oe,"change",e[49]),Ne(oe,"input",e[49]),Ne(re,"input",e[50]),Ne(Le,"change",e[52]),Ne(Me,"change",e[57]),Ne(Me,"input",e[57]),Ne(Be,"change",e[58]),Ne(Be,"input",e[58]),Ne(ae,"input",e[59])],tt=!0)},p(b,B){var Ft,p,F;(!Se||B[0]&32|B[1]&64)&&i!==(i=((Ft=b[37].types[b[5]])==null?void 0:Ft.name)+"")&&ue(a,i),(!Se||B[0]&32|B[1]&64&&r!==(r=`${(p=b[37].types[b[5]])==null?void 0:p.name} [${b[5]}]`))&&q(t,"title",r),(!Se||B[0]&67108864)&&ue(o,b[26]),(!Se||B[0]&268435456)&&m!==(m=vt(b[28])+"")&&ue(g,m),(!Se||B[1]&8)&&U!==(U=Nl(b[34])+"")&&ue(V,U);const pt={};B[1]&2&&(pt.extents=b[32]),B[0]&67108864&&(pt.quantity=b[26]),B[0]&32&&(pt.type_id=b[5]),B[0]&64&&(pt.buyOverheadRate=-b[6]),B[0]&192&&(pt.sellOverheadRate=-b[7]-b[6]),B[0]&2097152&&(pt.totalCost=b[21]),!Y&&B[0]&1048608&&(Y=!0,pt.price=b[20][b[5]],he(()=>Y=!1)),!X&&B[0]&16777216&&(X=!0,pt.lowestSellPrice=b[24],he(()=>X=!1)),!ve&&B[0]&33554432&&(ve=!0,pt.highestBuyPrice=b[25],he(()=>ve=!1)),P.$set(pt),(!Se||B[0]&8)&&ce!==(ce=vt(b[3])+"")&&ue(E,ce),(!Se||B[0]&2097152)&&z!==(z=vt(b[21])+"")&&ue(A,z),(!Se||B[0]&512&&Z!==(Z=""+(ri(`breakdown ${b[9]?"":"summary"}`)+" svelte-8kmzjq")))&&q(l,"class",Z),(!Se||B[0]&1086324736&&pe!==(pe=b[22]?b[23]:(F=b[30])==null?void 0:F.maxProductionLimit))&&q(oe,"max",pe),(!Se||B[0]&8448&&fe!==(fe=b[8]!==null&&!b[13]))&&(oe.disabled=fe),B[0]&2048&&lt(oe,b[11]),(!Se||B[0]&8448&&je!==(je=b[8]!==null&&!b[13]))&&(re.disabled=je),B[0]&2048&&Lt(re.value)!==b[11]&&lt(re,b[11]),b[8]!==null?Ct?Ct.p(b,B):(Ct=Bi(b),Ct.c(),Ct.m(ee,null)):Ct&&(Ct.d(1),Ct=null),(!Se||B[0]&134217728&&ot!==(ot=!b[27]))&&(Le.disabled=ot),B[0]&4194304&&(Le.checked=b[22]),b[22]?Qe?(Qe.p(b,B),B[0]&4194304&&W(Qe,1)):(Qe=qi(b),Qe.c(),W(Qe,1),Qe.m(H,j)):Qe&&(Wt(),ne(Qe,1,1,()=>{Qe=null}),Xt()),(!Se||B[0]&4194304)&&(Me.disabled=b[22]),B[0]&1&&lt(Me,b[0]),(!Se||B[0]&1)&&ue(_e,b[0]),(!Se||B[0]&4194304)&&(Be.disabled=b[22]),B[0]&2&&lt(Be,b[1]),(!Se||B[0]&2)&&ue(Ze,b[1]),(!Se||B[0]&4194304)&&(ae.disabled=b[22]),B[0]&1024&&Lt(ae.value)!==b[10]&&lt(ae,b[10]);const Kt={};!Jt&&B[0]&16&&(Jt=!0,Kt.value=b[4],he(()=>Jt=!1)),!qe&&B[0]&16384&&(qe=!0,Kt.activitySystemCostIndex=b[14],he(()=>qe=!1)),!nt&&B[0]&32768&&(nt=!0,Kt.activityTax=b[15],he(()=>nt=!1)),!St&&B[0]&65536&&(St=!0,Kt.structureRoleBonuses=b[16],he(()=>St=!1)),!Yt&&B[0]&131072&&(Yt=!0,Kt.structureRigBonuses=b[17],he(()=>Yt=!1)),te.$set(Kt),(!Se||B[1]&16)&&le!==(le=Il(b[35])+"")&&ue(st,le),(!Se||B[1]&16&&Rt!==(Rt=`${b[35]}s`))&&q(Pe,"title",Rt),(!Se||B[0]&536870912)&&zt!==(zt=vt(b[29])+"")&&ue(Qt,zt);const We={};if(B[1]&2&&(We.extents=b[32]),B[0]&67108864&&(We.quantity=b[26]),B[0]&536870912&&(We.totalCost=b[29]),Nt.$set(We),B[0]&1839252|B[1]&71){Ot=Object.keys(b[12].materials).map(b[65]);let se;for(se=0;se<Ot.length;se+=1){const Bt=Pi(b,Ot,se);Fe[se]?(Fe[se].p(Bt,B),W(Fe[se],1)):(Fe[se]=Oi(Bt),Fe[se].c(),W(Fe[se],1),Fe[se].m(ct,null))}for(Wt(),se=Ot.length;se<Fe.length;se+=1)fl(se);Xt()}},i(b){if(!Se){W(P.$$.fragment,b),W(Qe),W(te.$$.fragment,b),W(Nt.$$.fragment,b);for(let B=0;B<Ot.length;B+=1)W(Fe[B]);Se=!0}},o(b){ne(P.$$.fragment,b),ne(Qe),ne(te.$$.fragment,b),ne(Nt.$$.fragment,b),Fe=Fe.filter(Boolean);for(let B=0;B<Fe.length;B+=1)ne(Fe[B]);Se=!1},d(b){b&&s(l),yt(P),b&&s(x),b&&s(ee),Ct&&Ct.d(),b&&s(de),b&&s(H),Qe&&Qe.d(),b&&s(ke),b&&s(ft),yt(te),b&&s(_t),b&&s(et),b&&s(wt),b&&s(ut),b&&s(Pt),b&&s(ct),yt(Nt),dl(Fe,b),tt=!1,Ol(yl)}}}function dr(e){let l;return{c(){l=M("No blueprint selected yet")},l(t){l=O(t,"No blueprint selected yet")},m(t,i){D(t,l,i)},p:Tt,i:Tt,o:Tt,d(t){t&&s(l)}}}function Bi(e){let l,t,i,a,r;return{c(){l=y("label"),t=y("input"),i=M(" Override"),this.h()},l(n){l=v(n,"LABEL",{});var f=R(l);t=v(f,"INPUT",{type:!0}),i=O(f," Override"),f.forEach(s),this.h()},h(){q(t,"type","checkbox")},m(n,f){D(n,l,f),u(l,t),t.checked=e[13],u(l,i),a||(r=Ne(t,"change",e[51]),a=!0)},p(n,f){f[0]&8192&&(t.checked=n[13])},d(n){n&&s(l),a=!1,r()}}}function qi(e){let l,t,i,a,r,n,f;function o(g){e[53](g)}function c(g){e[54](g)}function d(g){e[55](g)}function _(g){e[56](g)}let m={blueprintToInvent:e[30]};return e[10]!==void 0&&(m.expectedCostPerRun=e[10]),e[0]!==void 0&&(m.productME=e[0]),e[1]!==void 0&&(m.productTE=e[1]),e[23]!==void 0&&(m.productRuns=e[23]),t=new ur({props:m}),me.push(()=>be(t,"expectedCostPerRun",o)),me.push(()=>be(t,"productME",c)),me.push(()=>be(t,"productTE",d)),me.push(()=>be(t,"productRuns",_)),{c(){l=y("div"),mt(t.$$.fragment),this.h()},l(g){l=v(g,"DIV",{class:!0});var C=R(l);bt(t.$$.fragment,C),C.forEach(s),this.h()},h(){q(l,"class","subItem")},m(g,C){D(g,l,C),ht(t,l,null),f=!0},p(g,C){const U={};C[0]&1073741824&&(U.blueprintToInvent=g[30]),!i&&C[0]&1024&&(i=!0,U.expectedCostPerRun=g[10],he(()=>i=!1)),!a&&C[0]&1&&(a=!0,U.productME=g[0],he(()=>a=!1)),!r&&C[0]&2&&(r=!0,U.productTE=g[1],he(()=>r=!1)),!n&&C[0]&8388608&&(n=!0,U.productRuns=g[23],he(()=>n=!1)),t.$set(U)},i(g){f||(W(t.$$.fragment,g),f=!0)},o(g){ne(t.$$.fragment,g),f=!1},d(g){g&&s(l),yt(t)}}}function Mi(e){let l,t,i,a,r,n,f;const o=[hr,br,mr],c=[];function d(_,m){return(t==null||m[0]&4096|m[1]&1)&&(t=!!Zl(_[31],_[72])),t?0:((i==null||m[0]&4096|m[1]&1)&&(i=!!Hl(_[72],_[31]).activity),i?1:2)}return a=d(e,[-1,-1,-1]),r=c[a]=o[a](e),{c(){l=y("div"),r.c(),n=L(),this.h()},l(_){l=v(_,"DIV",{class:!0});var m=R(l);r.l(m),n=N(m),m.forEach(s),this.h()},h(){q(l,"class","subItem")},m(_,m){D(_,l,m),c[a].m(l,null),u(l,n),f=!0},p(_,m){let g=a;a=d(_,m),a===g?c[a].p(_,m):(Wt(),ne(c[g],1,1,()=>{c[g]=null}),Xt(),r=c[a],r?r.p(_,m):(r=c[a]=o[a](_),r.c()),W(r,1),r.m(l,n))},i(_){f||(W(r),f=!0)},o(_){ne(r),f=!1},d(_){_&&s(l),c[a].d()}}}function mr(e){var a;let l,t=((a=e[37].types[e[72]])==null?void 0:a.name)+"",i;return{c(){l=M("Could not find industry details for "),i=M(t)},l(r){l=O(r,"Could not find industry details for "),i=O(r,t)},m(r,n){D(r,l,n),D(r,i,n)},p(r,n){var f;n[0]&4096|n[1]&64&&t!==(t=((f=r[37].types[r[72]])==null?void 0:f.name)+"")&&ue(i,t)},i:Tt,o:Tt,d(r){r&&s(l),r&&s(i)}}}function br(e){let l,t,i,a;function r(o){e[70](o,e[72])}function n(o){e[71](o)}let f={productTypeId:e[72],requiredQuantity:e[18](e[12].materials[e[72]].quantity),defaultLocationId:e[4],compact:!0};return e[19][e[72]]!==void 0&&(f.unitCost=e[19][e[72]]),e[2]!==void 0&&(f.producedItems=e[2]),l=new Wl({props:f}),me.push(()=>be(l,"unitCost",r)),me.push(()=>be(l,"producedItems",n)),{c(){mt(l.$$.fragment)},l(o){bt(l.$$.fragment,o)},m(o,c){ht(l,o,c),a=!0},p(o,c){e=o;const d={};c[0]&4096&&(d.productTypeId=e[72]),c[0]&266240&&(d.requiredQuantity=e[18](e[12].materials[e[72]].quantity)),c[0]&16&&(d.defaultLocationId=e[4]),!t&&c[0]&528384&&(t=!0,d.unitCost=e[19][e[72]],he(()=>t=!1)),!i&&c[0]&4&&(i=!0,d.producedItems=e[2],he(()=>i=!1)),l.$set(d)},i(o){a||(W(l.$$.fragment,o),a=!0)},o(o){ne(l.$$.fragment,o),a=!1},d(o){yt(l,o)}}}function hr(e){let l,t,i,a;function r(o){e[68](o,e[72])}function n(o){e[69](o)}let f={selectedProductId:e[72],requiredQuantity:e[18](e[12].materials[e[72]].quantity),materialEfficiency:10,timeEfficiency:20,selectedLocationId:e[4],compact:!0};return e[19][e[72]]!==void 0&&(f.unitCost=e[19][e[72]]),e[2]!==void 0&&(f.producedItems=e[2]),l=new Si({props:f}),me.push(()=>be(l,"unitCost",r)),me.push(()=>be(l,"producedItems",n)),{c(){mt(l.$$.fragment)},l(o){bt(l.$$.fragment,o)},m(o,c){ht(l,o,c),a=!0},p(o,c){e=o;const d={};c[0]&4096&&(d.selectedProductId=e[72]),c[0]&266240&&(d.requiredQuantity=e[18](e[12].materials[e[72]].quantity)),c[0]&16&&(d.selectedLocationId=e[4]),!t&&c[0]&528384&&(t=!0,d.unitCost=e[19][e[72]],he(()=>t=!1)),!i&&c[0]&4&&(i=!0,d.producedItems=e[2],he(()=>i=!1)),l.$set(d)},i(o){a||(W(l.$$.fragment,o),a=!0)},o(o){ne(l.$$.fragment,o),a=!1},d(o){yt(l,o)}}}function Oi(e){var ce;let l,t,i,a,r,n,f=((ce=e[37].types[e[72]])==null?void 0:ce.name)+"",o,c,d,_,m=e[18](e[12].materials[e[72]].quantity)+"",g,C,U,V,w,I,S,P,Y,X;function ve(){e[66].call(i,e[72])}function $(E){e[67](E,e[72])}let ie={extents:e[32],quantity:e[18](e[12].materials[e[72]].quantity),type_id:e[72],overridePrice:e[19][e[72]],buyOverheadRate:e[7],totalCost:e[19][e[72]]?e[19][e[72]]*e[18](e[12].materials[e[72]].quantity):null,compact:!0};e[20][e[72]]!==void 0&&(ie.price=e[20][e[72]]),V=new il({props:ie}),me.push(()=>be(V,"price",$));let J=e[2][e[72]]&&Mi(e);return{c(){l=y("div"),t=y("label"),i=y("input"),r=L(),n=y("span"),o=M(f),d=L(),_=y("div"),g=M(m),C=L(),U=y("div"),mt(V.$$.fragment),I=L(),J&&J.c(),S=ml(),this.h()},l(E){l=v(E,"DIV",{class:!0});var T=R(l);t=v(T,"LABEL",{});var z=R(t);i=v(z,"INPUT",{type:!0}),r=N(z),n=v(z,"SPAN",{title:!0});var A=R(n);o=O(A,f),A.forEach(s),z.forEach(s),T.forEach(s),d=N(E),_=v(E,"DIV",{class:!0});var Z=R(_);g=O(Z,m),Z.forEach(s),C=N(E),U=v(E,"DIV",{class:!0});var x=R(U);bt(V.$$.fragment,x),x.forEach(s),I=N(E),J&&J.l(E),S=ml(),this.h()},h(){var E;q(i,"type","checkbox"),i.disabled=a=!e[33](e[72]),q(n,"title",c=`${(E=e[37].types[e[72]])==null?void 0:E.name} [${e[72]}]`),q(l,"class","itemName"),q(_,"class","qty"),q(U,"class","graph")},m(E,T){D(E,l,T),u(l,t),u(t,i),i.checked=e[2][e[72]],u(t,r),u(t,n),u(n,o),D(E,d,T),D(E,_,T),u(_,g),D(E,C,T),D(E,U,T),ht(V,U,null),D(E,I,T),J&&J.m(E,T),D(E,S,T),P=!0,Y||(X=Ne(i,"change",ve),Y=!0)},p(E,T){var A,Z;e=E,(!P||T[0]&4096|T[1]&4&&a!==(a=!e[33](e[72])))&&(i.disabled=a),T[0]&4100&&(i.checked=e[2][e[72]]),(!P||T[0]&4096|T[1]&64)&&f!==(f=((A=e[37].types[e[72]])==null?void 0:A.name)+"")&&ue(o,f),(!P||T[0]&4096|T[1]&64&&c!==(c=`${(Z=e[37].types[e[72]])==null?void 0:Z.name} [${e[72]}]`))&&q(n,"title",c),(!P||T[0]&266240)&&m!==(m=e[18](e[12].materials[e[72]].quantity)+"")&&ue(g,m);const z={};T[1]&2&&(z.extents=e[32]),T[0]&266240&&(z.quantity=e[18](e[12].materials[e[72]].quantity)),T[0]&4096&&(z.type_id=e[72]),T[0]&528384&&(z.overridePrice=e[19][e[72]]),T[0]&128&&(z.buyOverheadRate=e[7]),T[0]&790528&&(z.totalCost=e[19][e[72]]?e[19][e[72]]*e[18](e[12].materials[e[72]].quantity):null),!w&&T[0]&1052672&&(w=!0,z.price=e[20][e[72]],he(()=>w=!1)),V.$set(z),e[2][e[72]]?J?(J.p(e,T),T[0]&4100&&W(J,1)):(J=Mi(e),J.c(),W(J,1),J.m(S.parentNode,S)):J&&(Wt(),ne(J,1,1,()=>{J=null}),Xt())},i(E){P||(W(V.$$.fragment,E),W(J),P=!0)},o(E){ne(V.$$.fragment,E),ne(J),P=!1},d(E){E&&s(l),E&&s(d),E&&s(_),E&&s(C),E&&s(U),yt(V),E&&s(I),J&&J.d(E),E&&s(S),Y=!1,X()}}}function yr(e){let l,t,i,a;const r=[dr,pr],n=[];function f(o,c){return o[30]?1:0}return l=f(e),t=n[l]=r[l](e),{c(){t.c(),i=ml()},l(o){t.l(o),i=ml()},m(o,c){n[l].m(o,c),D(o,i,c),a=!0},p(o,c){let d=l;l=f(o),l===d?n[l].p(o,c):(Wt(),ne(n[d],1,1,()=>{n[d]=null}),Xt(),t=n[l],t?t.p(o,c):(t=n[l]=r[l](o),t.c()),W(t,1),t.m(i.parentNode,i))},i(o){a||(W(t),a=!0)},o(o){ne(t),a=!1},d(o){n[l].d(o),o&&s(i)}}}function vr(e,l,t){let i,a,r,n,f,o,c,d,_,m,g,C=Tt,U=()=>(C(),C=jl(n,k=>t(42,g=k)),n),V,w,I,S;dt(e,Ll,k=>t(31,m=k)),dt(e,ni,k=>t(43,V=k)),dt(e,Jl,k=>t(45,I=k)),dt(e,Bl,k=>t(37,S=k)),e.$$.on_destroy.push(()=>C());let P=0,{selectedProductId:Y=null}=l,{salesTaxRate:X=.036}=l,{brokerFeeRate:ve=.0113709973928}=l,{requiredQuantity:$=null}=l,ie=1,{materialEfficiency:J=0}=l,{timeEfficiency:ce=0}=l,{producedItems:E={}}=l,T=null,z=!1,{selectedLocationId:A=null}=l,Z,x,ee,Ee,oe=k=>k,pe={},fe={},Te=0,re=0,{unitCost:je=null}=l,{compact:Ue=!1}=l,de=!1,H=10,Ge=Sl("currentCharacter");dt(e,Ge,k=>t(44,w=k));let{extents:ze=null}=l,Ve,ge,Xe=[0,1e3],$e=()=>!1;function Le(k){e.$$.not_equal(fe[Y],k)&&(fe[Y]=k,t(20,fe))}function ot(k){Ve=k,t(24,Ve)}function gt(k){ge=k,t(25,ge)}function Ke(){ie=Lt(this.value),t(11,ie),t(8,$),t(13,z),t(12,T),t(5,Y),t(22,de),t(23,H),t(30,i),t(27,a),t(31,m)}function It(){ie=Lt(this.value),t(11,ie),t(8,$),t(13,z),t(12,T),t(5,Y),t(22,de),t(23,H),t(30,i),t(27,a),t(31,m)}function kt(){z=this.checked,t(13,z)}function j(){de=this.checked,t(22,de),t(27,a),t(31,m),t(30,i),t(5,Y)}function Re(k){P=k,t(10,P)}function it(k){J=k,t(0,J)}function Me(k){ce=k,t(1,ce)}function xe(k){H=k,t(23,H)}function _e(){J=Lt(this.value),t(0,J)}function Q(){ce=Lt(this.value),t(1,ce)}function Ce(){P=Lt(this.value),t(10,P)}function at(k){A=k,t(4,A)}function Be(k){Z=k,t(14,Z)}function rt(k){x=k,t(15,x)}function Ze(k){ee=k,t(16,ee)}function qt(k){Ee=k,t(17,Ee)}const we=k=>parseInt(k);function Je(k){E[k]=this.checked,t(2,E),t(12,T),t(30,i),t(31,m),t(5,Y)}function Ae(k,De){e.$$.not_equal(fe[De],k)&&(fe[De]=k,t(20,fe))}function Ie(k,De){e.$$.not_equal(pe[De],k)&&(pe[De]=k,t(19,pe),t(2,E))}function ae(k){E=k,t(2,E)}function ke(k,De){e.$$.not_equal(pe[De],k)&&(pe[De]=k,t(19,pe),t(2,E))}function ft(k){E=k,t(2,E)}return e.$$set=k=>{"selectedProductId"in k&&t(5,Y=k.selectedProductId),"salesTaxRate"in k&&t(6,X=k.salesTaxRate),"brokerFeeRate"in k&&t(7,ve=k.brokerFeeRate),"requiredQuantity"in k&&t(8,$=k.requiredQuantity),"materialEfficiency"in k&&t(0,J=k.materialEfficiency),"timeEfficiency"in k&&t(1,ce=k.timeEfficiency),"producedItems"in k&&t(2,E=k.producedItems),"selectedLocationId"in k&&t(4,A=k.selectedLocationId),"unitCost"in k&&t(3,je=k.unitCost),"compact"in k&&t(9,Ue=k.compact),"extents"in k&&t(39,ze=k.extents)},e.$$.update=()=>{var k,De,Mt,te,Jt;if(e.$$.dirty[0]&32|e.$$.dirty[1]&1&&t(30,i=Zl(m,Y)),e.$$.dirty[0]&1073741824|e.$$.dirty[1]&1&&t(27,a=Ji(m,i==null?void 0:i.type_id)),e.$$.dirty[0]&1073741824&&t(12,T=i==null?void 0:i.activities[ql]),e.$$.dirty[0]&12576&&$!==null&&!z&&T&&t(11,ie=Math.ceil($/T.products[Y].quantity)),e.$$.dirty[0]&134217728&&(a||t(22,de=!1)),e.$$.dirty[0]&12582912&&de&&t(11,ie=H),e.$$.dirty[0]&198657&&t(18,oe=qe=>{var nt,St;return Math.max(ie,Math.ceil(qe*ie*(1-J/100)*(1+((nt=ee==null?void 0:ee.materialConsumptionModifier)!=null?nt:0)/100)*(1+((St=Ee==null?void 0:Ee.materialReductionBonus)!=null?St:0)/100)))}),e.$$.dirty[0]&4096|e.$$.dirty[1]&16896&&(t(40,re=0),T))for(let qe in T.materials)t(40,re+=T.materials[qe].quantity*((De=(k=I[qe])==null?void 0:k.adjusted_price)!=null?De:0));if(e.$$.dirty[0]&116736|e.$$.dirty[1]&512&&t(29,r=re*Z*(1+((Mt=ee==null?void 0:ee.jobCostModifier)!=null?Mt:0)/100)*(1+x/100)*ie),e.$$.dirty[0]&540285952&&(t(21,Te=0),T)){for(let qe in T.materials){let nt=oe(T.materials[qe].quantity);t(21,Te+=nt*fe[qe])}t(21,Te+=r),t(21,Te+=P*ie)}if(e.$$.dirty[0]&524292)for(let qe in pe)E[qe]||t(19,pe[qe]=void 0,pe);e.$$.dirty[1]&8192&&U(t(36,n=Vl[w])),e.$$.dirty[0]&4096|e.$$.dirty[1]&6144&&t(41,f=T?[...Object.values(T.requiredSkills||{}).map(qe=>qe.type_id),ui].reduce((qe,nt)=>{var Yt,_t,et,ye,wt,ut,h,G;if(V.types[nt]===void 0)return qe;let St=(ut=(wt=(et=(Yt=V.types[nt][440])==null?void 0:Yt.value)!=null?et:(_t=V.types[nt][1982])==null?void 0:_t.value)!=null?wt:(ye=V.types[nt][1961])==null?void 0:ye.value)!=null?ut:0;return St*=(G=(h=g==null?void 0:g.skills.find(Pe=>Pe.skill_id==nt))==null?void 0:h.active_skill_level)!=null?G:0,qe*(1+St*.01)},1):1),e.$$.dirty[0]&202754|e.$$.dirty[1]&1024&&t(35,o=(T==null?void 0:T.time)*(1-ce/100)*f*(1+((te=ee==null?void 0:ee.jobDurationModifier)!=null?te:0)/100)*(1+((Jt=Ee==null?void 0:Ee.timeReductionBonus)!=null?Jt:0)/100)*ie),e.$$.dirty[0]&1048608&&t(28,c=fe[Y]),e.$$.dirty[0]&6176&&t(26,d=(T==null?void 0:T.products[Y].quantity)*ie),e.$$.dirty[0]&337641472&&t(34,_=c*d-Te),e.$$.dirty[0]&69210112&&t(3,je=T?Te/d:null),e.$$.dirty[0]&118493224|e.$$.dirty[1]&256&&(ze===null?T&&t(32,Xe[1]=1.1*Math.max(fe[Y],je,Ve!=null?Ve:0,ge!=null?ge:0)*d,Xe):t(32,Xe=ze)),e.$$.dirty[1]&1&&t(33,$e=qe=>Zl(m,qe)!=null||Hl(qe,m).activity!=null)},[J,ce,E,je,A,Y,X,ve,$,Ue,P,ie,T,z,Z,x,ee,Ee,oe,pe,fe,Te,de,H,Ve,ge,d,a,c,r,i,m,Xe,$e,_,o,n,S,Ge,ze,re,f,g,V,w,I,Le,ot,gt,Ke,It,kt,j,Re,it,Me,xe,_e,Q,Ce,at,Be,rt,Ze,qt,we,Je,Ae,Ie,ae,ke,ft]}class Si extends Cl{constructor(l){super();Dl(this,l,vr,yr,Pl,{selectedProductId:5,salesTaxRate:6,brokerFeeRate:7,requiredQuantity:8,materialEfficiency:0,timeEfficiency:1,producedItems:2,selectedLocationId:4,unitCost:3,compact:9,extents:39},null,[-1,-1,-1])}}function gr(e){let l,t;return l=new Si({props:{selectedProductId:e[0]}}),{c(){mt(l.$$.fragment)},l(i){bt(l.$$.fragment,i)},m(i,a){ht(l,i,a),t=!0},p(i,a){const r={};a&1&&(r.selectedProductId=i[0]),l.$set(r)},i(i){t||(W(l.$$.fragment,i),t=!0)},o(i){ne(l.$$.fragment,i),t=!1},d(i){yt(l,i)}}}function Ir(e){let l,t;return l=new Wl({props:{productTypeId:e[0]}}),{c(){mt(l.$$.fragment)},l(i){bt(l.$$.fragment,i)},m(i,a){ht(l,i,a),t=!0},p(i,a){const r={};a&1&&(r.productTypeId=i[0]),l.$set(r)},i(i){t||(W(l.$$.fragment,i),t=!0)},o(i){ne(l.$$.fragment,i),t=!1},d(i){yt(l,i)}}}function kr(e){var C,U,V,w;let l,t,i,a,r,n,f,o,c,d;document.title=l=""+((((C=e[1])==null?void 0:C.types)&&((U=e[1])==null?void 0:U.types[e[0]])?`${(w=(V=e[1])==null?void 0:V.types[e[0]])==null?void 0:w.name} - `:"")+"EVE Online Visual Industry Calculator"),i=new Ki({props:{selectedTypeId:e[0],selectableTypes:e[2]}}),i.$on("change",e[6]);const _=[Ir,gr],m=[];function g(I,S){return I[3]===Kl?0:I[3]===ql?1:-1}return~(f=g(e))&&(o=m[f]=_[f](e)),{c(){t=L(),mt(i.$$.fragment),a=L(),r=y("p"),n=L(),o&&o.c(),c=ml()},l(I){Vi('[data-svelte="svelte-nku6hn"]',document.head).forEach(s),t=N(I),bt(i.$$.fragment,I),a=N(I),r=v(I,"P",{}),R(r).forEach(s),n=N(I),o&&o.l(I),c=ml()},m(I,S){D(I,t,S),ht(i,I,S),D(I,a,S),D(I,r,S),D(I,n,S),~f&&m[f].m(I,S),D(I,c,S),d=!0},p(I,[S]){var X,ve,$,ie;(!d||S&3)&&l!==(l=""+((((X=I[1])==null?void 0:X.types)&&((ve=I[1])==null?void 0:ve.types[I[0]])?`${(ie=($=I[1])==null?void 0:$.types[I[0]])==null?void 0:ie.name} - `:"")+"EVE Online Visual Industry Calculator"))&&(document.title=l);const P={};S&1&&(P.selectedTypeId=I[0]),S&4&&(P.selectableTypes=I[2]),i.$set(P);let Y=f;f=g(I),f===Y?~f&&m[f].p(I,S):(o&&(Wt(),ne(m[Y],1,1,()=>{m[Y]=null}),Xt()),~f?(o=m[f],o?o.p(I,S):(o=m[f]=_[f](I),o.c()),W(o,1),o.m(c.parentNode,c)):o=null)},i(I){d||(W(i.$$.fragment,I),W(o),d=!0)},o(I){ne(i.$$.fragment,I),ne(o),d=!1},d(I){I&&s(t),yt(i,I),I&&s(a),I&&s(r),I&&s(n),~f&&m[f].d(I),I&&s(c)}}}function Er(e,l,t){let i,a,r,n,f;dt(e,Ll,d=>t(4,r=d)),dt(e,Bl,d=>t(1,n=d)),dt(e,Ui,d=>t(5,f=d));let o=null;const c=d=>{Qi(`${d.detail}`,{keepfocus:!0})};return e.$$.update=()=>{var d;if(e.$$.dirty&32&&t(0,i=parseInt(f.params.type)||null),e.$$.dirty&18&&r.types&&n.types){let _=function(g){var C,U,V,w;return Object.keys((w=(V=(C=r.types[g].activities[Kl])==null?void 0:C.products)!=null?V:(U=r.types[g].activities[ql])==null?void 0:U.products)!=null?w:{}).map(I=>parseInt(I))},m=[];Object.values(r.types).forEach(g=>{m=[...m,..._(g.type_id)]}),t(2,o=m.filter(g=>n.types[g]!==void 0).map(g=>n.types[g]))}e.$$.dirty&17&&t(3,a=(d=Yi(i).activity)==null?void 0:d.activity.activityID)},[i,n,o,a,r,f,c]}class qr extends Cl{constructor(l){super();Dl(this,l,Er,kr,Pl,{})}}export{qr as default};
