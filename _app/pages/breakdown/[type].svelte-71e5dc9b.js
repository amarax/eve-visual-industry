var Hr=Object.defineProperty;var Pi=Object.getOwnPropertySymbols;var Kr=Object.prototype.hasOwnProperty,Wr=Object.prototype.propertyIsEnumerable;var wi=(e,l,t)=>l in e?Hr(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,qi=(e,l)=>{for(var t in l||(l={}))Kr.call(l,t)&&wi(e,t,l[t]);if(Pi)for(var t of Pi(l))Wr.call(l,t)&&wi(e,t,l[t]);return e};import{K as Ml,L as Al,P as Oi,C as gl,S as kl,i as Il,s as El,e as g,t as P,c as k,a as M,g as w,d as f,f as D,H as c,h as te,M as Fl,N as tl,O as me,I as Ye,Q as Vt,R as hi,T as Ql,U as Zr,B as Kl,l as Ve,V as zt,W as Xt,X as Tl,Y as Cl,p as Wl,b as E,Z as Zl,_ as Gl,$ as Ze,A as ji,z as xr,a0 as Pl,a1 as mi,a2 as $r,a3 as es,a4 as ts,a5 as be,k as J,n as z,a6 as Ee,j as ht,m as mt,o as bt,a7 as Te,x as ne,u as ae,v as yt,a8 as ct,r as rl,w as sl,a9 as Nt,y as xl,aa as ls,J as is}from"../../chunks/vendor-0ab7548f.js";import{r as rs,b as Yl}from"../../chunks/paths-c3a241ee.js";const ss=rs,ns=us;async function us(e,l){return ss.goto(e,l,[])}const os=()=>{const e=Ml("__svelte__");return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:e.navigating.subscribe}},session:e.session}},as={subscribe(e){return os().page.subscribe(e)}};async function $l(e,l){let t=new URL(`https://esi.evetech.net/${l&&l.dev?"dev":"latest"}${e}`);const i=await fetch(t.toString(),{method:"GET",headers:{accept:"application/json"}}),n=await i.json();if(i.ok){let s=i.headers.get("X-Pages");return s&&parseInt(s)>1&&console.log("More pages were available but not retrieved",t.toString()),n}return Promise.reject(i)}async function fs(){const e=await fetch(`${Yl}/eve-sde/categories.json`,{method:"GET",headers:{accept:"application/json"}}),l=await e.json();return e.ok?l:Promise.reject(e)}async function cs(){let e;try{e=await al("invMarketGroups")}catch(i){console.error(i)}let l={groups:{},groupTree:{}};e.forEach(i=>{l.groups[i.market_group_id]=i,i.types=[],i.parent_group_id=="None"&&delete i.parent_group_id});let t={};for(let i in l.groups){let n=l.groups[i];if(n.parent_group_id){let s=l.groups[n.parent_group_id];s.child_groups===void 0&&(s.child_groups={}),s.child_groups[i]=n}}for(let i in l.groups){let n=l.groups[i];n.parent_group_id===void 0&&(t[n.market_group_id]=n)}return l.groupTree=t,l}function al(e){let l=i=>({header:!0,dynamicTyping:!0,complete:async n=>{i(n.data)}}),t=`${Yl}/eve-sde/${e}.csv`;return new Promise(i=>{Oi.parse(t,qi({download:!0},l(i)))})}async function _s(e){return new Promise(l=>{Oi.parse(`${Yl}/eve-sde/types.csv`,{download:!0,header:!0,dynamicTyping:!0,complete:async(t,i)=>{let n={};for(let s of t.data)s.published?(n[s.type_id]=s,s.market_group_id==="None"?delete s.market_group_id:e[s.market_group_id].types.push(s.type_id)):delete n[s.type_id];l(n)}})})}let ei={},Si=!1;function ds(e){if(Si)return()=>{};const l={categories:null,types:ei,markets:null};return e(l),fs().then(t=>{l.categories=t,e(l)}).catch(t=>{console.error(t)}),cs().then(t=>{l.markets=t,e(l),_s(t.groups).then(i=>{ei=i,l.types=ei,e(l),Si=!0}).catch(i=>{console.error(i)})}).catch(t=>{console.error(t)}),()=>{}}async function ps(e){try{let l=await $l(`/universe/types/${e}/`);return ei[e]=l,l}catch(l){console.error(l)}}const jl=Al({types:{}},ds);Al({},hs);function hs(e){return e({attributes:null}),()=>{}}let ti={};function ms(){const{subscribe:e,update:l}=gl({});return{subscribe:e,update:t=>l(i=>{for(let n in t)i[n]===void 0&&(i[n]={}),Object.assign(i[n],t[n]);return i})}}const Ni=ms();function li(e){return 6e7<=e&&e<7e7}function bs(e){return ti[e]===void 0&&(li(e)?ti[e]=ii(`/universe/stations/${e}/`):ti[e]=yi(`/universe/structures/${e}/`)),ti[e]}var bi;(function(e){e[e.loading=0]="loading",e[e.loaded=1]="loaded",e[e.error=2]="error"})(bi||(bi={}));function ii(e,l){let t={status:0,subscribe:null};function i(s){return t.status!==1&&$l(e).then(r=>{l&&(r=l(r)),t.status=1,s(r)}).catch(r=>{t.status=2,s(null),console.error(r)}),()=>{}}const{subscribe:n}=gl(null,i);return t.subscribe=n,t}function yi(e,l){let t={status:0,subscribe:null};function i(s){return t.status!==1&&fetch(`${Yl}/esi-cache${e}index.json`).then(r=>r.ok?r.json():Promise.reject("Fetch failed")).then(r=>{l&&(r=l(r)),t.status=1,s(r)}).catch(r=>{t.status=2,s(null),console.error(r)}),()=>{}}const{subscribe:n}=gl(null,i);return t.subscribe=n,t}const ri={},Jl={},Li={};async function ys(){try{let e=await(await fetch(`${Yl}/esi-cache/authorisedCharacters.json`)).json();for(let l of e)ri[l]=ii(`/characters/${l}/`),Jl[l]=yi(`/characters/${l}/skills/`),Li[l]=yi(`/characters/${l}/blueprints/`)}catch(e){console.error(e)}}function Ui(e,l,t){const i=e.slice();return i[4]=l[t],i}function Vi(e){let l,t=(e[1][e[4]]||e[4])+"",i,n;return{c(){l=g("option"),i=P(t),this.h()},l(s){l=k(s,"OPTION",{});var r=M(l);i=w(r,t),r.forEach(f),this.h()},h(){l.__value=n=parseInt(e[4]),l.value=l.__value},m(s,r){D(s,l,r),c(l,i)},p(s,r){r&2&&t!==(t=(s[1][s[4]]||s[4])+"")&&te(i,t),r&2&&n!==(n=parseInt(s[4]))&&(l.__value=n,l.value=l.__value)},d(s){s&&f(l)}}}function vs(e){let l,t,i,n=Object.keys(e[1]),s=[];for(let r=0;r<n.length;r+=1)s[r]=Vi(Ui(e,n,r));return{c(){l=g("select");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){l=k(r,"SELECT",{});var u=M(l);for(let o=0;o<s.length;o+=1)s[o].l(u);u.forEach(f),this.h()},h(){e[0]===void 0&&Fl(()=>e[2].call(l))},m(r,u){D(r,l,u);for(let o=0;o<s.length;o+=1)s[o].m(l,null);tl(l,e[0]),t||(i=me(l,"change",e[2]),t=!0)},p(r,[u]){if(u&2){n=Object.keys(r[1]);let o;for(o=0;o<n.length;o+=1){const a=Ui(r,n,o);s[o]?s[o].p(a,u):(s[o]=Vi(a),s[o].c(),s[o].m(l,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}u&3&&tl(l,r[0])},i:Ye,o:Ye,d(r){r&&f(l),Vt(s,r),t=!1,i()}}}function gs(e,l,t){let{value:i=null}=l,n={},s=[];ys().then(()=>{for(let u in ri)s.push(ri[u].subscribe(o=>{t(1,n[u]=o==null?void 0:o.name,n)}));t(0,i=parseInt(Object.keys(ri)[0]))}),hi(()=>{s.forEach(u=>u())});function r(){i=Ql(this),t(0,i),t(1,n)}return e.$$set=u=>{"value"in u&&t(0,i=u.value)},[i,n,r]}class ks extends kl{constructor(l){super();Il(this,l,gs,vs,El,{value:0})}}const Ot=1,si=8,At=11;let Ai=!1;function Is(e){if(Ai)return()=>{};let l={activities:{},types:{}};return al("ramActivities").then(t=>{t.filter(i=>i.activityID).forEach(i=>l.activities[i.activityID]=i)}).then(()=>al("industryActivity")).then(t=>{t.forEach(i=>{if(i.type_id===null)return;let n=l.types[i.type_id];n===void 0&&(n={type_id:i.type_id,activities:{}},l.types[i.type_id]=n),n.activities[i.activityID]={activity:l.activities[i.activityID],time:i.time,materials:{},products:{}}})}).then(()=>al("industryActivityMaterials")).then(t=>{t.forEach(i=>{if(i.typeID===null)return;let n=l.types[i.typeID];console.assert(n!==void 0,i);let s=n.activities[i.activityID].materials;console.assert(s instanceof Object),s[i.materialTypeID]={materialTypeID:i.materialTypeID,quantity:i.quantity}})}).then(()=>al("industryActivityProducts")).then(t=>{t.forEach(i=>{if(i.type_id===null)return;let n=l.types[i.type_id].activities[i.activityID];n.products[i.productTypeID]={type_id:i.productTypeID,quantity:i.quantity}})}).then(()=>al("industryActivityProbabilities")).then(t=>{t.forEach(i=>{if(i.typeID===null)return;let n=l.types[i.typeID].activities[i.activityID];n.products[i.productTypeID].probability=i.probability})}).then(()=>al("industryActivitySkills")).then(t=>{t.forEach(i=>{if(i.typeID===null)return;let n=l.types[i.typeID].activities[i.activityID];n.requiredSkills===void 0&&(n.requiredSkills={}),n.requiredSkills[i.skillID]={type_id:i.skillID,level:i.level}})}).then(()=>al("industryBlueprints")).then(t=>{t.forEach(i=>l.types[i.type_id].maxProductionLimit=i.maxProductionLimit),e(l),Ai=!0}).catch(t=>console.error(t)),e(l),()=>{}}const zl=Al(null,Is);function ni(e,l){return Object.values(e.types).find(t=>{var i;return(i=t.activities[Ot])==null?void 0:i.products[l]})}function Es(e,l){return Object.values(e.types).find(t=>{var i;return(i=t.activities[si])==null?void 0:i.products[l]})}const Ts=Zr(jl,(e,l)=>(Cs(e).then(t=>l(t)),()=>{}),{});async function Cs(e){const l=1873;let t=Object.keys(e.types).filter(n=>e.types[n].market_group_id==l),i={};try{for(let n of t)i[n]=await $l(`/universe/types/${n}/`)}catch(n){console.error(n)}return i}const Fi=3388,Rs=ii("/industry/systems/"),Ds={manufacturing:1,researching_time_efficiency:3,researching_material_efficiency:4,copying:5,invention:8,reaction:11};function Bs(e,l,t){var i,n;return(n=(i=e==null?void 0:e.find(s=>{var r;return s.solar_system_id===((r=l==null?void 0:l.solar_system_id)!=null?r:l==null?void 0:l.system_id)}))==null?void 0:i.cost_indices.find(s=>Ds[s.activity]==t))==null?void 0:n.cost_index}function Xl(e,l){let t=Object.values(l.types).find(i=>{var n;return(n=i.activities[At])==null?void 0:n.products[e]});return{type:t,activity:t==null?void 0:t.activities[At]}}function Qi(e,l){return ni(l,e)!=null||Xl(e,l).activity!=null}class Ms{constructor(l){this.orders={buy:[],sell:[],lastUpdated:null},this.type_id=l}}const ui={regions:{10000002:{types:{}}},prices:Al({},e=>($l("/markets/prices/?datasource=tranquility").then(l=>{let t={};l.forEach(i=>{t[i.type_id]=i}),e(t)}).catch(l=>console.error(l)),()=>{}))},vi=ui.prices;function Ps(e,l=10000002){return ui.regions[l].types[e]===void 0&&(ui.regions[l].types[e]=ii(`/markets/${l}/orders/?order_type=all&type_id=${e}`,t=>{let i=new Ms(e);return i.orders.buy=t.filter(n=>n.is_buy_order).sort((n,s)=>s.price-n.price),i.orders.sell=t.filter(n=>!n.is_buy_order).sort((n,s)=>n.price-s.price),i.orders.lastUpdated=new Date().getTime(),i})),ui.regions[l].types[e]}const Gi=Al({attributes:{},types:{}},e=>{let l={},t={};al("dgmAttributeTypes").then(i=>{i.forEach(n=>l[n.attributeID]=n)}).then(()=>al("dgmIndustryTypeAttributes")).then(i=>{i.filter(n=>l[n.attributeID]!==void 0).forEach(n=>{var s;t[n.typeID]=(s=t[n.typeID])!=null?s:{},t[n.typeID][n.attributeID]={type_id:n.typeID,attribute_id:n.attributeID,value:n.valueInt==="None"?n.valueFloat:n.valueInt}}),e({attributes:l,types:t})}).catch(i=>console.error(i))});function ws(e,l){return l*(1+(e!=null?e:0)/100)}function oi(e,l){let t=e;return l.forEach(i=>{t=isNaN(i.value)?t:ws(i.value,t)}),t}let gi="en-US";const rt=new Intl.NumberFormat(gi,{useGrouping:!0,maximumFractionDigits:2,minimumFractionDigits:2}).format,ai=new Intl.NumberFormat(gi,{useGrouping:!0,maximumFractionDigits:2,minimumFractionDigits:2,signDisplay:"always"}).format;let ki=new Intl.NumberFormat(gi,{minimumIntegerDigits:2}).format;function Sl(e){let l=Math.ceil(e%60),t=Math.floor(e%(60*60)/60),i=Math.floor(e%(24*60*60)/(60*60)),n=Math.floor(e/(24*60*60)),s=`${ki(i)}:${ki(t)}:${ki(l)}`;return n>0&&(s=`${n}d `+s),s}function Yi(e,l,t){const i=e.slice();return i[49]=l[t],i[51]=t,i}function Ji(e){let l,t,i,n=!isNaN(e[6])&&e[6]!==null,s,r,u=e[11],o=[];for(let _=0;_<u.length;_+=1)o[_]=zi(Yi(e,u,_));let a=e[9]&&e[9].price!==null&&Xi(e),d=e[10]&&e[10].price!==null&&Ki(e),h=n&&Zi(e),p=e[3]&&$i(e);return{c(){for(let _=0;_<o.length;_+=1)o[_].c();l=Ve(),a&&a.c(),t=Ve(),d&&d.c(),i=Ve(),h&&h.c(),s=Ve(),p&&p.c(),r=Ve()},l(_){for(let m=0;m<o.length;m+=1)o[m].l(_);l=Ve(),a&&a.l(_),t=Ve(),d&&d.l(_),i=Ve(),h&&h.l(_),s=Ve(),p&&p.l(_),r=Ve()},m(_,m){for(let v=0;v<o.length;v+=1)o[v].m(_,m);D(_,l,m),a&&a.m(_,m),D(_,t,m),d&&d.m(_,m),D(_,i,m),h&&h.m(_,m),D(_,s,m),p&&p.m(_,m),D(_,r,m)},p(_,m){if(m[0]&12584960){u=_[11];let v;for(v=0;v<u.length;v+=1){const y=Yi(_,u,v);o[v]?o[v].p(y,m):(o[v]=zi(y),o[v].c(),o[v].m(l.parentNode,l))}for(;v<o.length;v+=1)o[v].d(1);o.length=u.length}_[9]&&_[9].price!==null?a?a.p(_,m):(a=Xi(_),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),_[10]&&_[10].price!==null?d?d.p(_,m):(d=Ki(_),d.c(),d.m(i.parentNode,i)):d&&(d.d(1),d=null),m[0]&64&&(n=!isNaN(_[6])&&_[6]!==null),n?h?h.p(_,m):(h=Zi(_),h.c(),h.m(s.parentNode,s)):h&&(h.d(1),h=null),_[3]?p?p.p(_,m):(p=$i(_),p.c(),p.m(r.parentNode,r)):p&&(p.d(1),p=null)},d(_){Vt(o,_),_&&f(l),a&&a.d(_),_&&f(t),d&&d.d(_),_&&f(i),h&&h.d(_),_&&f(s),p&&p.d(_),_&&f(r)}}}function zi(e){let l,t,i,n=[{class:"mark scale"},{style:t=e[22](e[49])},{width:i=1},e[23]],s={};for(let r=0;r<n.length;r+=1)s=Kl(s,n[r]);return{c(){l=zt("rect"),this.h()},l(r){l=Xt(r,"rect",{class:!0,style:!0,width:!0}),M(l).forEach(f),this.h()},h(){Tl(l,s),Cl(l,"svelte-1r3qimx",!0)},m(r,u){D(r,l,u)},p(r,u){Tl(l,s=Wl(n,[{class:"mark scale"},u[0]&4196352&&t!==(t=r[22](r[49]))&&{style:t},{width:i},u[0]&8388608&&r[23]])),Cl(l,"svelte-1r3qimx",!0)},d(r){r&&f(l)}}}function Xi(e){let l,t,i,n=e[4]!=0&&Hi(e);return{c(){l=zt("path"),n&&n.c(),i=Ve(),this.h()},l(s){l=Xt(s,"path",{class:!0,d:!0}),M(l).forEach(f),n&&n.l(s),i=Ve(),this.h()},h(){var s;E(l,"class","graph buy svelte-1r3qimx"),E(l,"d",t=e[25].y(e[24]())([{price:e[9].price,volume_remain:0},...(s=e[16])==null?void 0:s.orders.buy.filter(e[8])]))},m(s,r){D(s,l,r),n&&n.m(s,r),D(s,i,r)},p(s,r){var u;r[0]&50397952&&t!==(t=s[25].y(s[24]())([{price:s[9].price,volume_remain:0},...(u=s[16])==null?void 0:u.orders.buy.filter(s[8])]))&&E(l,"d",t),s[4]!=0?n?n.p(s,r):(n=Hi(s),n.c(),n.m(i.parentNode,i)):n&&(n.d(1),n=null)},d(s){s&&f(l),n&&n.d(s),s&&f(i)}}}function Hi(e){let l,t,i,n=[{class:"overhead buy"},{x:t=e[12](e[9].price*Math.min(1,1+e[4])*e[7])},{width:i=e[12](Math.abs(e[4]*e[9].price*e[7]))},e[23]],s={};for(let r=0;r<n.length;r+=1)s=Kl(s,n[r]);return{c(){l=zt("rect"),this.h()},l(r){l=Xt(r,"rect",{class:!0,x:!0,width:!0}),M(l).forEach(f),this.h()},h(){Tl(l,s),Cl(l,"svelte-1r3qimx",!0)},m(r,u){D(r,l,u)},p(r,u){Tl(l,s=Wl(n,[{class:"overhead buy"},u[0]&4752&&t!==(t=r[12](r[9].price*Math.min(1,1+r[4])*r[7]))&&{x:t},u[0]&4752&&i!==(i=r[12](Math.abs(r[4]*r[9].price*r[7])))&&{width:i},u[0]&8388608&&r[23]])),Cl(l,"svelte-1r3qimx",!0)},d(r){r&&f(l)}}}function Ki(e){let l,t,i,n=e[5]!=0&&Wi(e);return{c(){l=zt("path"),n&&n.c(),i=Ve(),this.h()},l(s){l=Xt(s,"path",{class:!0,d:!0}),M(l).forEach(f),n&&n.l(s),i=Ve(),this.h()},h(){var s;E(l,"class","graph sell svelte-1r3qimx"),E(l,"d",t=e[25].y(e[24]())([{price:e[10].price,volume_remain:0},...(s=e[16])==null?void 0:s.orders.sell.filter(e[8])]))},m(s,r){D(s,l,r),n&&n.m(s,r),D(s,i,r)},p(s,r){var u;r[0]&50398464&&t!==(t=s[25].y(s[24]())([{price:s[10].price,volume_remain:0},...(u=s[16])==null?void 0:u.orders.sell.filter(s[8])]))&&E(l,"d",t),s[5]!=0?n?n.p(s,r):(n=Wi(s),n.c(),n.m(i.parentNode,i)):n&&(n.d(1),n=null)},d(s){s&&f(l),n&&n.d(s),s&&f(i)}}}function Wi(e){let l,t,i,n=[{class:"overhead sell"},{x:t=e[12](e[10].price*Math.min(1,1+e[5])*e[7])},{width:i=e[12](Math.abs(e[5]*e[10].price*e[7]))},e[23]],s={};for(let r=0;r<n.length;r+=1)s=Kl(s,n[r]);return{c(){l=zt("rect"),this.h()},l(r){l=Xt(r,"rect",{class:!0,x:!0,width:!0}),M(l).forEach(f),this.h()},h(){Tl(l,s),Cl(l,"svelte-1r3qimx",!0)},m(r,u){D(r,l,u)},p(r,u){Tl(l,s=Wl(n,[{class:"overhead sell"},u[0]&5280&&t!==(t=r[12](r[10].price*Math.min(1,1+r[5])*r[7]))&&{x:t},u[0]&5280&&i!==(i=r[12](Math.abs(r[5]*r[10].price*r[7])))&&{width:i},u[0]&8388608&&r[23]])),Cl(l,"svelte-1r3qimx",!0)},d(r){r&&f(l)}}}function Zi(e){let l,t,i,n=e[1]!=0&&xi(e);return{c(){l=zt("rect"),n&&n.c(),i=Ve(),this.h()},l(s){l=Xt(s,"rect",{class:!0,x:!0,width:!0,height:!0}),M(l).forEach(f),n&&n.l(s),i=Ve(),this.h()},h(){E(l,"class","mark cost svelte-1r3qimx"),E(l,"x",t=e[12](e[6])),E(l,"width",1),E(l,"height",e[2])},m(s,r){D(s,l,r),n&&n.m(s,r),D(s,i,r)},p(s,r){r[0]&4160&&t!==(t=s[12](s[6]))&&E(l,"x",t),r[0]&4&&E(l,"height",s[2]),s[1]!=0?n?n.p(s,r):(n=xi(s),n.c(),n.m(i.parentNode,i)):n&&(n.d(1),n=null)},d(s){s&&f(l),n&&n.d(s),s&&f(i)}}}function xi(e){let l,t,i,n,s;return{c(){l=zt("rect"),this.h()},l(r){l=Xt(r,"rect",{class:!0,x:!0,width:!0,y:!0,height:!0}),M(l).forEach(f),this.h()},h(){E(l,"class",t=""+(Zl(`difference profit ${e[13]>e[1]?"negative":"positive"}`)+" svelte-1r3qimx")),E(l,"x",i=Math.min(e[12](e[6]),e[12](e[1]*e[7]))),E(l,"width",n=Math.abs(e[12](e[6])-e[12](e[1]*e[7]))),E(l,"y",s=e[14](.5)),E(l,"height",1)},m(r,u){D(r,l,u)},p(r,u){u[0]&8194&&t!==(t=""+(Zl(`difference profit ${r[13]>r[1]?"negative":"positive"}`)+" svelte-1r3qimx"))&&E(l,"class",t),u[0]&4290&&i!==(i=Math.min(r[12](r[6]),r[12](r[1]*r[7])))&&E(l,"x",i),u[0]&4290&&n!==(n=Math.abs(r[12](r[6])-r[12](r[1]*r[7])))&&E(l,"width",n),u[0]&16384&&s!==(s=r[14](.5))&&E(l,"y",s)},d(r){r&&f(l)}}}function $i(e){let l,t,i;return{c(){l=zt("circle"),this.h()},l(n){l=Xt(n,"circle",{class:!0,cx:!0,cy:!0,r:!0}),M(l).forEach(f),this.h()},h(){E(l,"class","mark price svelte-1r3qimx"),E(l,"cx",t=e[12](e[1]*e[7])),E(l,"cy",i=e[14](.5)),E(l,"r",2)},m(n,s){D(n,l,s)},p(n,s){s[0]&4226&&t!==(t=n[12](n[1]*n[7]))&&E(l,"cx",t),s[0]&16384&&i!==(i=n[14](.5))&&E(l,"cy",i)},d(n){n&&f(l)}}}function er(e){let l,t=rt(e[19]*e[7])+"",i,n,s=rt(e[19])+"",r,u,o,a,d,h,p,_,m;return{c(){l=zt("text"),i=P(t),n=P(" @"),r=P(s),d=zt("circle"),this.h()},l(v){l=Xt(v,"text",{class:!0,style:!0,y:!0,dy:!0,"text-anchor":!0});var y=M(l);i=w(y,t),n=w(y," @"),r=w(y,s),y.forEach(f),d=Xt(v,"circle",{class:!0,style:!0,cx:!0,cy:!0,r:!0}),M(d).forEach(f),this.h()},h(){E(l,"class","hover svelte-1r3qimx"),E(l,"style",u=e[22](e[19]*e[7])),E(l,"y",o=e[14](0)),E(l,"dy",a=8),E(l,"text-anchor","middle"),E(d,"class","hover svelte-1r3qimx"),E(d,"style",h=e[22](e[19]*e[7])),E(d,"cx",p=0),E(d,"cy",_=e[14](.5)),E(d,"r",m=4)},m(v,y){D(v,l,y),c(l,i),c(l,n),c(l,r),e[40](l),D(v,d,y)},p(v,y){y[0]&524416&&t!==(t=rt(v[19]*v[7])+"")&&te(i,t),y[0]&524288&&s!==(s=rt(v[19])+"")&&te(r,s),y[0]&4718720&&u!==(u=v[22](v[19]*v[7]))&&E(l,"style",u),y[0]&16384&&o!==(o=v[14](0))&&E(l,"y",o),y[0]&4718720&&h!==(h=v[22](v[19]*v[7]))&&E(d,"style",h),y[0]&16384&&_!==(_=v[14](.5))&&E(d,"cy",_)},d(v){v&&f(l),e[40](null),v&&f(d)}}}function qs(e){let l,t,i,n,s,r,u,o,a,d=[{class:"graphArea"},{width:e[0]},e[23]],h={};for(let m=0;m<d.length;m+=1)h=Kl(h,d[m]);let p=e[17]&&Ji(e),_=e[18]&&er(e);return{c(){l=zt("svg"),t=zt("rect"),p&&p.c(),i=Ve(),_&&_.c(),n=zt("rect"),this.h()},l(m){l=Xt(m,"svg",{height:!0,viewBox:!0,xmlns:!0,class:!0});var v=M(l);t=Xt(v,"rect",{class:!0,width:!0}),M(t).forEach(f),p&&p.l(v),i=Ve(),_&&_.l(v),n=Xt(v,"rect",{class:!0,width:!0,y:!0,height:!0}),M(n).forEach(f),v.forEach(f),this.h()},h(){Tl(t,h),Cl(t,"svelte-1r3qimx",!0),E(n,"class","hitArea svelte-1r3qimx"),E(n,"width",e[0]),E(n,"y",s=e[14](1)),E(n,"height",r=e[14](0)-e[14](1)),E(l,"height",e[2]),E(l,"viewBox",u=`0 0 ${e[0]} ${e[2]}`),E(l,"xmlns","http://www.w3.org/2000/svg"),E(l,"class","svelte-1r3qimx")},m(m,v){D(m,l,v),c(l,t),p&&p.m(l,null),c(l,i),_&&_.m(l,null),c(l,n),e[43](l),o||(a=[me(n,"mouseenter",e[41]),me(n,"mouseleave",e[42]),me(n,"mousemove",e[27]),me(n,"click",e[28])],o=!0)},p(m,v){Tl(t,h=Wl(d,[{class:"graphArea"},v[0]&1&&{width:m[0]},v[0]&8388608&&m[23]])),Cl(t,"svelte-1r3qimx",!0),m[17]?p?p.p(m,v):(p=Ji(m),p.c(),p.m(l,i)):p&&(p.d(1),p=null),m[18]?_?_.p(m,v):(_=er(m),_.c(),_.m(l,n)):_&&(_.d(1),_=null),v[0]&1&&E(n,"width",m[0]),v[0]&16384&&s!==(s=m[14](1))&&E(n,"y",s),v[0]&16384&&r!==(r=m[14](0)-m[14](1))&&E(n,"height",r),v[0]&4&&E(l,"height",m[2]),v[0]&5&&u!==(u=`0 0 ${m[0]} ${m[2]}`)&&E(l,"viewBox",u)},i:Ye,o:Ye,d(m){m&&f(l),p&&p.d(),_&&_.d(),e[43](null),o=!1,Gl(a)}}}let tr=8;function Os(e,l,t){let i,n,s,r,u,o,a,d,h,p,_,m=Ye,v=()=>(m(),m=Pl(i,H=>t(16,_=H)),i),y;e.$$.on_destroy.push(()=>m());let{compact:C=!1}=l,{height:T=C?24:40}=l,{width:S=500}=l,{extents:N=[0,1e3]}=l,{type_id:V=null}=l,q=Ml("marketFilterLocation");Ze(e,q,H=>t(39,y=H));let b=()=>!0;function B(H,ve){return H?ve?H.filter(b)[0]:H[0]:null}let{buyOverheadRate:Q=0}=l,{sellOverheadRate:A=0}=l,$=null,j=null,{lowestSellPrice:L=0}=l,{highestBuyPrice:x=0}=l,{price:X=null}=l,{overridePrice:Y=null}=l,ee=null,ie=null,{totalCost:ge=null}=l,{quantity:se=1}=l,_e=C?[0,T-tr]:[0,T-2*tr],fe=!1,Ce=[],ue=!1,ye=[],Se=0,he=0;function le(H){var xe;let ve=H.clientX-H.target.getBoundingClientRect().left;he=ts(ye,we=>Math.abs(we.price*se-r.invert(ve))/se),t(19,Se=(xe=ye[he])==null?void 0:xe.price)}function Je(H){var ve;((ve=ye[he])==null?void 0:ve.is_buy_order)!==void 0&&(t(34,ee=Se),t(34,ee*=1+(ye[he].is_buy_order?Q:A)))}function ze(H){t(0,S=Be.getBoundingClientRect().width)}let Be;ji(()=>{t(0,S=Be.getBoundingClientRect().width),window.addEventListener("resize",ze)}),hi(()=>{window.removeEventListener("resize",ze)});let de;xr(()=>{if(de){let H=de.getBBox().width/2,ve=r(Se*se);ve-H<0?de.setAttribute("style",`transform: translateX(${ve+H}px)`):ve+H>S&&de.setAttribute("style",`transform: translateX(${ve-H}px)`)}});function tt(H){be[H?"unshift":"push"](()=>{de=H,t(21,de)})}const lt=H=>{t(18,ue=!0),le(H)},Le=H=>t(18,ue=!1);function ut(H){be[H?"unshift":"push"](()=>{Be=H,t(20,Be)})}return e.$$set=H=>{"compact"in H&&t(31,C=H.compact),"height"in H&&t(2,T=H.height),"width"in H&&t(0,S=H.width),"extents"in H&&t(32,N=H.extents),"type_id"in H&&t(3,V=H.type_id),"buyOverheadRate"in H&&t(4,Q=H.buyOverheadRate),"sellOverheadRate"in H&&t(5,A=H.sellOverheadRate),"lowestSellPrice"in H&&t(29,L=H.lowestSellPrice),"highestBuyPrice"in H&&t(30,x=H.highestBuyPrice),"price"in H&&t(1,X=H.price),"overridePrice"in H&&t(33,Y=H.overridePrice),"totalCost"in H&&t(6,ge=H.totalCost),"quantity"in H&&t(7,se=H.quantity)},e.$$.update=()=>{var H,ve,xe;if(e.$$.dirty[0]&8&&v(t(15,i=V&&Ps(V))),e.$$.dirty[1]&256&&t(8,b=we=>y?we.location_id===y:!0),e.$$.dirty[0]&65536|e.$$.dirty[1]&256&&(t(9,$=B(_==null?void 0:_.orders.buy,y)),t(10,j=B(_==null?void 0:_.orders.sell,y))),e.$$.dirty[0]&1536&&(t(29,L=j==null?void 0:j.price),t(30,x=$==null?void 0:$.price)),e.$$.dirty[0]&98304&&((_==null?void 0:_.orders)?i==null||i.status:bi.loading),e.$$.dirty[0]&1056&&t(38,n=(j==null?void 0:j.price)*(1+A)),e.$$.dirty[0]&8|e.$$.dirty[1]&16&&ie!==V&&(t(34,ee=null),t(35,ie=V)),e.$$.dirty[0]&2|e.$$.dirty[1]&140&&(t(1,X=(H=Y!=null?Y:ee)!=null?H:n),isNaN(X)&&t(1,X=0)),e.$$.dirty[0]&192&&t(13,s=ge/se),e.$$.dirty[0]&1|e.$$.dirty[1]&2&&t(12,r=mi().domain([N[0],N[1]]).range([0,S])),e.$$.dirty[0]&128&&t(37,o=mi().domain([se*2,0]).range(_e)),e.$$.dirty[0]&4224&&t(25,a=$r().curve(es).x(we=>r(we.price*se))),e.$$.dirty[1]&64&&t(24,d=()=>{let we=0;return F=>(we+=F.volume_remain,o(we))}),e.$$.dirty[0]&2048|e.$$.dirty[1]&2){t(17,fe=N[1]>N[0]),t(11,Ce=[]);let we=10;for(let F=1e6;F<N[1];F*=we)Ce.push(F)}e.$$.dirty[0]&16384&&t(23,h={y:u(1),height:Math.abs(u(0)-u(1))}),e.$$.dirty[0]&4096&&t(22,p=we=>`transform: translateX(${r(we)}px)`),e.$$.dirty[0]&74048|e.$$.dirty[1]&32&&(_&&_.orders?t(36,ye=(xe=_==null?void 0:_.orders)==null?void 0:xe.buy.concat((ve=_==null?void 0:_.orders)==null?void 0:ve.sell).filter(b)):t(36,ye=[]),ge&&t(36,ye=[...ye,{price:s}]))},t(14,u=mi().domain([1,0]).range(_e)),[S,X,T,V,Q,A,ge,se,b,$,j,Ce,r,s,u,i,_,fe,ue,Se,Be,de,p,h,d,a,q,le,Je,L,x,C,N,Y,ee,ie,ye,o,n,y,tt,lt,Le,ut]}class fl extends kl{constructor(l){super();Il(this,l,Os,qs,El,{compact:31,height:2,width:0,extents:32,type_id:3,buyOverheadRate:4,sellOverheadRate:5,lowestSellPrice:29,highestBuyPrice:30,price:1,overridePrice:33,totalCost:6,quantity:7},null,[-1,-1])}}function js(e,l){return e.reduce((t,i)=>t+(l?l(i):i),0)}function lr(e,l,t){const i=e.slice();return i[27]=l[t],i}function ir(e,l,t){const i=e.slice();return i[27]=l[t],i}function rr(e,l,t){const i=e.slice();return i[27]=l[t],i}function sr(e,l,t){const i=e.slice();return i[34]=l[t],i}function nr(e){let l,t;return{c(){l=g("option"),this.h()},l(i){l=k(i,"OPTION",{}),M(l).forEach(f),this.h()},h(){l.__value=t=null,l.value=l.__value},m(i,n){D(i,l,n)},d(i){i&&f(l)}}}function ur(e){var s;let l,t=((s=e[34].name)!=null?s:e[34].location_id)+"",i,n;return{c(){l=g("option"),i=P(t),this.h()},l(r){l=k(r,"OPTION",{});var u=M(l);i=w(u,t),u.forEach(f),this.h()},h(){l.__value=n=e[34].location_id,l.value=l.__value},m(r,u){D(r,l,u),c(l,i)},p(r,u){var o;u[0]&1024&&t!==(t=((o=r[34].name)!=null?o:r[34].location_id)+"")&&te(i,t),u[0]&1024&&n!==(n=r[34].location_id)&&(l.__value=n,l.value=l.__value)},d(r){r&&f(l)}}}function or(e){let l,t=(e[5]?"+":"-")+"",i,n,s;return{c(){l=g("button"),i=P(t)},l(r){l=k(r,"BUTTON",{});var u=M(l);i=w(u,t),u.forEach(f)},m(r,u){D(r,l,u),c(l,i),n||(s=me(l,"click",e[22]),n=!0)},p(r,u){u[0]&32&&t!==(t=(r[5]?"+":"-")+"")&&te(i,t)},d(r){r&&f(l),n=!1,s()}}}function ar(e){let l,t,i,n,s,r=e[1]*100+"",u,o,a,d,h=e[9].activityName+"",p,_,m,v,y=e[8]&&fr(e);return{c(){l=g("div"),t=g("dl"),i=g("dt"),n=P("System cost index"),s=g("dd"),u=P(r),o=P("%"),a=g("dt"),d=P("Tax for "),p=P(h),_=g("dd"),m=P(e[3]),v=P("%"),y&&y.c(),this.h()},l(C){l=k(C,"DIV",{class:!0});var T=M(l);t=k(T,"DL",{});var S=M(t);i=k(S,"DT",{});var N=M(i);n=w(N,"System cost index"),N.forEach(f),s=k(S,"DD",{});var V=M(s);u=w(V,r),o=w(V,"%"),V.forEach(f),a=k(S,"DT",{});var q=M(a);d=w(q,"Tax for "),p=w(q,h),q.forEach(f),_=k(S,"DD",{});var b=M(_);m=w(b,e[3]),v=w(b,"%"),b.forEach(f),y&&y.l(S),S.forEach(f),T.forEach(f),this.h()},h(){E(l,"class","overlay")},m(C,T){D(C,l,T),c(l,t),c(t,i),c(i,n),c(t,s),c(s,u),c(s,o),c(t,a),c(a,d),c(a,p),c(t,_),c(_,m),c(_,v),y&&y.m(t,null)},p(C,T){T[0]&2&&r!==(r=C[1]*100+"")&&te(u,r),T[0]&512&&h!==(h=C[9].activityName+"")&&te(p,h),T[0]&8&&te(m,C[3]),C[8]?y?y.p(C,T):(y=fr(C),y.c(),y.m(t,null)):y&&(y.d(1),y=null)},d(C){C&&f(l),y&&y.d()}}}function fr(e){let l,t,i,n,s=e[2].materialConsumptionModifier+"",r,u,o=e[2].jobCostModifier+"",a,d,h=e[2].jobDurationModifier+"",p,_,m,v,y,C,T,S=e[4].timeReductionBonus+"",N,V,q=(e[7]===Ot||e[7]===At)&&cr(e),b=e[7]!==Ot&&e[7]!==At&&_r(e);return{c(){l=g("dt"),t=P("Structure role bonuses"),i=g("dd"),n=P("ME "),r=P(s),u=P("% | Cost "),a=P(o),d=P("% | TE "),p=P(h),_=P("%"),m=g("dt"),v=P("Structure rig bonuses"),y=g("dd"),q&&q.c(),C=J(),b&&b.c(),T=P(`\r
                | TE `),N=P(S),V=P("%"),this.h()},l(B){l=k(B,"DT",{class:!0});var Q=M(l);t=w(Q,"Structure role bonuses"),Q.forEach(f),i=k(B,"DD",{class:!0});var A=M(i);n=w(A,"ME "),r=w(A,s),u=w(A,"% | Cost "),a=w(A,o),d=w(A,"% | TE "),p=w(A,h),_=w(A,"%"),A.forEach(f),m=k(B,"DT",{class:!0});var $=M(m);v=w($,"Structure rig bonuses"),$.forEach(f),y=k(B,"DD",{class:!0});var j=M(y);q&&q.l(j),C=z(j),b&&b.l(j),T=w(j,`\r
                | TE `),N=w(j,S),V=w(j,"%"),j.forEach(f),this.h()},h(){E(l,"class","full-width"),E(i,"class","full-width"),E(m,"class","full-width"),E(y,"class","full-width")},m(B,Q){D(B,l,Q),c(l,t),D(B,i,Q),c(i,n),c(i,r),c(i,u),c(i,a),c(i,d),c(i,p),c(i,_),D(B,m,Q),c(m,v),D(B,y,Q),q&&q.m(y,null),c(y,C),b&&b.m(y,null),c(y,T),c(y,N),c(y,V)},p(B,Q){Q[0]&4&&s!==(s=B[2].materialConsumptionModifier+"")&&te(r,s),Q[0]&4&&o!==(o=B[2].jobCostModifier+"")&&te(a,o),Q[0]&4&&h!==(h=B[2].jobDurationModifier+"")&&te(p,h),B[7]===Ot||B[7]===At?q?q.p(B,Q):(q=cr(B),q.c(),q.m(y,C)):q&&(q.d(1),q=null),B[7]!==Ot&&B[7]!==At?b?b.p(B,Q):(b=_r(B),b.c(),b.m(y,T)):b&&(b.d(1),b=null),Q[0]&16&&S!==(S=B[4].timeReductionBonus+"")&&te(N,S)},d(B){B&&f(l),B&&f(i),B&&f(m),B&&f(y),q&&q.d(),b&&b.d()}}}function cr(e){let l,t=e[4].materialReductionBonus+"",i,n;return{c(){l=P("ME "),i=P(t),n=P("%")},l(s){l=w(s,"ME "),i=w(s,t),n=w(s,"%")},m(s,r){D(s,l,r),D(s,i,r),D(s,n,r)},p(s,r){r[0]&16&&t!==(t=s[4].materialReductionBonus+"")&&te(i,t)},d(s){s&&f(l),s&&f(i),s&&f(n)}}}function _r(e){let l,t=e[4].costReductionBonus+"",i,n;return{c(){l=P("Cost "),i=P(t),n=P("%")},l(s){l=w(s,"Cost "),i=w(s,t),n=w(s,"%")},m(s,r){D(s,l,r),D(s,i,r),D(s,n,r)},p(s,r){r[0]&16&&t!==(t=s[4].costReductionBonus+"")&&te(i,t)},d(s){s&&f(l),s&&f(i),s&&f(n)}}}function dr(e){let l,t,i,n,s=e[1]*100+"",r,u,o,a,d=e[9].activityName+"",h,p,_,m,v,y,C,T,S,N,V,q=e[8]&&pr(e);return{c(){l=g("dl"),t=g("dt"),i=P("System cost index"),n=g("dd"),r=P(s),u=P("%"),o=g("dt"),a=P("Tax for "),h=P(d),p=g("dd"),_=g("input"),T=J(),S=P(e[3]),q&&q.c(),this.h()},l(b){l=k(b,"DL",{});var B=M(l);t=k(B,"DT",{});var Q=M(t);i=w(Q,"System cost index"),Q.forEach(f),n=k(B,"DD",{});var A=M(n);r=w(A,s),u=w(A,"%"),A.forEach(f),o=k(B,"DT",{});var $=M(o);a=w($,"Tax for "),h=w($,d),$.forEach(f),p=k(B,"DD",{});var j=M(p);_=k(j,"INPUT",{type:!0,min:!0,max:!0,step:!0}),T=z(j),S=w(j,e[3]),j.forEach(f),q&&q.l(B),B.forEach(f),this.h()},h(){E(_,"type","range"),E(_,"min",m=0),E(_,"max",v=20),E(_,"step",y=.5),_.value=e[3],_.disabled=C=li(e[0])},m(b,B){D(b,l,B),c(l,t),c(t,i),c(l,n),c(n,r),c(n,u),c(l,o),c(o,a),c(o,h),c(l,p),c(p,_),c(p,T),c(p,S),q&&q.m(l,null),N||(V=me(_,"input",e[12]),N=!0)},p(b,B){B[0]&2&&s!==(s=b[1]*100+"")&&te(r,s),B[0]&512&&d!==(d=b[9].activityName+"")&&te(h,d),B[0]&8&&(_.value=b[3]),B[0]&1025&&C!==(C=li(b[0]))&&(_.disabled=C),B[0]&8&&te(S,b[3]),b[8]?q?q.p(b,B):(q=pr(b),q.c(),q.m(l,null)):q&&(q.d(1),q=null)},d(b){b&&f(l),q&&q.d(),N=!1,V()}}}function pr(e){let l,t,i,n,s=e[2].materialConsumptionModifier+"",r,u,o=e[2].jobCostModifier+"",a,d,h=e[2].jobDurationModifier+"",p,_,m,v,y,C,T=(e[7]===Ot||e[7]===At)&&hr(e),S=e[7]!==Ot&&e[7]!==At&&br(e),N=e[14],V=[];for(let q=0;q<N.length;q+=1)V[q]=vr(lr(e,N,q));return{c(){l=g("dt"),t=P("Structure role bonuses"),i=g("dd"),n=P("ME "),r=P(s),u=P("% | Cost "),a=P(o),d=P("% | TE "),p=P(h),_=P("%"),T&&T.c(),m=Ve(),S&&S.c(),v=g("dt"),y=P("Structure rig duration bonus"),C=g("dd");for(let q=0;q<V.length;q+=1)V[q].c()},l(q){l=k(q,"DT",{});var b=M(l);t=w(b,"Structure role bonuses"),b.forEach(f),i=k(q,"DD",{});var B=M(i);n=w(B,"ME "),r=w(B,s),u=w(B,"% | Cost "),a=w(B,o),d=w(B,"% | TE "),p=w(B,h),_=w(B,"%"),B.forEach(f),T&&T.l(q),m=Ve(),S&&S.l(q),v=k(q,"DT",{});var Q=M(v);y=w(Q,"Structure rig duration bonus"),Q.forEach(f),C=k(q,"DD",{});var A=M(C);for(let $=0;$<V.length;$+=1)V[$].l(A);A.forEach(f)},m(q,b){D(q,l,b),c(l,t),D(q,i,b),c(i,n),c(i,r),c(i,u),c(i,a),c(i,d),c(i,p),c(i,_),T&&T.m(q,b),D(q,m,b),S&&S.m(q,b),D(q,v,b),c(v,y),D(q,C,b);for(let B=0;B<V.length;B+=1)V[B].m(C,null)},p(q,b){if(b[0]&4&&s!==(s=q[2].materialConsumptionModifier+"")&&te(r,s),b[0]&4&&o!==(o=q[2].jobCostModifier+"")&&te(a,o),b[0]&4&&h!==(h=q[2].jobDurationModifier+"")&&te(p,h),q[7]===Ot||q[7]===At?T?T.p(q,b):(T=hr(q),T.c(),T.m(m.parentNode,m)):T&&(T.d(1),T=null),q[7]!==Ot&&q[7]!==At?S?S.p(q,b):(S=br(q),S.c(),S.m(v.parentNode,v)):S&&(S.d(1),S=null),b[0]&16400){N=q[14];let B;for(B=0;B<N.length;B+=1){const Q=lr(q,N,B);V[B]?V[B].p(Q,b):(V[B]=vr(Q),V[B].c(),V[B].m(C,null))}for(;B<V.length;B+=1)V[B].d(1);V.length=N.length}},d(q){q&&f(l),q&&f(i),T&&T.d(q),q&&f(m),S&&S.d(q),q&&f(v),q&&f(C),Vt(V,q)}}}function hr(e){let l,t,i,n,s=e[13],r=[];for(let u=0;u<s.length;u+=1)r[u]=mr(rr(e,s,u));return{c(){l=g("dt"),t=P("Structure rig material bonus"),i=g("dd");for(let u=0;u<r.length;u+=1)r[u].c();n=J()},l(u){l=k(u,"DT",{});var o=M(l);t=w(o,"Structure rig material bonus"),o.forEach(f),i=k(u,"DD",{});var a=M(i);for(let d=0;d<r.length;d+=1)r[d].l(a);n=z(a),a.forEach(f)},m(u,o){D(u,l,o),c(l,t),D(u,i,o);for(let a=0;a<r.length;a+=1)r[a].m(i,null);c(i,n)},p(u,o){if(o[0]&8208){s=u[13];let a;for(a=0;a<s.length;a+=1){const d=rr(u,s,a);r[a]?r[a].p(d,o):(r[a]=mr(d),r[a].c(),r[a].m(i,n))}for(;a<r.length;a+=1)r[a].d(1);r.length=s.length}},d(u){u&&f(l),u&&f(i),Vt(r,u)}}}function mr(e){let l,t,i,n=e[27]+"",s,r,u,o;return{c(){l=g("label"),t=g("input"),i=J(),s=P(n),r=P("%"),this.h()},l(a){l=k(a,"LABEL",{});var d=M(l);t=k(d,"INPUT",{type:!0,name:!0}),i=z(d),s=w(d,n),r=w(d,"%"),d.forEach(f),this.h()},h(){E(t,"type","radio"),E(t,"name","MEBonus"),t.__value=e[27],t.value=t.__value,e[24][0].push(t)},m(a,d){D(a,l,d),c(l,t),t.checked=t.__value===e[4].materialReductionBonus,c(l,i),c(l,s),c(l,r),u||(o=me(t,"change",e[23]),u=!0)},p(a,d){d[0]&16&&(t.checked=t.__value===a[4].materialReductionBonus)},d(a){a&&f(l),e[24][0].splice(e[24][0].indexOf(t),1),u=!1,o()}}}function br(e){let l,t,i,n,s=e[15],r=[];for(let u=0;u<s.length;u+=1)r[u]=yr(ir(e,s,u));return{c(){l=g("dt"),t=P("Structure rig cost bonus"),i=g("dd");for(let u=0;u<r.length;u+=1)r[u].c();n=J()},l(u){l=k(u,"DT",{});var o=M(l);t=w(o,"Structure rig cost bonus"),o.forEach(f),i=k(u,"DD",{});var a=M(i);for(let d=0;d<r.length;d+=1)r[d].l(a);n=z(a),a.forEach(f)},m(u,o){D(u,l,o),c(l,t),D(u,i,o);for(let a=0;a<r.length;a+=1)r[a].m(i,null);c(i,n)},p(u,o){if(o[0]&32784){s=u[15];let a;for(a=0;a<s.length;a+=1){const d=ir(u,s,a);r[a]?r[a].p(d,o):(r[a]=yr(d),r[a].c(),r[a].m(i,n))}for(;a<r.length;a+=1)r[a].d(1);r.length=s.length}},d(u){u&&f(l),u&&f(i),Vt(r,u)}}}function yr(e){let l,t,i,n=e[27]+"",s,r,u,o;return{c(){l=g("label"),t=g("input"),i=J(),s=P(n),r=P("%"),this.h()},l(a){l=k(a,"LABEL",{});var d=M(l);t=k(d,"INPUT",{type:!0,name:!0}),i=z(d),s=w(d,n),r=w(d,"%"),d.forEach(f),this.h()},h(){E(t,"type","radio"),E(t,"name","CostBonus"),t.__value=e[27],t.value=t.__value,e[24][1].push(t)},m(a,d){D(a,l,d),c(l,t),t.checked=t.__value===e[4].costReductionBonus,c(l,i),c(l,s),c(l,r),u||(o=me(t,"change",e[25]),u=!0)},p(a,d){d[0]&16&&(t.checked=t.__value===a[4].costReductionBonus)},d(a){a&&f(l),e[24][1].splice(e[24][1].indexOf(t),1),u=!1,o()}}}function vr(e){let l,t,i,n=e[27]+"",s,r,u,o;return{c(){l=g("label"),t=g("input"),i=J(),s=P(n),r=P("%"),this.h()},l(a){l=k(a,"LABEL",{});var d=M(l);t=k(d,"INPUT",{type:!0,name:!0}),i=z(d),s=w(d,n),r=w(d,"%"),d.forEach(f),this.h()},h(){E(t,"type","radio"),E(t,"name","TEBonus"),t.__value=e[27],t.value=t.__value,e[24][2].push(t)},m(a,d){D(a,l,d),c(l,t),t.checked=t.__value===e[4].timeReductionBonus,c(l,i),c(l,s),c(l,r),u||(o=me(t,"change",e[26]),u=!0)},p(a,d){d[0]&16&&(t.checked=t.__value===a[4].timeReductionBonus)},d(a){a&&f(l),e[24][2].splice(e[24][2].indexOf(t),1),u=!1,o()}}}function Ss(e){let l,t,i,n,s,r,u,o,a,d=e[6]&&nr(),h=e[10],p=[];for(let y=0;y<h.length;y+=1)p[y]=ur(sr(e,h,y));let _=e[9]&&or(e),m=e[9]&&e[5]&&ar(e),v=e[9]&&!e[5]&&dr(e);return{c(){l=g("span"),t=g("select"),d&&d.c(),i=Ve();for(let y=0;y<p.length;y+=1)p[y].c();n=J(),_&&_.c(),s=J(),m&&m.c(),r=J(),v&&v.c(),u=Ve(),this.h()},l(y){l=k(y,"SPAN",{class:!0});var C=M(l);t=k(C,"SELECT",{class:!0});var T=M(t);d&&d.l(T),i=Ve();for(let S=0;S<p.length;S+=1)p[S].l(T);T.forEach(f),n=z(C),_&&_.l(C),s=z(C),m&&m.l(C),C.forEach(f),r=z(y),v&&v.l(y),u=Ve(),this.h()},h(){E(t,"class","svelte-1kq2d5g"),e[0]===void 0&&Fl(()=>e[21].call(t)),E(l,"class","overlay-parent svelte-1kq2d5g")},m(y,C){D(y,l,C),c(l,t),d&&d.m(t,null),c(t,i);for(let T=0;T<p.length;T+=1)p[T].m(t,null);tl(t,e[0]),c(l,n),_&&_.m(l,null),c(l,s),m&&m.m(l,null),D(y,r,C),v&&v.m(y,C),D(y,u,C),o||(a=me(t,"change",e[21]),o=!0)},p(y,C){if(y[6]?d||(d=nr(),d.c(),d.m(t,i)):d&&(d.d(1),d=null),C[0]&1024){h=y[10];let T;for(T=0;T<h.length;T+=1){const S=sr(y,h,T);p[T]?p[T].p(S,C):(p[T]=ur(S),p[T].c(),p[T].m(t,null))}for(;T<p.length;T+=1)p[T].d(1);p.length=h.length}C[0]&1025&&tl(t,y[0]),y[9]?_?_.p(y,C):(_=or(y),_.c(),_.m(l,s)):_&&(_.d(1),_=null),y[9]&&y[5]?m?m.p(y,C):(m=ar(y),m.c(),m.m(l,null)):m&&(m.d(1),m=null),y[9]&&!y[5]?v?v.p(y,C):(v=dr(y),v.c(),v.m(u.parentNode,u)):v&&(v.d(1),v=null)},i:Ye,o:Ye,d(y){y&&f(l),d&&d.d(),Vt(p,y),_&&_.d(),m&&m.d(),y&&f(r),v&&v.d(y),y&&f(u),o=!1,a()}}}const Ii=.01,Ns=35825,Ls=35826,Us=35827,Vs=35835,gr=10;function As(e,l,t){let i,n,s,r,u=Ye,o=()=>(u(),u=Pl(i,Y=>t(17,r=Y)),i),a,d,h;Ze(e,Ni,Y=>t(18,a=Y)),Ze(e,Rs,Y=>t(19,d=Y)),Ze(e,zl,Y=>t(20,h=Y)),e.$$.on_destroy.push(()=>u());let{value:p=null}=l,{allowUnselected:_=!1}=l,{selectedLocation:m=null}=l,{activity:v=null}=l,{activitySystemCostIndex:y=Ii}=l,{structureRoleBonuses:C=null}=l,{activityTax:T=gr}=l;function S(Y){let ee={};ee[p]={},ee[p][v]=parseFloat(Y.target.value),Ni.update(ee)}const N=[0,-2,-2.4],V=[0,-20,-24],q=[0,-10,-12];let{structureRigBonuses:b=null}=l,{collapsed:B=!0}=l,Q=[];const A=[[],[],[]];function $(){p=Ql(this),t(0,p),t(6,_),t(17,r),t(10,Q),t(17,r)}const j=()=>{t(5,B=!B)};function L(){b.materialReductionBonus=this.__value,t(4,b),t(8,s),t(16,m),t(0,p),t(17,r),t(6,_)}function x(){b.costReductionBonus=this.__value,t(4,b),t(8,s),t(16,m),t(0,p),t(17,r),t(6,_)}function X(){b.timeReductionBonus=this.__value,t(4,b),t(8,s),t(16,m),t(0,p),t(17,r),t(6,_)}return e.$$set=Y=>{"value"in Y&&t(0,p=Y.value),"allowUnselected"in Y&&t(6,_=Y.allowUnselected),"selectedLocation"in Y&&t(16,m=Y.selectedLocation),"activity"in Y&&t(7,v=Y.activity),"activitySystemCostIndex"in Y&&t(1,y=Y.activitySystemCostIndex),"structureRoleBonuses"in Y&&t(2,C=Y.structureRoleBonuses),"activityTax"in Y&&t(3,T=Y.activityTax),"structureRigBonuses"in Y&&t(4,b=Y.structureRigBonuses),"collapsed"in Y&&t(5,B=Y.collapsed)},e.$$.update=()=>{var Y;if(e.$$.dirty[0]&131137&&!_&&Object.keys(r).length>0&&Object.keys(r).map(ee=>parseInt(ee)).indexOf(p)<0&&t(0,p=parseInt(Object.keys(r)[0])),e.$$.dirty[0]&131073&&t(16,m=r[p]),e.$$.dirty[0]&1048704&&t(9,n=h.activities[v]),e.$$.dirty[0]&590464&&(n?t(1,y=(Y=Bs(d,m,v))!=null?Y:Ii):t(1,y=Ii)),e.$$.dirty[0]&65537&&t(8,s=m&&!li(p)),e.$$.dirty[0]&65920)if(s)switch(m.type_id){case Ns:t(2,C={jobDurationModifier:-15,materialConsumptionModifier:0,jobCostModifier:-3}),(v===Ot||v===At)&&t(2,C.materialConsumptionModifier=-1,C);break;case Ls:t(2,C={jobDurationModifier:-20,materialConsumptionModifier:0,jobCostModifier:-4}),(v===Ot||v===At)&&t(2,C.materialConsumptionModifier=-1,C);break;case Us:t(2,C={jobDurationModifier:-30,materialConsumptionModifier:0,jobCostModifier:-5}),(v===Ot||v===At)&&t(2,C.materialConsumptionModifier=-1,C);break;case Vs:t(2,C={jobDurationModifier:0,materialConsumptionModifier:0,jobCostModifier:0});break;default:t(2,C=null)}else t(2,C=null);e.$$.dirty[0]&262529&&(s&&a[p]&&a[p][v]!==void 0?t(3,T=a[p][v]):t(3,T=gr)),e.$$.dirty[0]&256&&(s?t(4,b={materialReductionBonus:-2,timeReductionBonus:0,costReductionBonus:0}):t(4,b=null)),e.$$.dirty[0]&131072&&t(10,Q=Object.keys(r).map(ee=>{var ie;return{location_id:parseInt(ee),name:(ie=r[ee])==null?void 0:ie.name}}).sort((ee,ie)=>ee.name&&ie.name?ee.name.localeCompare(ie.name):0))},o(t(11,i=Ml("locations"))),[p,y,C,T,b,B,_,v,s,n,Q,i,S,N,V,q,m,r,a,d,h,$,j,L,A,x,X]}class fi extends kl{constructor(l){super();Il(this,l,As,Ss,El,{value:0,allowUnselected:6,selectedLocation:16,activity:7,activitySystemCostIndex:1,structureRoleBonuses:2,activityTax:3,structureRigBonuses:4,collapsed:5},null,[-1,-1])}}function kr(e,l,t){const i=e.slice();return i[58]=l[t],i}function Ir(e,l,t){const i=e.slice();return i[61]=l[t],i}function Er(e,l,t){const i=e.slice();return i[64]=l[t],i[65]=l,i[66]=t,i}function Tr(e){var y,C;let l,t=e[28].types[e[64]].name+"",i,n,s,r,u=((y=e[25].materials[e[64]])==null?void 0:y.quantity)+"",o,a,d,h,p,_;function m(T){e[51](T,e[64])}let v={compact:!0,extents:e[29],quantity:(C=e[25].materials[e[64]])==null?void 0:C.quantity,type_id:e[64],buyOverheadRate:e[1]};return e[5][e[64]]!==void 0&&(v.price=e[5][e[64]]),h=new fl({props:v}),be.push(()=>Ee(h,"price",m)),{c(){l=g("div"),i=P(t),s=J(),r=g("div"),o=P(u),a=J(),d=g("div"),ht(h.$$.fragment),this.h()},l(T){l=k(T,"DIV",{class:!0,title:!0});var S=M(l);i=w(S,t),S.forEach(f),s=z(T),r=k(T,"DIV",{class:!0});var N=M(r);o=w(N,u),N.forEach(f),a=z(T),d=k(T,"DIV",{class:!0});var V=M(d);mt(h.$$.fragment,V),V.forEach(f),this.h()},h(){E(l,"class","itemName"),E(l,"title",n=`${e[28].types[e[64]].name} [${e[64]}]`),E(r,"class","qty"),E(d,"class","graph svelte-1u87si0")},m(T,S){D(T,l,S),c(l,i),D(T,s,S),D(T,r,S),c(r,o),D(T,a,S),D(T,d,S),bt(h,d,null),_=!0},p(T,S){var V,q;e=T,(!_||S[0]&301989888)&&t!==(t=e[28].types[e[64]].name+"")&&te(i,t),(!_||S[0]&301989888&&n!==(n=`${e[28].types[e[64]].name} [${e[64]}]`))&&E(l,"title",n),(!_||S[0]&33554432)&&u!==(u=((V=e[25].materials[e[64]])==null?void 0:V.quantity)+"")&&te(o,u);const N={};S[0]&536870912&&(N.extents=e[29]),S[0]&33554432&&(N.quantity=(q=e[25].materials[e[64]])==null?void 0:q.quantity),S[0]&33554432&&(N.type_id=e[64]),S[0]&2&&(N.buyOverheadRate=e[1]),!p&&S[0]&33554464&&(p=!0,N.price=e[5][e[64]],Te(()=>p=!1)),h.$set(N)},i(T){_||(ne(h.$$.fragment,T),_=!0)},o(T){ae(h.$$.fragment,T),_=!1},d(T){T&&f(l),T&&f(s),T&&f(r),T&&f(a),T&&f(d),yt(h)}}}function Cr(e){let l,t=e[61].name+"",i,n;return{c(){l=g("option"),i=P(t),this.h()},l(s){l=k(s,"OPTION",{});var r=M(l);i=w(r,t),r.forEach(f),this.h()},h(){l.__value=n=e[61].type_id,l.value=l.__value},m(s,r){D(s,l,r),c(l,i)},p(s,r){r[1]&1&&t!==(t=s[61].name+"")&&te(i,t),r[1]&1&&n!==(n=s[61].type_id)&&(l.__value=n,l.value=l.__value)},d(s){s&&f(l)}}}function Fs(e){let l,t,i;return{c(){l=g("div"),t=J(),i=g("div"),this.h()},l(n){l=k(n,"DIV",{}),M(l).forEach(f),t=z(n),i=k(n,"DIV",{class:!0}),M(i).forEach(f),this.h()},h(){E(i,"class","graph svelte-1u87si0")},m(n,s){D(n,l,s),D(n,t,s),D(n,i,s)},p:Ye,i:Ye,o:Ye,d(n){n&&f(l),n&&f(t),n&&f(i)}}}function Qs(e){let l,t=1+"",i,n,s,r,u,o;function a(h){e[53](h)}let d={compact:!0,extents:e[29],quantity:1,type_id:e[6],buyOverheadRate:e[1]};return e[5][e[6]]!==void 0&&(d.price=e[5][e[6]]),r=new fl({props:d}),be.push(()=>Ee(r,"price",a)),{c(){l=g("div"),i=P(t),n=J(),s=g("div"),ht(r.$$.fragment),this.h()},l(h){l=k(h,"DIV",{class:!0});var p=M(l);i=w(p,t),p.forEach(f),n=z(h),s=k(h,"DIV",{class:!0});var _=M(s);mt(r.$$.fragment,_),_.forEach(f),this.h()},h(){E(l,"class","qty"),E(s,"class","graph svelte-1u87si0")},m(h,p){D(h,l,p),c(l,i),D(h,n,p),D(h,s,p),bt(r,s,null),o=!0},p(h,p){const _={};p[0]&536870912&&(_.extents=h[29]),p[0]&64&&(_.type_id=h[6]),p[0]&2&&(_.buyOverheadRate=h[1]),!u&&p[0]&96&&(u=!0,_.price=h[5][h[6]],Te(()=>u=!1)),r.$set(_)},i(h){o||(ne(r.$$.fragment,h),o=!0)},o(h){ae(r.$$.fragment,h),o=!1},d(h){h&&f(l),h&&f(n),h&&f(s),yt(r)}}}function Rr(e){var s,r;let l,t=((r=e[28].types[(s=e[58])==null?void 0:s.type_id])==null?void 0:r.name)+"",i,n;return{c(){l=g("option"),i=P(t),this.h()},l(u){l=k(u,"OPTION",{});var o=M(l);i=w(o,t),o.forEach(f),this.h()},h(){l.__value=n=e[58],l.value=l.__value},m(u,o){D(u,l,o),c(l,i)},p(u,o){var a,d;o[0]&268435464&&t!==(t=((d=u[28].types[(a=u[58])==null?void 0:a.type_id])==null?void 0:d.name)+"")&&te(i,t),o[0]&8&&n!==(n=u[58])&&(l.__value=n,l.value=l.__value)},d(u){u&&f(l)}}}function Gs(e){let l,t=1+"",i,n,s,r,u,o;function a(h){e[56](h)}let d={compact:!0,extents:e[29],quantity:1,type_id:e[4].type_id,buyOverheadRate:e[1]};return e[5][e[4].type_id]!==void 0&&(d.price=e[5][e[4].type_id]),r=new fl({props:d}),be.push(()=>Ee(r,"price",a)),{c(){l=g("div"),i=P(t),n=J(),s=g("div"),ht(r.$$.fragment),this.h()},l(h){l=k(h,"DIV",{class:!0});var p=M(l);i=w(p,t),p.forEach(f),n=z(h),s=k(h,"DIV",{class:!0});var _=M(s);mt(r.$$.fragment,_),_.forEach(f),this.h()},h(){E(l,"class","qty"),E(s,"class","graph svelte-1u87si0")},m(h,p){D(h,l,p),c(l,i),D(h,n,p),D(h,s,p),bt(r,s,null),o=!0},p(h,p){const _={};p[0]&536870912&&(_.extents=h[29]),p[0]&16&&(_.type_id=h[4].type_id),p[0]&2&&(_.buyOverheadRate=h[1]),!u&&p[0]&48&&(u=!0,_.price=h[5][h[4].type_id],Te(()=>u=!1)),r.$set(_)},i(h){o||(ne(r.$$.fragment,h),o=!0)},o(h){ae(r.$$.fragment,h),o=!1},d(h){h&&f(l),h&&f(n),h&&f(s),yt(r)}}}function Ys(e){let l,t,i,n,s,r,u;return{c(){l=g("div"),t=J(),i=g("div"),n=P("Blueprint cost per run "),s=g("input"),this.h()},l(o){l=k(o,"DIV",{}),M(l).forEach(f),t=z(o),i=k(o,"DIV",{class:!0});var a=M(i);n=w(a,"Blueprint cost per run "),s=k(a,"INPUT",{type:!0}),a.forEach(f),this.h()},h(){E(s,"type","number"),E(i,"class","graph svelte-1u87si0")},m(o,a){D(o,l,a),D(o,t,a),D(o,i,a),c(i,n),c(i,s),ct(s,e[7]),r||(u=me(s,"input",e[55]),r=!0)},p(o,a){a[0]&128&&Nt(s.value)!==o[7]&&ct(s,o[7])},i:Ye,o:Ye,d(o){o&&f(l),o&&f(t),o&&f(i),r=!1,u()}}}function Js(e){var $t,nt,Yt;let l,t=(($t=e[13])==null?void 0:$t.name)+"",i,n,s,r,u,o,a,d=((nt=e[14])==null?void 0:nt.name)+"",h,p,_,m,v,y,C,T=((Yt=e[15])==null?void 0:Yt.name)+"",S,N,V,q,b,B,Q,A,$,j,L,x,X,Y,ee,ie,ge,se,_e,fe,Ce,ue,ye,Se,he,le,Je,ze,Be,de,tt,lt,Le,ut=Rl(e[20])+"",H,ve,xe,we,F=Rl(e[22])+"",qe,_t,Ae,ot,Re=Rl(e[23])+"",K,Oe,vt,Ne,dt=Rl(100-e[21]*100)+"",st,Mt,Xe,$e,He,Me,pe,Pe,gt,U,je,Pt,oe,Ht,Ue=rt(e[26])+"",pt,jt,Kt,kt=Sl(e[30])+"",at,De,Ft,O,W=rt(e[12])+"",Fe,ke,Ie,Qe,wt=e[19]*100+"",Qt,ll,Wt,Zt,Ct=Math.ceil(Math.log(1-.9)/Math.log(1-e[19]))+"",xt,It,Gt,Dl,cl,Bl,nl,Lt,_l=rt(e[0])+"",Ge,ft,wl,Hl;function ci(I){e[46](I)}function _i(I){e[47](I)}function ql(I){e[48](I)}function Rt(I){e[49](I)}let Ke={activity:si};e[8]!==void 0&&(Ke.activitySystemCostIndex=e[8]),e[9]!==void 0&&(Ke.activityTax=e[9]),e[10]!==void 0&&(Ke.structureRoleBonuses=e[10]),e[11]!==void 0&&(Ke.structureRigBonuses=e[11]),B=new fi({props:Ke}),be.push(()=>Ee(B,"activitySystemCostIndex",ci)),be.push(()=>Ee(B,"activityTax",_i)),be.push(()=>Ee(B,"structureRoleBonuses",ql)),be.push(()=>Ee(B,"structureRigBonuses",Rt)),fe=new fl({props:{compact:!0,extents:e[29],quantity:1,totalCost:e[26]}});let dl=Object.keys(e[25].materials).map(e[50]),et=[];for(let I=0;I<dl.length;I+=1)et[I]=Tr(Er(e,dl,I));const di=I=>ae(et[I],1,1,()=>{et[I]=null});let ml=Object.values(e[31]),Dt=[];for(let I=0;I<ml.length;I+=1)Dt[I]=Cr(Ir(e,ml,I));const pl=[Qs,Fs],qt=[];function We(I,Z){return I[6]?0:1}$e=We(e),He=qt[$e]=pl[$e](e);let bl=e[3],Tt=[];for(let I=0;I<bl.length;I+=1)Tt[I]=Rr(kr(e,bl,I));const R=[Ys,Gs],G=[];function Et(I,Z){return I[27]?0:1}return U=Et(e),je=G[U]=R[U](e),{c(){l=g("label"),i=P(t),n=J(),s=g("input"),r=J(),u=g("br"),o=J(),a=g("label"),h=P(d),p=J(),_=g("input"),m=J(),v=g("br"),y=J(),C=g("label"),S=P(T),N=J(),V=g("input"),q=J(),b=g("p"),ht(B.$$.fragment),L=g("br"),x=J(),X=g("div"),Y=g("div"),ee=P("Job cost"),ie=J(),ge=g("div"),se=J(),_e=g("div"),ht(fe.$$.fragment),Ce=J();for(let I=0;I<et.length;I+=1)et[I].c();ue=J(),ye=g("div"),Se=g("span"),he=g("select"),le=g("option"),Je=P("No decryptor");for(let I=0;I<Dt.length;I+=1)Dt[I].c();ze=J(),Be=g("div"),de=g("dl"),tt=g("dt"),lt=P("Runs"),Le=g("dd"),H=P(ut),ve=g("dt"),xe=P("ME"),we=g("dd"),qe=P(F),_t=g("dt"),Ae=P("TE"),ot=g("dd"),K=P(Re),Oe=g("dt"),vt=P("Probability"),Ne=g("dd"),st=P(dt),Mt=P("%"),Xe=J(),He.c(),Me=J(),pe=g("div"),Pe=g("select");for(let I=0;I<Tt.length;I+=1)Tt[I].c();gt=J(),je.c(),Pt=J(),oe=g("p"),Ht=P("Invention job cost: "),pt=P(Ue),jt=g("br"),Kt=P(`\r
    Invention job duration: `),at=P(kt),De=g("br"),Ft=P(`\r
    Invention cost per attempt: `),O=g("b"),Fe=P(W),ke=J(),Ie=g("p"),Qe=P("Chance of success: "),Qt=P(wt),ll=P("% "),Wt=g("br"),Zt=P(`\r
    Expected invention attempts to get >=90% chance to get >=1 successes: `),xt=P(Ct),It=J(),Gt=g("br"),Dl=P(`\r
    Expected Runs: `),cl=P(e[24]),Bl=g("br"),nl=P(`\r
    Expected cost per run: `),Lt=g("b"),Ge=P(_l),this.h()},l(I){l=k(I,"LABEL",{});var Z=M(l);i=w(Z,t),n=z(Z),s=k(Z,"INPUT",{type:!0,min:!0,max:!0}),Z.forEach(f),r=z(I),u=k(I,"BR",{}),o=z(I),a=k(I,"LABEL",{});var ce=M(a);h=w(ce,d),p=z(ce),_=k(ce,"INPUT",{type:!0,min:!0,max:!0}),ce.forEach(f),m=z(I),v=k(I,"BR",{}),y=z(I),C=k(I,"LABEL",{});var Bt=M(C);S=w(Bt,T),N=z(Bt),V=k(Bt,"INPUT",{type:!0,min:!0,max:!0}),Bt.forEach(f),q=z(I),b=k(I,"P",{});var Jt=M(b);mt(B.$$.fragment,Jt),L=k(Jt,"BR",{}),Jt.forEach(f),x=z(I),X=k(I,"DIV",{class:!0});var it=M(X);Y=k(it,"DIV",{class:!0});var ul=M(Y);ee=w(ul,"Job cost"),ul.forEach(f),ie=z(it),ge=k(it,"DIV",{class:!0}),M(ge).forEach(f),se=z(it),_e=k(it,"DIV",{class:!0});var yl=M(_e);mt(fe.$$.fragment,yl),yl.forEach(f),Ce=z(it);for(let il=0;il<et.length;il+=1)et[il].l(it);ue=z(it),ye=k(it,"DIV",{});var vl=M(ye);Se=k(vl,"SPAN",{class:!0});var re=M(Se);he=k(re,"SELECT",{class:!0});var St=M(he);le=k(St,"OPTION",{});var Nl=M(le);Je=w(Nl,"No decryptor"),Nl.forEach(f);for(let il=0;il<Dt.length;il+=1)Dt[il].l(St);St.forEach(f),ze=z(re),Be=k(re,"DIV",{class:!0});var Ll=M(Be);de=k(Ll,"DL",{class:!0});var el=M(de);tt=k(el,"DT",{});var ol=M(tt);lt=w(ol,"Runs"),ol.forEach(f),Le=k(el,"DD",{});var Ul=M(Le);H=w(Ul,ut),Ul.forEach(f),ve=k(el,"DT",{});var Vl=M(ve);xe=w(Vl,"ME"),Vl.forEach(f),we=k(el,"DD",{});var Ol=M(we);qe=w(Ol,F),Ol.forEach(f),_t=k(el,"DT",{});var Ei=M(_t);Ae=w(Ei,"TE"),Ei.forEach(f),ot=k(el,"DD",{});var Ti=M(ot);K=w(Ti,Re),Ti.forEach(f),Oe=k(el,"DT",{});var Ci=M(Oe);vt=w(Ci,"Probability"),Ci.forEach(f),Ne=k(el,"DD",{});var pi=M(Ne);st=w(pi,dt),Mt=w(pi,"%"),pi.forEach(f),el.forEach(f),Ll.forEach(f),re.forEach(f),vl.forEach(f),Xe=z(it),He.l(it),Me=z(it),pe=k(it,"DIV",{});var Ri=M(pe);Pe=k(Ri,"SELECT",{class:!0});var Di=M(Pe);for(let il=0;il<Tt.length;il+=1)Tt[il].l(Di);Di.forEach(f),Ri.forEach(f),gt=z(it),je.l(it),it.forEach(f),Pt=z(I),oe=k(I,"P",{});var hl=M(oe);Ht=w(hl,"Invention job cost: "),pt=w(hl,Ue),jt=k(hl,"BR",{}),Kt=w(hl,`\r
    Invention job duration: `),at=w(hl,kt),De=k(hl,"BR",{}),Ft=w(hl,`\r
    Invention cost per attempt: `),O=k(hl,"B",{});var Bi=M(O);Fe=w(Bi,W),Bi.forEach(f),hl.forEach(f),ke=z(I),Ie=k(I,"P",{});var Ut=M(Ie);Qe=w(Ut,"Chance of success: "),Qt=w(Ut,wt),ll=w(Ut,"% "),Wt=k(Ut,"BR",{}),Zt=w(Ut,`\r
    Expected invention attempts to get >=90% chance to get >=1 successes: `),xt=w(Ut,Ct),It=z(Ut),Gt=k(Ut,"BR",{}),Dl=w(Ut,`\r
    Expected Runs: `),cl=w(Ut,e[24]),Bl=k(Ut,"BR",{}),nl=w(Ut,`\r
    Expected cost per run: `),Lt=k(Ut,"B",{});var Mi=M(Lt);Ge=w(Mi,_l),Mi.forEach(f),Ut.forEach(f),this.h()},h(){E(s,"type","range"),E(s,"min",0),E(s,"max",5),E(_,"type","range"),E(_,"min",0),E(_,"max",5),E(V,"type","range"),E(V,"min",0),E(V,"max",5),E(Y,"class","itemName"),E(ge,"class","qty"),E(_e,"class","graph svelte-1u87si0"),le.__value=null,le.value=le.__value,E(he,"class","svelte-1u87si0"),e[6]===void 0&&Fl(()=>e[52].call(he)),E(de,"class","svelte-1u87si0"),E(Be,"class","overlay svelte-1u87si0"),E(Se,"class","overlay-parent"),E(Pe,"class","svelte-1u87si0"),e[4]===void 0&&Fl(()=>e[54].call(Pe)),E(X,"class","breakdown")},m(I,Z){D(I,l,Z),c(l,i),c(l,n),c(l,s),ct(s,e[16]),D(I,r,Z),D(I,u,Z),D(I,o,Z),D(I,a,Z),c(a,h),c(a,p),c(a,_),ct(_,e[17]),D(I,m,Z),D(I,v,Z),D(I,y,Z),D(I,C,Z),c(C,S),c(C,N),c(C,V),ct(V,e[18]),D(I,q,Z),D(I,b,Z),bt(B,b,null),c(b,L),D(I,x,Z),D(I,X,Z),c(X,Y),c(Y,ee),c(X,ie),c(X,ge),c(X,se),c(X,_e),bt(fe,_e,null),c(X,Ce);for(let ce=0;ce<et.length;ce+=1)et[ce].m(X,null);c(X,ue),c(X,ye),c(ye,Se),c(Se,he),c(he,le),c(le,Je);for(let ce=0;ce<Dt.length;ce+=1)Dt[ce].m(he,null);tl(he,e[6]),c(Se,ze),c(Se,Be),c(Be,de),c(de,tt),c(tt,lt),c(de,Le),c(Le,H),c(de,ve),c(ve,xe),c(de,we),c(we,qe),c(de,_t),c(_t,Ae),c(de,ot),c(ot,K),c(de,Oe),c(Oe,vt),c(de,Ne),c(Ne,st),c(Ne,Mt),c(X,Xe),qt[$e].m(X,null),c(X,Me),c(X,pe),c(pe,Pe);for(let ce=0;ce<Tt.length;ce+=1)Tt[ce].m(Pe,null);tl(Pe,e[4]),c(X,gt),G[U].m(X,null),D(I,Pt,Z),D(I,oe,Z),c(oe,Ht),c(oe,pt),c(oe,jt),c(oe,Kt),c(oe,at),c(oe,De),c(oe,Ft),c(oe,O),c(O,Fe),D(I,ke,Z),D(I,Ie,Z),c(Ie,Qe),c(Ie,Qt),c(Ie,ll),c(Ie,Wt),c(Ie,Zt),c(Ie,xt),c(Ie,It),c(Ie,Gt),c(Ie,Dl),c(Ie,cl),c(Ie,Bl),c(Ie,nl),c(Ie,Lt),c(Lt,Ge),ft=!0,wl||(Hl=[me(s,"change",e[43]),me(s,"input",e[43]),me(_,"change",e[44]),me(_,"input",e[44]),me(V,"change",e[45]),me(V,"input",e[45]),me(he,"change",e[52]),me(Pe,"change",e[54])],wl=!0)},p(I,Z){var ul,yl,vl;(!ft||Z[0]&8192)&&t!==(t=((ul=I[13])==null?void 0:ul.name)+"")&&te(i,t),Z[0]&65536&&ct(s,I[16]),(!ft||Z[0]&16384)&&d!==(d=((yl=I[14])==null?void 0:yl.name)+"")&&te(h,d),Z[0]&131072&&ct(_,I[17]),(!ft||Z[0]&32768)&&T!==(T=((vl=I[15])==null?void 0:vl.name)+"")&&te(S,T),Z[0]&262144&&ct(V,I[18]);const ce={};!Q&&Z[0]&256&&(Q=!0,ce.activitySystemCostIndex=I[8],Te(()=>Q=!1)),!A&&Z[0]&512&&(A=!0,ce.activityTax=I[9],Te(()=>A=!1)),!$&&Z[0]&1024&&($=!0,ce.structureRoleBonuses=I[10],Te(()=>$=!1)),!j&&Z[0]&2048&&(j=!0,ce.structureRigBonuses=I[11],Te(()=>j=!1)),B.$set(ce);const Bt={};if(Z[0]&536870912&&(Bt.extents=I[29]),Z[0]&67108864&&(Bt.totalCost=I[26]),fe.$set(Bt),Z[0]&838860834){dl=Object.keys(I[25].materials).map(I[50]);let re;for(re=0;re<dl.length;re+=1){const St=Er(I,dl,re);et[re]?(et[re].p(St,Z),ne(et[re],1)):(et[re]=Tr(St),et[re].c(),ne(et[re],1),et[re].m(X,ue))}for(rl(),re=dl.length;re<et.length;re+=1)di(re);sl()}if(Z[1]&1){ml=Object.values(I[31]);let re;for(re=0;re<ml.length;re+=1){const St=Ir(I,ml,re);Dt[re]?Dt[re].p(St,Z):(Dt[re]=Cr(St),Dt[re].c(),Dt[re].m(he,null))}for(;re<Dt.length;re+=1)Dt[re].d(1);Dt.length=ml.length}Z[0]&64|Z[1]&1&&tl(he,I[6]),(!ft||Z[0]&1048576)&&ut!==(ut=Rl(I[20])+"")&&te(H,ut),(!ft||Z[0]&4194304)&&F!==(F=Rl(I[22])+"")&&te(qe,F),(!ft||Z[0]&8388608)&&Re!==(Re=Rl(I[23])+"")&&te(K,Re),(!ft||Z[0]&2097152)&&dt!==(dt=Rl(100-I[21]*100)+"")&&te(st,dt);let Jt=$e;if($e=We(I),$e===Jt?qt[$e].p(I,Z):(rl(),ae(qt[Jt],1,1,()=>{qt[Jt]=null}),sl(),He=qt[$e],He?He.p(I,Z):(He=qt[$e]=pl[$e](I),He.c()),ne(He,1),He.m(X,Me)),Z[0]&268435464){bl=I[3];let re;for(re=0;re<bl.length;re+=1){const St=kr(I,bl,re);Tt[re]?Tt[re].p(St,Z):(Tt[re]=Rr(St),Tt[re].c(),Tt[re].m(Pe,null))}for(;re<Tt.length;re+=1)Tt[re].d(1);Tt.length=bl.length}Z[0]&24&&tl(Pe,I[4]);let it=U;U=Et(I),U===it?G[U].p(I,Z):(rl(),ae(G[it],1,1,()=>{G[it]=null}),sl(),je=G[U],je?je.p(I,Z):(je=G[U]=R[U](I),je.c()),ne(je,1),je.m(X,null)),(!ft||Z[0]&67108864)&&Ue!==(Ue=rt(I[26])+"")&&te(pt,Ue),(!ft||Z[0]&1073741824)&&kt!==(kt=Sl(I[30])+"")&&te(at,kt),(!ft||Z[0]&4096)&&W!==(W=rt(I[12])+"")&&te(Fe,W),(!ft||Z[0]&524288)&&wt!==(wt=I[19]*100+"")&&te(Qt,wt),(!ft||Z[0]&524288)&&Ct!==(Ct=Math.ceil(Math.log(1-.9)/Math.log(1-I[19]))+"")&&te(xt,Ct),(!ft||Z[0]&16777216)&&te(cl,I[24]),(!ft||Z[0]&1)&&_l!==(_l=rt(I[0])+"")&&te(Ge,_l)},i(I){if(!ft){ne(B.$$.fragment,I),ne(fe.$$.fragment,I);for(let Z=0;Z<dl.length;Z+=1)ne(et[Z]);ne(He),ne(je),ft=!0}},o(I){ae(B.$$.fragment,I),ae(fe.$$.fragment,I),et=et.filter(Boolean);for(let Z=0;Z<et.length;Z+=1)ae(et[Z]);ae(He),ae(je),ft=!1},d(I){I&&f(l),I&&f(r),I&&f(u),I&&f(o),I&&f(a),I&&f(m),I&&f(v),I&&f(y),I&&f(C),I&&f(q),I&&f(b),yt(B),I&&f(x),I&&f(X),yt(fe),Vt(et,I),Vt(Dt,I),qt[$e].d(),Vt(Tt,I),G[U].d(),I&&f(Pt),I&&f(oe),I&&f(ke),I&&f(Ie),wl=!1,Gl(Hl)}}}const zs=1124,Xs=1112,Hs=1113,Ks=1114;let Dr=2,Br=4;function Rl(e){return`${e>=0?"+":""}${Math.round(e)}`}function Ws(e,l,t){let i,n,s,r,u,o,a,d=Ye,h=()=>(d(),d=Pl(C,K=>t(39,a=K)),C),p,_,m,v;Ze(e,jl,K=>t(28,o=K)),Ze(e,vi,K=>t(41,_=K)),Ze(e,zl,K=>t(42,m=K)),Ze(e,Ts,K=>t(31,v=K)),e.$$.on_destroy.push(()=>d());let y=Ml("currentCharacter");Ze(e,y,K=>t(40,p=K));let C,{blueprintToInvent:T=null}=l,S=[],N=S[0];function V(K){var Oe;return o.categories[9].groups[(Oe=o.types[K])==null?void 0:Oe.group_id]!=null}let q={},{brokerFeeRate:b=.0151114234532}=l,B,Q=0,A,$,j,L,x,X=0,Y,ee,ie,ge=3,se=3,_e=3,fe=.3,Ce,ue,ye,Se,{productME:he=Dr}=l,{productTE:le=Br}=l,{productRuns:Je=1}=l,{expectedCostPerRun:ze=0}=l,{extents:Be=null}=l,de=[0,1e6];function tt(){ge=Nt(this.value),t(16,ge),t(2,C),t(40,p),t(39,a),t(25,i),t(28,o),t(15,ie),t(13,Y),t(14,ee),t(4,N),t(3,S),t(42,m),t(36,T)}function lt(){se=Nt(this.value),t(17,se),t(2,C),t(40,p),t(39,a),t(25,i),t(28,o),t(15,ie),t(13,Y),t(14,ee),t(4,N),t(3,S),t(42,m),t(36,T)}function Le(){_e=Nt(this.value),t(18,_e),t(2,C),t(40,p),t(39,a),t(25,i),t(28,o),t(15,ie),t(13,Y),t(14,ee),t(4,N),t(3,S),t(42,m),t(36,T)}function ut(K){$=K,t(8,$)}function H(K){j=K,t(9,j)}function ve(K){L=K,t(10,L)}function xe(K){x=K,t(11,x)}const we=K=>parseInt(K);function F(K,Oe){e.$$.not_equal(q[Oe],K)&&(q[Oe]=K,t(5,q))}function qe(){B=Ql(this),t(6,B)}function _t(K){e.$$.not_equal(q[B],K)&&(q[B]=K,t(5,q))}function Ae(){N=Ql(this),t(4,N),t(3,S),t(42,m),t(36,T),t(3,S),t(42,m),t(36,T)}function ot(){Q=Nt(this.value),t(7,Q),t(27,n),t(5,q),t(4,N),t(3,S),t(42,m),t(36,T)}function Re(K){e.$$.not_equal(q[N.type_id],K)&&(q[N.type_id]=K,t(5,q))}return e.$$set=K=>{"blueprintToInvent"in K&&t(36,T=K.blueprintToInvent),"brokerFeeRate"in K&&t(1,b=K.brokerFeeRate),"productME"in K&&t(34,he=K.productME),"productTE"in K&&t(35,le=K.productTE),"productRuns"in K&&t(33,Je=K.productRuns),"expectedCostPerRun"in K&&t(0,ze=K.expectedCostPerRun),"extents"in K&&t(37,Be=K.extents)},e.$$.update=()=>{var K,Oe,vt,Ne,dt,st,Mt,Xe,$e,He;if(e.$$.dirty[1]&2080&&t(3,S=Object.values(m.types).filter(Me=>{var pe;return(pe=Me.activities[si])==null?void 0:pe.products[T==null?void 0:T.type_id]})),e.$$.dirty[0]&24&&S.length>=1&&S.indexOf(N)===-1&&t(4,N=S[0]),e.$$.dirty[0]&16&&t(25,i=N==null?void 0:N.activities[si]),e.$$.dirty[0]&16&&t(27,n=V(N==null?void 0:N.type_id)),e.$$.dirty[0]&134217776&&(n||t(7,Q=q[N.type_id])),e.$$.dirty[1]&1184){t(38,A=0);let Me=T.activities[Ot];for(let pe in Me.materials)t(38,A+=Me.materials[pe].quantity*((Oe=(K=_[pe])==null?void 0:K.adjusted_price)!=null?Oe:0))}if(e.$$.dirty[0]&3840|e.$$.dirty[1]&128&&t(26,s=A*$*.02*(1+((vt=L==null?void 0:L.jobCostModifier)!=null?vt:0)/100)*(1+((Ne=x==null?void 0:x.costReductionBonus)!=null?Ne:0)/100)*(1+j/100)),e.$$.dirty[0]&100667616&&(t(12,X=0),i&&(t(12,X+=Q),t(12,X+=js(Object.values(i.materials),Me=>q[Me.materialTypeID]*Me.quantity)),t(12,X+=(dt=q[B])!=null?dt:0),t(12,X+=s))),e.$$.dirty[0]&33557504|e.$$.dirty[1]&256&&t(30,r=i.time*(1-.03*(((st=a==null?void 0:a.skills.find(Me=>Me.skill_id===Fi))==null?void 0:st.active_skill_level)||0))*(1+((Mt=L==null?void 0:L.jobDurationModifier)!=null?Mt:0)/100)*(1+((Xe=x==null?void 0:x.timeReductionBonus)!=null?Xe:0)/100)),e.$$.dirty[0]&302047236|e.$$.dirty[1]&768){let pe=function(gt){var U;return((U=a==null?void 0:a.skills.find(je=>je.skill_id===gt))==null?void 0:U.active_skill_level)||0},Me=!1;C!==Jl[p]&&(h(t(2,C=Jl[p])),Me=!0);let Pe=!1;for(let gt of Object.values(i==null?void 0:i.requiredSkills)){let U=o.types[gt.type_id];if(U.name.indexOf("Encryption")>=0){(Me||(ie==null?void 0:ie.type_id)!==U.type_id)&&(t(15,ie=U),t(18,_e=pe(ie.type_id)));continue}Pe?(Me||(ee==null?void 0:ee.type_id)!==U.type_id)&&(t(14,ee=U),t(17,se=pe(ee.type_id))):((Me||(Y==null?void 0:Y.type_id)!==U.type_id)&&(t(13,Y=U),t(16,ge=pe(Y.type_id))),Pe=!0)}}e.$$.dirty[0]&64&&(B?ps(B).then(Me=>{t(20,Ce=Me.dogma_attributes.find(pe=>pe.attribute_id==zs).value),t(21,ue=Me.dogma_attributes.find(pe=>pe.attribute_id==Xs).value),t(22,ye=Me.dogma_attributes.find(pe=>pe.attribute_id==Hs).value),t(23,Se=Me.dogma_attributes.find(pe=>pe.attribute_id==Ks).value)}):(t(20,Ce=0),t(21,ue=1),t(22,ye=0),t(23,Se=0))),e.$$.dirty[0]&36110336|e.$$.dirty[1]&32&&t(19,fe=(($e=i==null?void 0:i.products[T.type_id])==null?void 0:$e.probability)*(1+(ge+se)/30+_e/40)*ue),e.$$.dirty[0]&12582912&&(t(34,he=Dr+ye),t(35,le=Br+Se)),e.$$.dirty[0]&34603008|e.$$.dirty[1]&36&&(t(33,Je=((He=i==null?void 0:i.products[T.type_id])==null?void 0:He.quantity)+Ce),isNaN(Je)&&t(33,Je=1)),e.$$.dirty[0]&524288|e.$$.dirty[1]&4&&t(24,u=Je*fe),e.$$.dirty[0]&16781313&&(t(0,ze=X/u),isNaN(ze)&&t(0,ze=0)),e.$$.dirty[0]&4096|e.$$.dirty[1]&64&&t(29,de=Be||[0,X*1.5])},[ze,b,C,S,N,q,B,Q,$,j,L,x,X,Y,ee,ie,ge,se,_e,fe,Ce,ue,ye,Se,u,i,s,n,o,de,r,v,y,Je,he,le,T,Be,A,a,p,_,m,tt,lt,Le,ut,H,ve,xe,we,F,qe,_t,Ae,ot,Re]}class Zs extends kl{constructor(l){super();Il(this,l,Ws,Js,El,{blueprintToInvent:36,brokerFeeRate:1,productME:34,productTE:35,productRuns:33,expectedCostPerRun:0,extents:37},null,[-1,-1,-1])}}class xs{constructor(l,t){var i,n,s,r,u,o,a;this.activity=l,this.selectedProduct=(a=(o=(n=(i=this.activity)==null?void 0:i.products[t])==null?void 0:n.type_id)!=null?o:(u=Object.values((r=(s=this.activity)==null?void 0:s.products)!=null?r:{})[0])==null?void 0:u.type_id)!=null?a:null,this.facilityModifiers={taxRate:10,systemCostIndex:.05},this.prices={},this.indexPrices={},this.blueprintCostPerRun=0,this.runs=1}get producedQuantity(){var l;return((l=this.activity)==null?void 0:l.products[this.selectedProduct].quantity)*this.runs}set requiredQuantity(l){var t,i;this.runs=Math.ceil(l/((i=(t=this.activity)==null?void 0:t.products[this.selectedProduct])==null?void 0:i.quantity))}qty(l){var i,n,s;if(l==null)return 0;let t=oi(l*this.runs,[{value:-((i=this.blueprintModifiers)==null?void 0:i.materialEfficiency)},{value:(n=this.facilityModifiers.roleModifiers)==null?void 0:n.materialConsumption},{value:(s=this.facilityModifiers.rigModifiers)==null?void 0:s.materialReduction}]);return Math.max(this.runs,Math.ceil(t))}materialQuantity(l){var t,i;return this.qty((i=(t=this.activity)==null?void 0:t.materials[l])==null?void 0:i.quantity)}get estimatedItemValue(){var t,i,n,s;let l=0;for(let r in(i=(t=this.activity)==null?void 0:t.materials)!=null?i:[])l+=this.activity.materials[r].quantity*((s=(n=this.indexPrices[r])==null?void 0:n.adjusted_price)!=null?s:0);return l}get jobCost(){var t;return oi(this.estimatedItemValue*this.facilityModifiers.systemCostIndex*this.runs,[{value:(t=this.facilityModifiers.roleModifiers)==null?void 0:t.jobCost},{value:this.facilityModifiers.taxRate}])}get totalCost(){var t,i,n,s;let l=0;for(let r in(i=(t=this.activity)==null?void 0:t.materials)!=null?i:[])l+=this.qty(this.activity.materials[r].quantity)*((n=this.prices[r])!=null?n:0);return l+=this.jobCost,l+=((s=this.blueprintCostPerRun)!=null?s:0)*this.runs,l}get unitCost(){return this.totalCost/this.producedQuantity}get jobDuration(){var l,t,i,n,s;return oi(((l=this.activity)==null?void 0:l.time)*this.runs,[{value:-((t=this.blueprintModifiers)==null?void 0:t.timeEfficiency)},{value:(i=this.characterModifiers)==null?void 0:i.skill_jobDuration},{value:(n=this.facilityModifiers.roleModifiers)==null?void 0:n.jobDuration},{value:(s=this.facilityModifiers.rigModifiers)==null?void 0:s.timeReduction}])}get profit(){return this.prices[this.selectedProduct]*this.producedQuantity-this.totalCost}}function $s(e,l){let t=new xs(e,l),{subscribe:i,set:n}=gl(t);return{subscribe:i,update:s=>{for(let r in s)if(!t[r]||typeof s[r]!="object")t[r]=s[r];else for(let u in s[r])t[r][u]=s[r][u];n(t)}}}function en(e,l){let{activity:t}=Xl(e,l);return $s(t,e)}function Mr(e,l,t){const i=e.slice();return i[50]=l[t],i[51]=l,i[52]=t,i}function tn(e){var s;let l,t=((s=e[23].types[e[2]])==null?void 0:s.name)+"",i,n;return{c(){l=g("div"),i=P(t),this.h()},l(r){l=k(r,"DIV",{class:!0,title:!0});var u=M(l);i=w(u,t),u.forEach(f),this.h()},h(){var r;E(l,"class","itemName"),E(l,"title",n=`${(r=e[23].types[e[2]])==null?void 0:r.name} [${e[2]}]`)},m(r,u){D(r,l,u),c(l,i)},p(r,u){var o,a;u[0]&8388612&&t!==(t=((o=r[23].types[r[2]])==null?void 0:o.name)+"")&&te(i,t),u[0]&8388612&&n!==(n=`${(a=r[23].types[r[2]])==null?void 0:a.name} [${r[2]}]`)&&E(l,"title",n)},d(r){r&&f(l)}}}function ln(e){let l;return{c(){l=g("div")},l(t){l=k(t,"DIV",{}),M(l).forEach(f)},m(t,i){D(t,l,i)},p:Ye,d(t){t&&f(l)}}}function Pr(e){let l,t,i,n,s;return{c(){l=g("label"),t=g("input"),i=P(" Override"),this.h()},l(r){l=k(r,"LABEL",{});var u=M(l);t=k(u,"INPUT",{type:!0}),i=w(u," Override"),u.forEach(f),this.h()},h(){E(t,"type","checkbox")},m(r,u){D(r,l,u),c(l,t),t.checked=e[8],c(l,i),n||(s=me(t,"change",e[38]),n=!0)},p(r,u){u[0]&256&&(t.checked=r[8])},d(r){r&&f(l),n=!1,s()}}}function wr(e){let l,t,i,n,s,r;const u=[sn,rn],o=[];function a(d,h){return(t==null||h[0]&786432)&&(t=!!Xl(d[50],d[19]).activity),t?0:1}return i=a(e,[-1,-1]),n=o[i]=u[i](e),{c(){l=g("div"),n.c(),s=J(),this.h()},l(d){l=k(d,"DIV",{class:!0});var h=M(l);n.l(h),s=z(h),h.forEach(f),this.h()},h(){E(l,"class","subItem")},m(d,h){D(d,l,h),o[i].m(l,null),c(l,s),r=!0},p(d,h){let p=i;i=a(d,h),i===p?o[i].p(d,h):(rl(),ae(o[p],1,1,()=>{o[p]=null}),sl(),n=o[i],n?n.p(d,h):(n=o[i]=u[i](d),n.c()),ne(n,1),n.m(l,s))},i(d){r||(ne(n),r=!0)},o(d){ae(n),r=!1},d(d){d&&f(l),o[i].d()}}}function rn(e){var n;let l,t=((n=e[23].types[e[50]])==null?void 0:n.name)+"",i;return{c(){l=P("Could not find industry details for "),i=P(t)},l(s){l=w(s,"Could not find industry details for "),i=w(s,t)},m(s,r){D(s,l,r),D(s,i,r)},p(s,r){var u;r[0]&8650752&&t!==(t=((u=s[23].types[s[50]])==null?void 0:u.name)+"")&&te(i,t)},i:Ye,o:Ye,d(s){s&&f(l),s&&f(i)}}}function sn(e){let l,t,i,n;function s(o){e[47](o,e[50])}function r(o){e[48](o)}let u={productTypeId:e[50],requiredQuantity:e[18].materialQuantity(e[50]),defaultLocationId:e[21],compact:!0};return e[20][e[50]]!==void 0&&(u.unitCost=e[20][e[50]]),e[1]!==void 0&&(u.producedItems=e[1]),l=new jr({props:u}),be.push(()=>Ee(l,"unitCost",s)),be.push(()=>Ee(l,"producedItems",r)),{c(){ht(l.$$.fragment)},l(o){mt(l.$$.fragment,o)},m(o,a){bt(l,o,a),n=!0},p(o,a){e=o;const d={};a[0]&262144&&(d.productTypeId=e[50]),a[0]&262144&&(d.requiredQuantity=e[18].materialQuantity(e[50])),a[0]&2097152&&(d.defaultLocationId=e[21]),!t&&a[0]&1310720&&(t=!0,d.unitCost=e[20][e[50]],Te(()=>t=!1)),!i&&a[0]&2&&(i=!0,d.producedItems=e[1],Te(()=>i=!1)),l.$set(d)},i(o){n||(ne(l.$$.fragment,o),n=!0)},o(o){ae(l.$$.fragment,o),n=!1},d(o){yt(l,o)}}}function qr(e){var $;let l,t,i,n,s,r,u=(($=e[23].types[e[50]])==null?void 0:$.name)+"",o,a,d,h,p=e[18].materialQuantity(e[50])+"",_,m,v,y,C,T,S,N,V,q;function b(){e[45].call(i,e[50])}function B(j){e[46](j,e[50])}let Q={extents:e[16],quantity:e[18].materialQuantity(e[50]),type_id:e[50],overridePrice:e[1][e[50]]?e[20][e[50]]:void 0,buyOverheadRate:e[5],totalCost:e[1][e[50]]?e[20][e[50]]*e[18].materialQuantity(e[50]):null,compact:!0};e[9][e[50]]!==void 0&&(Q.price=e[9][e[50]]),y=new fl({props:Q}),be.push(()=>Ee(y,"price",B));let A=e[1][e[50]]&&wr(e);return{c(){l=g("div"),t=g("label"),i=g("input"),s=J(),r=g("span"),o=P(u),d=J(),h=g("div"),_=P(p),m=J(),v=g("div"),ht(y.$$.fragment),T=J(),A&&A.c(),S=Ve(),this.h()},l(j){l=k(j,"DIV",{class:!0});var L=M(l);t=k(L,"LABEL",{});var x=M(t);i=k(x,"INPUT",{type:!0}),s=z(x),r=k(x,"SPAN",{title:!0});var X=M(r);o=w(X,u),X.forEach(f),x.forEach(f),L.forEach(f),d=z(j),h=k(j,"DIV",{class:!0});var Y=M(h);_=w(Y,p),Y.forEach(f),m=z(j),v=k(j,"DIV",{class:!0});var ee=M(v);mt(y.$$.fragment,ee),ee.forEach(f),T=z(j),A&&A.l(j),S=Ve(),this.h()},h(){var j;E(i,"type","checkbox"),i.disabled=n=!Qi(e[50],e[19]),E(r,"title",a=`${(j=e[23].types[e[50]])==null?void 0:j.name} [${e[50]}]`),E(l,"class","itemName"),E(h,"class","qty"),E(v,"class","graph")},m(j,L){D(j,l,L),c(l,t),c(t,i),i.checked=e[1][e[50]],c(t,s),c(t,r),c(r,o),D(j,d,L),D(j,h,L),c(h,_),D(j,m,L),D(j,v,L),bt(y,v,null),D(j,T,L),A&&A.m(j,L),D(j,S,L),N=!0,V||(q=me(i,"change",b),V=!0)},p(j,L){var X,Y;e=j,(!N||L[0]&786432&&n!==(n=!Qi(e[50],e[19])))&&(i.disabled=n),L[0]&262146&&(i.checked=e[1][e[50]]),(!N||L[0]&8650752)&&u!==(u=((X=e[23].types[e[50]])==null?void 0:X.name)+"")&&te(o,u),(!N||L[0]&8650752&&a!==(a=`${(Y=e[23].types[e[50]])==null?void 0:Y.name} [${e[50]}]`))&&E(r,"title",a),(!N||L[0]&262144)&&p!==(p=e[18].materialQuantity(e[50])+"")&&te(_,p);const x={};L[0]&65536&&(x.extents=e[16]),L[0]&262144&&(x.quantity=e[18].materialQuantity(e[50])),L[0]&262144&&(x.type_id=e[50]),L[0]&1310722&&(x.overridePrice=e[1][e[50]]?e[20][e[50]]:void 0),L[0]&32&&(x.buyOverheadRate=e[5]),L[0]&1310722&&(x.totalCost=e[1][e[50]]?e[20][e[50]]*e[18].materialQuantity(e[50]):null),!C&&L[0]&262656&&(C=!0,x.price=e[9][e[50]],Te(()=>C=!1)),y.$set(x),e[1][e[50]]?A?(A.p(e,L),L[0]&262146&&ne(A,1)):(A=wr(e),A.c(),ne(A,1),A.m(S.parentNode,S)):A&&(rl(),ae(A,1,1,()=>{A=null}),sl())},i(j){N||(ne(y.$$.fragment,j),ne(A),N=!0)},o(j){ae(y.$$.fragment,j),ae(A),N=!1},d(j){j&&f(l),j&&f(d),j&&f(h),j&&f(m),j&&f(v),yt(y),j&&f(T),A&&A.d(j),j&&f(S),V=!1,q()}}}function nn(e){let l,t,i,n=e[18].producedQuantity+"",s,r,u,o,a=rt(e[9][e[2]])+"",d,h,p=ai(e[18].profit)+"",_,m,v,y,C,T,S,N,V,q,b,B=rt(e[0])+"",Q,A,$=rt(e[18].totalCost)+"",j,L,x,X,Y,ee,ie,ge,se,_e,fe,Ce,ue,ye,Se,he,le,Je,ze,Be,de,tt,lt,Le,ut,H,ve,xe,we,F,qe=Sl(e[18].jobDuration)+"",_t,Ae,ot,Re,K,Oe,vt,Ne,dt,st,Mt,Xe,$e,He;function Me(O,W){return O[6]?ln:tn}let pe=Me(e),Pe=pe(e);function gt(O){e[33](O)}function U(O){e[34](O)}function je(O){e[35](O)}let Pt={extents:e[16],quantity:e[18].producedQuantity,type_id:e[2],buyOverheadRate:-e[4],sellOverheadRate:-e[5]-e[4],totalCost:e[18].totalCost};e[9][e[2]]!==void 0&&(Pt.price=e[9][e[2]]),e[14]!==void 0&&(Pt.lowestSellPrice=e[14]),e[15]!==void 0&&(Pt.highestBuyPrice=e[15]),C=new fl({props:Pt}),be.push(()=>Ee(C,"price",gt)),be.push(()=>Ee(C,"lowestSellPrice",U)),be.push(()=>Ee(C,"highestBuyPrice",je));let oe=e[3]!==null&&Pr(e);function Ht(O){e[39](O)}function Ue(O){e[40](O)}function pt(O){e[41](O)}function jt(O){e[42](O)}function Kt(O){e[43](O)}let kt={activity:At};e[21]!==void 0&&(kt.value=e[21]),e[10]!==void 0&&(kt.activitySystemCostIndex=e[10]),e[11]!==void 0&&(kt.activityTax=e[11]),e[12]!==void 0&&(kt.structureRoleBonuses=e[12]),e[13]!==void 0&&(kt.structureRigBonuses=e[13]),le=new fi({props:kt}),be.push(()=>Ee(le,"value",Ht)),be.push(()=>Ee(le,"activitySystemCostIndex",Ue)),be.push(()=>Ee(le,"activityTax",pt)),be.push(()=>Ee(le,"structureRoleBonuses",jt)),be.push(()=>Ee(le,"structureRigBonuses",Kt)),st=new fl({props:{compact:!0,extents:e[16],quantity:e[18].producedQuantity,totalCost:e[18].jobCost}});let at=Object.keys(e[18].activity.materials).map(e[44]),De=[];for(let O=0;O<at.length;O+=1)De[O]=qr(Mr(e,at,O));const Ft=O=>ae(De[O],1,1,()=>{De[O]=null});return{c(){l=g("div"),Pe.c(),t=J(),i=g("div"),s=P(n),r=J(),u=g("div"),o=P(`Unit price\r
        `),d=P(a),h=P(`\r
        Total Profit \r
        `),_=P(p),m=J(),v=g("br"),y=J(),ht(C.$$.fragment),V=J(),q=g("br"),b=P(`\r
\r
        Unit cost `),Q=P(B),A=P(" Total cost "),j=P($),x=J(),X=g("div"),Y=P("Runs "),ee=g("input"),ge=J(),se=g("input"),fe=J(),oe&&oe.c(),Ce=J(),ue=g("p"),ye=g("b"),Se=P("Facility"),he=J(),ht(le.$$.fragment),lt=J(),Le=g("b"),ut=P("Production"),H=J(),ve=g("dl"),xe=g("dt"),we=P("Time"),F=g("dd"),_t=P(qe),ot=J(),Re=g("div"),K=g("div"),Oe=P("Job cost"),vt=g("div"),Ne=J(),dt=g("div"),ht(st.$$.fragment),Mt=J();for(let O=0;O<De.length;O+=1)De[O].c();this.h()},l(O){l=k(O,"DIV",{class:!0});var W=M(l);Pe.l(W),t=z(W),i=k(W,"DIV",{class:!0});var Fe=M(i);s=w(Fe,n),Fe.forEach(f),r=z(W),u=k(W,"DIV",{class:!0});var ke=M(u);o=w(ke,`Unit price\r
        `),d=w(ke,a),h=w(ke,`\r
        Total Profit \r
        `),_=w(ke,p),m=z(ke),v=k(ke,"BR",{}),y=z(ke),mt(C.$$.fragment,ke),V=z(ke),q=k(ke,"BR",{}),b=w(ke,`\r
\r
        Unit cost `),Q=w(ke,B),A=w(ke," Total cost "),j=w(ke,$),ke.forEach(f),W.forEach(f),x=z(O),X=k(O,"DIV",{class:!0});var Ie=M(X);Y=w(Ie,"Runs "),ee=k(Ie,"INPUT",{type:!0,min:!0}),ge=z(Ie),se=k(Ie,"INPUT",{type:!0}),fe=z(Ie),oe&&oe.l(Ie),Ie.forEach(f),Ce=z(O),ue=k(O,"P",{});var Qe=M(ue);ye=k(Qe,"B",{});var wt=M(ye);Se=w(wt,"Facility"),wt.forEach(f),he=z(Qe),mt(le.$$.fragment,Qe),Qe.forEach(f),lt=z(O),Le=k(O,"B",{});var Qt=M(Le);ut=w(Qt,"Production"),Qt.forEach(f),H=z(O),ve=k(O,"DL",{});var ll=M(ve);xe=k(ll,"DT",{});var Wt=M(xe);we=w(Wt,"Time"),Wt.forEach(f),F=k(ll,"DD",{title:!0});var Zt=M(F);_t=w(Zt,qe),Zt.forEach(f),ll.forEach(f),ot=z(O),Re=k(O,"DIV",{class:!0});var Ct=M(Re);K=k(Ct,"DIV",{});var xt=M(K);Oe=w(xt,"Job cost"),xt.forEach(f),vt=k(Ct,"DIV",{}),M(vt).forEach(f),Ne=z(Ct),dt=k(Ct,"DIV",{class:!0});var It=M(dt);mt(st.$$.fragment,It),It.forEach(f),Mt=z(Ct);for(let Gt=0;Gt<De.length;Gt+=1)De[Gt].l(Ct);Ct.forEach(f),this.h()},h(){E(i,"class","qty"),E(u,"class","graph"),E(l,"class",L=`breakdown ${e[6]?"":"summary"}`),E(ee,"type","range"),E(ee,"min",1),ee.disabled=ie=e[3]!==null&&!e[8],E(se,"type","number"),se.disabled=_e=e[3]!==null&&!e[8],E(X,"class","combinedInput"),E(F,"title",Ae=`${e[18].jobDuration}s`),E(dt,"class","graph"),E(Re,"class","breakdown")},m(O,W){D(O,l,W),Pe.m(l,null),c(l,t),c(l,i),c(i,s),c(l,r),c(l,u),c(u,o),c(u,d),c(u,h),c(u,_),c(u,m),c(u,v),c(u,y),bt(C,u,null),c(u,V),c(u,q),c(u,b),c(u,Q),c(u,A),c(u,j),D(O,x,W),D(O,X,W),c(X,Y),c(X,ee),ct(ee,e[7]),c(X,ge),c(X,se),ct(se,e[7]),c(X,fe),oe&&oe.m(X,null),D(O,Ce,W),D(O,ue,W),c(ue,ye),c(ye,Se),c(ue,he),bt(le,ue,null),D(O,lt,W),D(O,Le,W),c(Le,ut),D(O,H,W),D(O,ve,W),c(ve,xe),c(xe,we),c(ve,F),c(F,_t),D(O,ot,W),D(O,Re,W),c(Re,K),c(K,Oe),c(Re,vt),c(Re,Ne),c(Re,dt),bt(st,dt,null),c(Re,Mt);for(let Fe=0;Fe<De.length;Fe+=1)De[Fe].m(Re,null);Xe=!0,$e||(He=[me(ee,"change",e[36]),me(ee,"input",e[36]),me(se,"input",e[37])],$e=!0)},p(O,W){pe===(pe=Me(O))&&Pe?Pe.p(O,W):(Pe.d(1),Pe=pe(O),Pe&&(Pe.c(),Pe.m(l,t))),(!Xe||W[0]&262144)&&n!==(n=O[18].producedQuantity+"")&&te(s,n),(!Xe||W[0]&516)&&a!==(a=rt(O[9][O[2]])+"")&&te(d,a),(!Xe||W[0]&262144)&&p!==(p=ai(O[18].profit)+"")&&te(_,p);const Fe={};W[0]&65536&&(Fe.extents=O[16]),W[0]&262144&&(Fe.quantity=O[18].producedQuantity),W[0]&4&&(Fe.type_id=O[2]),W[0]&16&&(Fe.buyOverheadRate=-O[4]),W[0]&48&&(Fe.sellOverheadRate=-O[5]-O[4]),W[0]&262144&&(Fe.totalCost=O[18].totalCost),!T&&W[0]&516&&(T=!0,Fe.price=O[9][O[2]],Te(()=>T=!1)),!S&&W[0]&16384&&(S=!0,Fe.lowestSellPrice=O[14],Te(()=>S=!1)),!N&&W[0]&32768&&(N=!0,Fe.highestBuyPrice=O[15],Te(()=>N=!1)),C.$set(Fe),(!Xe||W[0]&1)&&B!==(B=rt(O[0])+"")&&te(Q,B),(!Xe||W[0]&262144)&&$!==($=rt(O[18].totalCost)+"")&&te(j,$),(!Xe||W[0]&64&&L!==(L=`breakdown ${O[6]?"":"summary"}`))&&E(l,"class",L),(!Xe||W[0]&264&&ie!==(ie=O[3]!==null&&!O[8]))&&(ee.disabled=ie),W[0]&128&&ct(ee,O[7]),(!Xe||W[0]&264&&_e!==(_e=O[3]!==null&&!O[8]))&&(se.disabled=_e),W[0]&128&&Nt(se.value)!==O[7]&&ct(se,O[7]),O[3]!==null?oe?oe.p(O,W):(oe=Pr(O),oe.c(),oe.m(X,null)):oe&&(oe.d(1),oe=null);const ke={};!Je&&W[0]&2097152&&(Je=!0,ke.value=O[21],Te(()=>Je=!1)),!ze&&W[0]&1024&&(ze=!0,ke.activitySystemCostIndex=O[10],Te(()=>ze=!1)),!Be&&W[0]&2048&&(Be=!0,ke.activityTax=O[11],Te(()=>Be=!1)),!de&&W[0]&4096&&(de=!0,ke.structureRoleBonuses=O[12],Te(()=>de=!1)),!tt&&W[0]&8192&&(tt=!0,ke.structureRigBonuses=O[13],Te(()=>tt=!1)),le.$set(ke),(!Xe||W[0]&262144)&&qe!==(qe=Sl(O[18].jobDuration)+"")&&te(_t,qe),(!Xe||W[0]&262144&&Ae!==(Ae=`${O[18].jobDuration}s`))&&E(F,"title",Ae);const Ie={};if(W[0]&65536&&(Ie.extents=O[16]),W[0]&262144&&(Ie.quantity=O[18].producedQuantity),W[0]&262144&&(Ie.totalCost=O[18].jobCost),st.$set(Ie),W[0]&12386850){at=Object.keys(O[18].activity.materials).map(O[44]);let Qe;for(Qe=0;Qe<at.length;Qe+=1){const wt=Mr(O,at,Qe);De[Qe]?(De[Qe].p(wt,W),ne(De[Qe],1)):(De[Qe]=qr(wt),De[Qe].c(),ne(De[Qe],1),De[Qe].m(Re,null))}for(rl(),Qe=at.length;Qe<De.length;Qe+=1)Ft(Qe);sl()}},i(O){if(!Xe){ne(C.$$.fragment,O),ne(le.$$.fragment,O),ne(st.$$.fragment,O);for(let W=0;W<at.length;W+=1)ne(De[W]);Xe=!0}},o(O){ae(C.$$.fragment,O),ae(le.$$.fragment,O),ae(st.$$.fragment,O),De=De.filter(Boolean);for(let W=0;W<De.length;W+=1)ae(De[W]);Xe=!1},d(O){O&&f(l),Pe.d(),yt(C),O&&f(x),O&&f(X),oe&&oe.d(),O&&f(Ce),O&&f(ue),yt(le),O&&f(lt),O&&f(Le),O&&f(H),O&&f(ve),O&&f(ot),O&&f(Re),yt(st),Vt(De,O),$e=!1,Gl(He)}}}const Or=2660;function un(e,l,t){let i,n,s,r=Ye,u=()=>(r(),r=Pl(i,F=>t(18,s=F)),i),o,a,d,h=Ye,p=()=>(h(),h=Pl(n,F=>t(30,d=F)),n),_,m,v,y;Ze(e,vi,F=>t(28,o=F)),Ze(e,Gi,F=>t(31,_=F)),Ze(e,zl,F=>t(19,v=F)),Ze(e,jl,F=>t(23,y=F)),e.$$.on_destroy.push(()=>r()),e.$$.on_destroy.push(()=>h());let{productTypeId:C=null}=l,{requiredQuantity:T=null}=l,S=1,N=!1,V={},{producedItems:q={}}=l,b={},B=Ml("currentCharacter");Ze(e,B,F=>t(32,m=F));let Q=Ml("locations");Ze(e,Q,F=>t(29,a=F));let A=gl({});xl("locations",A);let{defaultLocationId:$=null}=l,j=$,L=.05,x=10,X,Y,{unitCost:ee=0}=l,{salesTaxRate:ie=.036}=l,{brokerFeeRate:ge=.0113709973928}=l,{compact:se=!1}=l,{extents:_e=null}=l,fe,Ce,ue=[0,1e3];function ye(F){e.$$.not_equal(V[C],F)&&(V[C]=F,t(9,V),t(17,i),t(2,C),t(19,v))}function Se(F){fe=F,t(14,fe)}function he(F){Ce=F,t(15,Ce)}function le(){S=Nt(this.value),t(7,S),t(8,N),t(17,i),t(3,T),t(18,s),t(2,C),t(19,v)}function Je(){S=Nt(this.value),t(7,S),t(8,N),t(17,i),t(3,T),t(18,s),t(2,C),t(19,v)}function ze(){N=this.checked,t(8,N)}function Be(F){j=F,t(21,j)}function de(F){L=F,t(10,L)}function tt(F){x=F,t(11,x)}function lt(F){X=F,t(12,X)}function Le(F){Y=F,t(13,Y)}const ut=F=>parseInt(F);function H(F){q[F]=this.checked,t(1,q)}function ve(F,qe){e.$$.not_equal(V[qe],F)&&(V[qe]=F,t(9,V),t(17,i),t(2,C),t(19,v))}function xe(F,qe){e.$$.not_equal(b[qe],F)&&(b[qe]=F,t(20,b))}function we(F){q=F,t(1,q)}return e.$$set=F=>{"productTypeId"in F&&t(2,C=F.productTypeId),"requiredQuantity"in F&&t(3,T=F.requiredQuantity),"producedItems"in F&&t(1,q=F.producedItems),"defaultLocationId"in F&&t(26,$=F.defaultLocationId),"unitCost"in F&&t(0,ee=F.unitCost),"salesTaxRate"in F&&t(4,ie=F.salesTaxRate),"brokerFeeRate"in F&&t(5,ge=F.brokerFeeRate),"compact"in F&&t(6,se=F.compact),"extents"in F&&t(27,_e=F.extents)},e.$$.update=()=>{var F,qe,_t;if(e.$$.dirty[0]&524292&&u(t(17,i=en(C,v))),e.$$.dirty[0]&393608&&(N?i.update({runs:S}):(i.update({requiredQuantity:T}),t(7,S=s.runs))),e.$$.dirty[1]&2&&p(t(22,n=Jl[m])),e.$$.dirty[0]&1074135040|e.$$.dirty[1]&1){let ot=Object.values((qe=(F=s.activity)==null?void 0:F.requiredSkills)!=null?qe:{}).map(K=>K.type_id).filter(K=>_.types[K]!=null).filter(K=>_.types[K][Or]!=null).map(K=>{var Oe,vt;return{value:_.types[K][Or].value*((vt=(Oe=d==null?void 0:d.skills.find(Ne=>Ne.skill_id==K))==null?void 0:Oe.active_skill_level)!=null?vt:0)}}),Re=oi(1,ot)*100-100;i.update({characterModifiers:{skill_jobDuration:Re}})}if(e.$$.dirty[0]&536870912&&a){const Ae=35835;let ot=Object.values(a).filter(Re=>Re.type_id==Ae).map(Re=>[Re.type_id,Re]);A.set(Object.fromEntries(ot))}if(e.$$.dirty[0]&134144&&i.update({facilityModifiers:{systemCostIndex:L,taxRate:x}}),e.$$.dirty[0]&135168&&X&&i.update({facilityModifiers:{roleModifiers:{jobDuration:X.jobDurationModifier,materialConsumption:X.materialConsumptionModifier,jobCost:X.jobCostModifier}}}),e.$$.dirty[0]&139264&&Y&&i.update({facilityModifiers:{rigModifiers:{materialReduction:Y.materialReductionBonus,timeReduction:Y.timeReductionBonus,costReduction:Y.costReductionBonus}}}),e.$$.dirty[0]&131584){for(let Ae in V)t(9,V),t(17,i),t(2,C),t(19,v);t(9,V),t(17,i),t(2,C),t(19,v),i.update({prices:V})}e.$$.dirty[0]&268566528&&i.update({indexPrices:o}),e.$$.dirty[0]&262144&&t(0,ee=s.unitCost),e.$$.dirty[0]&134595077&&(_e===null?(t(16,ue[1]=1.1*Math.max((_t=V[C])!=null?_t:0,ee!=null?ee:0,fe!=null?fe:0,Ce!=null?Ce:0)*s.producedQuantity,ue),(ue[1]==0||isNaN(ue[1]))&&t(16,ue[1]=1e3,ue)):t(16,ue=_e))},[ee,q,C,T,ie,ge,se,S,N,V,L,x,X,Y,fe,Ce,ue,i,s,v,b,j,n,y,B,Q,$,_e,o,a,d,_,m,ye,Se,he,le,Je,ze,Be,de,tt,lt,Le,ut,H,ve,xe,we]}class jr extends kl{constructor(l){super();Il(this,l,un,nn,El,{productTypeId:2,requiredQuantity:3,producedItems:1,defaultLocationId:26,unitCost:0,salesTaxRate:4,brokerFeeRate:5,compact:6,extents:27},null,[-1,-1])}}function Sr(e,l,t){const i=e.slice();return i[72]=l[t],i[73]=l,i[74]=t,i}function on(e){var Tt;let l,t,i=((Tt=e[37].types[e[5]])==null?void 0:Tt.name)+"",n,s,r,u,o,a,d,h,p=rt(e[28])+"",_,m,v=ai(e[34])+"",y,C,T,S,N,V,q,b,B,Q,A,$=rt(e[3])+"",j,L,x=rt(e[21])+"",X,Y,ee,ie,ge,se,_e,fe,Ce,ue,ye,Se,he,le,Je,ze,Be,de,tt,lt,Le,ut,H,ve,xe,we,F,qe,_t,Ae,ot,Re,K,Oe,vt,Ne,dt,st,Mt,Xe,$e,He,Me,pe,Pe,gt,U,je,Pt,oe,Ht,Ue,pt,jt,Kt,kt,at,De,Ft,O,W,Fe,ke,Ie=Sl(e[35])+"",Qe,wt,Qt,ll,Wt,Zt=rt(e[29])+"",Ct,xt,It,Gt,Dl,cl,Bl,nl,Lt,_l,Ge,ft,wl;function Hl(R){e[46](R)}function ci(R){e[47](R)}function _i(R){e[48](R)}let ql={extents:e[32],quantity:e[26],type_id:e[5],buyOverheadRate:-e[6],sellOverheadRate:-e[7]-e[6],totalCost:e[21]};e[20][e[5]]!==void 0&&(ql.price=e[20][e[5]]),e[24]!==void 0&&(ql.lowestSellPrice=e[24]),e[25]!==void 0&&(ql.highestBuyPrice=e[25]),N=new fl({props:ql}),be.push(()=>Ee(N,"price",Hl)),be.push(()=>Ee(N,"lowestSellPrice",ci)),be.push(()=>Ee(N,"highestBuyPrice",_i));let Rt=e[8]!==null&&Nr(e),Ke=e[22]&&Lr(e);function dl(R){e[60](R)}function et(R){e[61](R)}function di(R){e[62](R)}function ml(R){e[63](R)}function Dt(R){e[64](R)}let pl={activity:Ot};e[4]!==void 0&&(pl.value=e[4]),e[14]!==void 0&&(pl.activitySystemCostIndex=e[14]),e[15]!==void 0&&(pl.activityTax=e[15]),e[16]!==void 0&&(pl.structureRoleBonuses=e[16]),e[17]!==void 0&&(pl.structureRigBonuses=e[17]),oe=new fi({props:pl}),be.push(()=>Ee(oe,"value",dl)),be.push(()=>Ee(oe,"activitySystemCostIndex",et)),be.push(()=>Ee(oe,"activityTax",di)),be.push(()=>Ee(oe,"structureRoleBonuses",ml)),be.push(()=>Ee(oe,"structureRigBonuses",Dt)),Lt=new fl({props:{compact:!0,extents:e[32],quantity:e[26],totalCost:e[29]}});let qt=Object.keys(e[12].materials).map(e[65]),We=[];for(let R=0;R<qt.length;R+=1)We[R]=Vr(Sr(e,qt,R));const bl=R=>ae(We[R],1,1,()=>{We[R]=null});return{c(){l=g("div"),t=g("div"),n=P(i),r=J(),u=g("div"),o=P(e[26]),a=J(),d=g("div"),h=P(`Unit price\r
        `),_=P(p),m=P(`\r
        Total Profit \r
        `),y=P(v),C=J(),T=g("br"),S=J(),ht(N.$$.fragment),B=J(),Q=g("br"),A=P(`\r
\r
        Unit cost `),j=P($),L=P(" Total cost "),X=P(x),ee=J(),ie=g("div"),ge=P("Runs "),se=g("input"),Ce=J(),ue=g("input"),Se=J(),Rt&&Rt.c(),he=J(),le=g("p"),Je=g("b"),ze=P("Blueprint"),Be=J(),de=g("br"),tt=J(),lt=g("label"),Le=g("input"),H=P(" Invent"),ve=J(),xe=g("br"),we=J(),Ke&&Ke.c(),F=J(),qe=g("label"),_t=P("ME "),Ae=g("input"),ot=J(),Re=P(e[0]),K=J(),Oe=g("label"),vt=P("TE "),Ne=g("input"),dt=J(),st=P(e[1]),Mt=J(),Xe=g("br"),$e=J(),He=g("label"),Me=P("Cost per run "),pe=g("input"),Pe=J(),gt=g("p"),U=g("b"),je=P("Facility"),Pt=J(),ht(oe.$$.fragment),kt=J(),at=g("b"),De=P("Manufacturing"),Ft=J(),O=g("dl"),W=g("dt"),Fe=P("Time"),ke=g("dd"),Qe=P(Ie),Qt=g("dt"),ll=P("Job Cost"),Wt=g("dd"),Ct=P(Zt),xt=J(),It=g("div"),Gt=g("div"),Dl=P("Job cost"),cl=g("div"),Bl=J(),nl=g("div"),ht(Lt.$$.fragment),_l=J();for(let R=0;R<We.length;R+=1)We[R].c();this.h()},l(R){l=k(R,"DIV",{class:!0});var G=M(l);t=k(G,"DIV",{class:!0,title:!0});var Et=M(t);n=w(Et,i),Et.forEach(f),r=z(G),u=k(G,"DIV",{class:!0});var $t=M(u);o=w($t,e[26]),$t.forEach(f),a=z(G),d=k(G,"DIV",{class:!0});var nt=M(d);h=w(nt,`Unit price\r
        `),_=w(nt,p),m=w(nt,`\r
        Total Profit \r
        `),y=w(nt,v),C=z(nt),T=k(nt,"BR",{}),S=z(nt),mt(N.$$.fragment,nt),B=z(nt),Q=k(nt,"BR",{}),A=w(nt,`\r
\r
        Unit cost `),j=w(nt,$),L=w(nt," Total cost "),X=w(nt,x),nt.forEach(f),G.forEach(f),ee=z(R),ie=k(R,"DIV",{class:!0});var Yt=M(ie);ge=w(Yt,"Runs "),se=k(Yt,"INPUT",{type:!0,min:!0,max:!0}),Ce=z(Yt),ue=k(Yt,"INPUT",{type:!0,class:!0}),Se=z(Yt),Rt&&Rt.l(Yt),Yt.forEach(f),he=z(R),le=k(R,"P",{});var I=M(le);Je=k(I,"B",{});var Z=M(Je);ze=w(Z,"Blueprint"),Z.forEach(f),Be=z(I),de=k(I,"BR",{}),tt=z(I),lt=k(I,"LABEL",{});var ce=M(lt);Le=k(ce,"INPUT",{type:!0}),H=w(ce," Invent"),ce.forEach(f),ve=z(I),xe=k(I,"BR",{}),we=z(I),Ke&&Ke.l(I),F=z(I),qe=k(I,"LABEL",{});var Bt=M(qe);_t=w(Bt,"ME "),Ae=k(Bt,"INPUT",{type:!0,min:!0,max:!0}),ot=z(Bt),Re=w(Bt,e[0]),Bt.forEach(f),K=z(I),Oe=k(I,"LABEL",{});var Jt=M(Oe);vt=w(Jt,"TE "),Ne=k(Jt,"INPUT",{type:!0,min:!0,max:!0,step:!0}),dt=z(Jt),st=w(Jt,e[1]),Jt.forEach(f),Mt=z(I),Xe=k(I,"BR",{}),$e=z(I),He=k(I,"LABEL",{});var it=M(He);Me=w(it,"Cost per run "),pe=k(it,"INPUT",{type:!0}),it.forEach(f),I.forEach(f),Pe=z(R),gt=k(R,"P",{});var ul=M(gt);U=k(ul,"B",{});var yl=M(U);je=w(yl,"Facility"),yl.forEach(f),Pt=z(ul),mt(oe.$$.fragment,ul),ul.forEach(f),kt=z(R),at=k(R,"B",{});var vl=M(at);De=w(vl,"Manufacturing"),vl.forEach(f),Ft=z(R),O=k(R,"DL",{});var re=M(O);W=k(re,"DT",{});var St=M(W);Fe=w(St,"Time"),St.forEach(f),ke=k(re,"DD",{title:!0});var Nl=M(ke);Qe=w(Nl,Ie),Nl.forEach(f),Qt=k(re,"DT",{});var Ll=M(Qt);ll=w(Ll,"Job Cost"),Ll.forEach(f),Wt=k(re,"DD",{});var el=M(Wt);Ct=w(el,Zt),el.forEach(f),re.forEach(f),xt=z(R),It=k(R,"DIV",{class:!0});var ol=M(It);Gt=k(ol,"DIV",{});var Ul=M(Gt);Dl=w(Ul,"Job cost"),Ul.forEach(f),cl=k(ol,"DIV",{}),M(cl).forEach(f),Bl=z(ol),nl=k(ol,"DIV",{class:!0});var Vl=M(nl);mt(Lt.$$.fragment,Vl),Vl.forEach(f),_l=z(ol);for(let Ol=0;Ol<We.length;Ol+=1)We[Ol].l(ol);ol.forEach(f),this.h()},h(){var R,G;E(t,"class","itemName"),E(t,"title",s=`${(R=e[37].types[e[5]])==null?void 0:R.name} [${e[5]}]`),E(u,"class","qty"),E(d,"class","graph"),E(l,"class",Y=""+(Zl(`breakdown ${e[9]?"":"summary"}`)+" svelte-8kmzjq")),E(se,"type","range"),E(se,"min",1),E(se,"max",_e=e[22]?e[23]:(G=e[30])==null?void 0:G.maxProductionLimit),se.disabled=fe=e[8]!==null&&!e[13],E(ue,"type","number"),ue.disabled=ye=e[8]!==null&&!e[13],E(ue,"class","svelte-8kmzjq"),E(ie,"class","combinedInput svelte-8kmzjq"),E(Le,"type","checkbox"),Le.disabled=ut=!e[27],E(Ae,"type","range"),E(Ae,"min",0),E(Ae,"max",10),Ae.disabled=e[22],E(Ne,"type","range"),E(Ne,"min",0),E(Ne,"max",20),E(Ne,"step",2),Ne.disabled=e[22],E(pe,"type","number"),pe.disabled=e[22],E(ke,"title",wt=`${e[35]}s`),E(nl,"class","graph"),E(It,"class","breakdown")},m(R,G){D(R,l,G),c(l,t),c(t,n),c(l,r),c(l,u),c(u,o),c(l,a),c(l,d),c(d,h),c(d,_),c(d,m),c(d,y),c(d,C),c(d,T),c(d,S),bt(N,d,null),c(d,B),c(d,Q),c(d,A),c(d,j),c(d,L),c(d,X),D(R,ee,G),D(R,ie,G),c(ie,ge),c(ie,se),ct(se,e[11]),c(ie,Ce),c(ie,ue),ct(ue,e[11]),c(ie,Se),Rt&&Rt.m(ie,null),D(R,he,G),D(R,le,G),c(le,Je),c(Je,ze),c(le,Be),c(le,de),c(le,tt),c(le,lt),c(lt,Le),Le.checked=e[22],c(lt,H),c(le,ve),c(le,xe),c(le,we),Ke&&Ke.m(le,null),c(le,F),c(le,qe),c(qe,_t),c(qe,Ae),ct(Ae,e[0]),c(qe,ot),c(qe,Re),c(le,K),c(le,Oe),c(Oe,vt),c(Oe,Ne),ct(Ne,e[1]),c(Oe,dt),c(Oe,st),c(le,Mt),c(le,Xe),c(le,$e),c(le,He),c(He,Me),c(He,pe),ct(pe,e[10]),D(R,Pe,G),D(R,gt,G),c(gt,U),c(U,je),c(gt,Pt),bt(oe,gt,null),D(R,kt,G),D(R,at,G),c(at,De),D(R,Ft,G),D(R,O,G),c(O,W),c(W,Fe),c(O,ke),c(ke,Qe),c(O,Qt),c(Qt,ll),c(O,Wt),c(Wt,Ct),D(R,xt,G),D(R,It,G),c(It,Gt),c(Gt,Dl),c(It,cl),c(It,Bl),c(It,nl),bt(Lt,nl,null),c(It,_l);for(let Et=0;Et<We.length;Et+=1)We[Et].m(It,null);Ge=!0,ft||(wl=[me(se,"change",e[49]),me(se,"input",e[49]),me(ue,"input",e[50]),me(Le,"change",e[52]),me(Ae,"change",e[57]),me(Ae,"input",e[57]),me(Ne,"change",e[58]),me(Ne,"input",e[58]),me(pe,"input",e[59])],ft=!0)},p(R,G){var Yt,I,Z;(!Ge||G[0]&32|G[1]&64)&&i!==(i=((Yt=R[37].types[R[5]])==null?void 0:Yt.name)+"")&&te(n,i),(!Ge||G[0]&32|G[1]&64&&s!==(s=`${(I=R[37].types[R[5]])==null?void 0:I.name} [${R[5]}]`))&&E(t,"title",s),(!Ge||G[0]&67108864)&&te(o,R[26]),(!Ge||G[0]&268435456)&&p!==(p=rt(R[28])+"")&&te(_,p),(!Ge||G[1]&8)&&v!==(v=ai(R[34])+"")&&te(y,v);const Et={};G[1]&2&&(Et.extents=R[32]),G[0]&67108864&&(Et.quantity=R[26]),G[0]&32&&(Et.type_id=R[5]),G[0]&64&&(Et.buyOverheadRate=-R[6]),G[0]&192&&(Et.sellOverheadRate=-R[7]-R[6]),G[0]&2097152&&(Et.totalCost=R[21]),!V&&G[0]&1048608&&(V=!0,Et.price=R[20][R[5]],Te(()=>V=!1)),!q&&G[0]&16777216&&(q=!0,Et.lowestSellPrice=R[24],Te(()=>q=!1)),!b&&G[0]&33554432&&(b=!0,Et.highestBuyPrice=R[25],Te(()=>b=!1)),N.$set(Et),(!Ge||G[0]&8)&&$!==($=rt(R[3])+"")&&te(j,$),(!Ge||G[0]&2097152)&&x!==(x=rt(R[21])+"")&&te(X,x),(!Ge||G[0]&512&&Y!==(Y=""+(Zl(`breakdown ${R[9]?"":"summary"}`)+" svelte-8kmzjq")))&&E(l,"class",Y),(!Ge||G[0]&1086324736&&_e!==(_e=R[22]?R[23]:(Z=R[30])==null?void 0:Z.maxProductionLimit))&&E(se,"max",_e),(!Ge||G[0]&8448&&fe!==(fe=R[8]!==null&&!R[13]))&&(se.disabled=fe),G[0]&2048&&ct(se,R[11]),(!Ge||G[0]&8448&&ye!==(ye=R[8]!==null&&!R[13]))&&(ue.disabled=ye),G[0]&2048&&Nt(ue.value)!==R[11]&&ct(ue,R[11]),R[8]!==null?Rt?Rt.p(R,G):(Rt=Nr(R),Rt.c(),Rt.m(ie,null)):Rt&&(Rt.d(1),Rt=null),(!Ge||G[0]&134217728&&ut!==(ut=!R[27]))&&(Le.disabled=ut),G[0]&4194304&&(Le.checked=R[22]),R[22]?Ke?(Ke.p(R,G),G[0]&4194304&&ne(Ke,1)):(Ke=Lr(R),Ke.c(),ne(Ke,1),Ke.m(le,F)):Ke&&(rl(),ae(Ke,1,1,()=>{Ke=null}),sl()),(!Ge||G[0]&4194304)&&(Ae.disabled=R[22]),G[0]&1&&ct(Ae,R[0]),(!Ge||G[0]&1)&&te(Re,R[0]),(!Ge||G[0]&4194304)&&(Ne.disabled=R[22]),G[0]&2&&ct(Ne,R[1]),(!Ge||G[0]&2)&&te(st,R[1]),(!Ge||G[0]&4194304)&&(pe.disabled=R[22]),G[0]&1024&&Nt(pe.value)!==R[10]&&ct(pe,R[10]);const $t={};!Ht&&G[0]&16&&(Ht=!0,$t.value=R[4],Te(()=>Ht=!1)),!Ue&&G[0]&16384&&(Ue=!0,$t.activitySystemCostIndex=R[14],Te(()=>Ue=!1)),!pt&&G[0]&32768&&(pt=!0,$t.activityTax=R[15],Te(()=>pt=!1)),!jt&&G[0]&65536&&(jt=!0,$t.structureRoleBonuses=R[16],Te(()=>jt=!1)),!Kt&&G[0]&131072&&(Kt=!0,$t.structureRigBonuses=R[17],Te(()=>Kt=!1)),oe.$set($t),(!Ge||G[1]&16)&&Ie!==(Ie=Sl(R[35])+"")&&te(Qe,Ie),(!Ge||G[1]&16&&wt!==(wt=`${R[35]}s`))&&E(ke,"title",wt),(!Ge||G[0]&536870912)&&Zt!==(Zt=rt(R[29])+"")&&te(Ct,Zt);const nt={};if(G[1]&2&&(nt.extents=R[32]),G[0]&67108864&&(nt.quantity=R[26]),G[0]&536870912&&(nt.totalCost=R[29]),Lt.$set(nt),G[0]&1839252|G[1]&71){qt=Object.keys(R[12].materials).map(R[65]);let ce;for(ce=0;ce<qt.length;ce+=1){const Bt=Sr(R,qt,ce);We[ce]?(We[ce].p(Bt,G),ne(We[ce],1)):(We[ce]=Vr(Bt),We[ce].c(),ne(We[ce],1),We[ce].m(It,null))}for(rl(),ce=qt.length;ce<We.length;ce+=1)bl(ce);sl()}},i(R){if(!Ge){ne(N.$$.fragment,R),ne(Ke),ne(oe.$$.fragment,R),ne(Lt.$$.fragment,R);for(let G=0;G<qt.length;G+=1)ne(We[G]);Ge=!0}},o(R){ae(N.$$.fragment,R),ae(Ke),ae(oe.$$.fragment,R),ae(Lt.$$.fragment,R),We=We.filter(Boolean);for(let G=0;G<We.length;G+=1)ae(We[G]);Ge=!1},d(R){R&&f(l),yt(N),R&&f(ee),R&&f(ie),Rt&&Rt.d(),R&&f(he),R&&f(le),Ke&&Ke.d(),R&&f(Pe),R&&f(gt),yt(oe),R&&f(kt),R&&f(at),R&&f(Ft),R&&f(O),R&&f(xt),R&&f(It),yt(Lt),Vt(We,R),ft=!1,Gl(wl)}}}function an(e){let l;return{c(){l=P("No blueprint selected yet")},l(t){l=w(t,"No blueprint selected yet")},m(t,i){D(t,l,i)},p:Ye,i:Ye,o:Ye,d(t){t&&f(l)}}}function Nr(e){let l,t,i,n,s;return{c(){l=g("label"),t=g("input"),i=P(" Override"),this.h()},l(r){l=k(r,"LABEL",{});var u=M(l);t=k(u,"INPUT",{type:!0}),i=w(u," Override"),u.forEach(f),this.h()},h(){E(t,"type","checkbox")},m(r,u){D(r,l,u),c(l,t),t.checked=e[13],c(l,i),n||(s=me(t,"change",e[51]),n=!0)},p(r,u){u[0]&8192&&(t.checked=r[13])},d(r){r&&f(l),n=!1,s()}}}function Lr(e){let l,t,i,n,s,r,u;function o(_){e[53](_)}function a(_){e[54](_)}function d(_){e[55](_)}function h(_){e[56](_)}let p={blueprintToInvent:e[30]};return e[10]!==void 0&&(p.expectedCostPerRun=e[10]),e[0]!==void 0&&(p.productME=e[0]),e[1]!==void 0&&(p.productTE=e[1]),e[23]!==void 0&&(p.productRuns=e[23]),t=new Zs({props:p}),be.push(()=>Ee(t,"expectedCostPerRun",o)),be.push(()=>Ee(t,"productME",a)),be.push(()=>Ee(t,"productTE",d)),be.push(()=>Ee(t,"productRuns",h)),{c(){l=g("div"),ht(t.$$.fragment),this.h()},l(_){l=k(_,"DIV",{class:!0});var m=M(l);mt(t.$$.fragment,m),m.forEach(f),this.h()},h(){E(l,"class","subItem")},m(_,m){D(_,l,m),bt(t,l,null),u=!0},p(_,m){const v={};m[0]&1073741824&&(v.blueprintToInvent=_[30]),!i&&m[0]&1024&&(i=!0,v.expectedCostPerRun=_[10],Te(()=>i=!1)),!n&&m[0]&1&&(n=!0,v.productME=_[0],Te(()=>n=!1)),!s&&m[0]&2&&(s=!0,v.productTE=_[1],Te(()=>s=!1)),!r&&m[0]&8388608&&(r=!0,v.productRuns=_[23],Te(()=>r=!1)),t.$set(v)},i(_){u||(ne(t.$$.fragment,_),u=!0)},o(_){ae(t.$$.fragment,_),u=!1},d(_){_&&f(l),yt(t)}}}function Ur(e){let l,t,i,n,s,r,u;const o=[_n,cn,fn],a=[];function d(h,p){return(t==null||p[0]&4096|p[1]&1)&&(t=!!ni(h[31],h[72])),t?0:((i==null||p[0]&4096|p[1]&1)&&(i=!!Xl(h[72],h[31]).activity),i?1:2)}return n=d(e,[-1,-1,-1]),s=a[n]=o[n](e),{c(){l=g("div"),s.c(),r=J(),this.h()},l(h){l=k(h,"DIV",{class:!0});var p=M(l);s.l(p),r=z(p),p.forEach(f),this.h()},h(){E(l,"class","subItem")},m(h,p){D(h,l,p),a[n].m(l,null),c(l,r),u=!0},p(h,p){let _=n;n=d(h,p),n===_?a[n].p(h,p):(rl(),ae(a[_],1,1,()=>{a[_]=null}),sl(),s=a[n],s?s.p(h,p):(s=a[n]=o[n](h),s.c()),ne(s,1),s.m(l,r))},i(h){u||(ne(s),u=!0)},o(h){ae(s),u=!1},d(h){h&&f(l),a[n].d()}}}function fn(e){var n;let l,t=((n=e[37].types[e[72]])==null?void 0:n.name)+"",i;return{c(){l=P("Could not find industry details for "),i=P(t)},l(s){l=w(s,"Could not find industry details for "),i=w(s,t)},m(s,r){D(s,l,r),D(s,i,r)},p(s,r){var u;r[0]&4096|r[1]&64&&t!==(t=((u=s[37].types[s[72]])==null?void 0:u.name)+"")&&te(i,t)},i:Ye,o:Ye,d(s){s&&f(l),s&&f(i)}}}function cn(e){let l,t,i,n;function s(o){e[70](o,e[72])}function r(o){e[71](o)}let u={productTypeId:e[72],requiredQuantity:e[18](e[12].materials[e[72]].quantity),defaultLocationId:e[4],compact:!0};return e[19][e[72]]!==void 0&&(u.unitCost=e[19][e[72]]),e[2]!==void 0&&(u.producedItems=e[2]),l=new jr({props:u}),be.push(()=>Ee(l,"unitCost",s)),be.push(()=>Ee(l,"producedItems",r)),{c(){ht(l.$$.fragment)},l(o){mt(l.$$.fragment,o)},m(o,a){bt(l,o,a),n=!0},p(o,a){e=o;const d={};a[0]&4096&&(d.productTypeId=e[72]),a[0]&266240&&(d.requiredQuantity=e[18](e[12].materials[e[72]].quantity)),a[0]&16&&(d.defaultLocationId=e[4]),!t&&a[0]&528384&&(t=!0,d.unitCost=e[19][e[72]],Te(()=>t=!1)),!i&&a[0]&4&&(i=!0,d.producedItems=e[2],Te(()=>i=!1)),l.$set(d)},i(o){n||(ne(l.$$.fragment,o),n=!0)},o(o){ae(l.$$.fragment,o),n=!1},d(o){yt(l,o)}}}function _n(e){let l,t,i,n;function s(o){e[68](o,e[72])}function r(o){e[69](o)}let u={selectedProductId:e[72],requiredQuantity:e[18](e[12].materials[e[72]].quantity),materialEfficiency:10,timeEfficiency:20,selectedLocationId:e[4],compact:!0};return e[19][e[72]]!==void 0&&(u.unitCost=e[19][e[72]]),e[2]!==void 0&&(u.producedItems=e[2]),l=new Ar({props:u}),be.push(()=>Ee(l,"unitCost",s)),be.push(()=>Ee(l,"producedItems",r)),{c(){ht(l.$$.fragment)},l(o){mt(l.$$.fragment,o)},m(o,a){bt(l,o,a),n=!0},p(o,a){e=o;const d={};a[0]&4096&&(d.selectedProductId=e[72]),a[0]&266240&&(d.requiredQuantity=e[18](e[12].materials[e[72]].quantity)),a[0]&16&&(d.selectedLocationId=e[4]),!t&&a[0]&528384&&(t=!0,d.unitCost=e[19][e[72]],Te(()=>t=!1)),!i&&a[0]&4&&(i=!0,d.producedItems=e[2],Te(()=>i=!1)),l.$set(d)},i(o){n||(ne(l.$$.fragment,o),n=!0)},o(o){ae(l.$$.fragment,o),n=!1},d(o){yt(l,o)}}}function Vr(e){var $;let l,t,i,n,s,r,u=(($=e[37].types[e[72]])==null?void 0:$.name)+"",o,a,d,h,p=e[18](e[12].materials[e[72]].quantity)+"",_,m,v,y,C,T,S,N,V,q;function b(){e[66].call(i,e[72])}function B(j){e[67](j,e[72])}let Q={extents:e[32],quantity:e[18](e[12].materials[e[72]].quantity),type_id:e[72],overridePrice:e[19][e[72]],buyOverheadRate:e[7],totalCost:e[19][e[72]]?e[19][e[72]]*e[18](e[12].materials[e[72]].quantity):null,compact:!0};e[20][e[72]]!==void 0&&(Q.price=e[20][e[72]]),y=new fl({props:Q}),be.push(()=>Ee(y,"price",B));let A=e[2][e[72]]&&Ur(e);return{c(){l=g("div"),t=g("label"),i=g("input"),s=J(),r=g("span"),o=P(u),d=J(),h=g("div"),_=P(p),m=J(),v=g("div"),ht(y.$$.fragment),T=J(),A&&A.c(),S=Ve(),this.h()},l(j){l=k(j,"DIV",{class:!0});var L=M(l);t=k(L,"LABEL",{});var x=M(t);i=k(x,"INPUT",{type:!0}),s=z(x),r=k(x,"SPAN",{title:!0});var X=M(r);o=w(X,u),X.forEach(f),x.forEach(f),L.forEach(f),d=z(j),h=k(j,"DIV",{class:!0});var Y=M(h);_=w(Y,p),Y.forEach(f),m=z(j),v=k(j,"DIV",{class:!0});var ee=M(v);mt(y.$$.fragment,ee),ee.forEach(f),T=z(j),A&&A.l(j),S=Ve(),this.h()},h(){var j;E(i,"type","checkbox"),i.disabled=n=!e[33](e[72]),E(r,"title",a=`${(j=e[37].types[e[72]])==null?void 0:j.name} [${e[72]}]`),E(l,"class","itemName"),E(h,"class","qty"),E(v,"class","graph")},m(j,L){D(j,l,L),c(l,t),c(t,i),i.checked=e[2][e[72]],c(t,s),c(t,r),c(r,o),D(j,d,L),D(j,h,L),c(h,_),D(j,m,L),D(j,v,L),bt(y,v,null),D(j,T,L),A&&A.m(j,L),D(j,S,L),N=!0,V||(q=me(i,"change",b),V=!0)},p(j,L){var X,Y;e=j,(!N||L[0]&4096|L[1]&4&&n!==(n=!e[33](e[72])))&&(i.disabled=n),L[0]&4100&&(i.checked=e[2][e[72]]),(!N||L[0]&4096|L[1]&64)&&u!==(u=((X=e[37].types[e[72]])==null?void 0:X.name)+"")&&te(o,u),(!N||L[0]&4096|L[1]&64&&a!==(a=`${(Y=e[37].types[e[72]])==null?void 0:Y.name} [${e[72]}]`))&&E(r,"title",a),(!N||L[0]&266240)&&p!==(p=e[18](e[12].materials[e[72]].quantity)+"")&&te(_,p);const x={};L[1]&2&&(x.extents=e[32]),L[0]&266240&&(x.quantity=e[18](e[12].materials[e[72]].quantity)),L[0]&4096&&(x.type_id=e[72]),L[0]&528384&&(x.overridePrice=e[19][e[72]]),L[0]&128&&(x.buyOverheadRate=e[7]),L[0]&790528&&(x.totalCost=e[19][e[72]]?e[19][e[72]]*e[18](e[12].materials[e[72]].quantity):null),!C&&L[0]&1052672&&(C=!0,x.price=e[20][e[72]],Te(()=>C=!1)),y.$set(x),e[2][e[72]]?A?(A.p(e,L),L[0]&4100&&ne(A,1)):(A=Ur(e),A.c(),ne(A,1),A.m(S.parentNode,S)):A&&(rl(),ae(A,1,1,()=>{A=null}),sl())},i(j){N||(ne(y.$$.fragment,j),ne(A),N=!0)},o(j){ae(y.$$.fragment,j),ae(A),N=!1},d(j){j&&f(l),j&&f(d),j&&f(h),j&&f(m),j&&f(v),yt(y),j&&f(T),A&&A.d(j),j&&f(S),V=!1,q()}}}function dn(e){let l,t,i,n;const s=[an,on],r=[];function u(o,a){return o[30]?1:0}return l=u(e),t=r[l]=s[l](e),{c(){t.c(),i=Ve()},l(o){t.l(o),i=Ve()},m(o,a){r[l].m(o,a),D(o,i,a),n=!0},p(o,a){let d=l;l=u(o),l===d?r[l].p(o,a):(rl(),ae(r[d],1,1,()=>{r[d]=null}),sl(),t=r[l],t?t.p(o,a):(t=r[l]=s[l](o),t.c()),ne(t,1),t.m(i.parentNode,i))},i(o){n||(ne(t),n=!0)},o(o){ae(t),n=!1},d(o){r[l].d(o),o&&f(i)}}}function pn(e,l,t){let i,n,s,r,u,o,a,d,h,p,_,m=Ye,v=()=>(m(),m=Pl(r,U=>t(42,_=U)),r),y,C,T,S;Ze(e,zl,U=>t(31,p=U)),Ze(e,Gi,U=>t(43,y=U)),Ze(e,vi,U=>t(45,T=U)),Ze(e,jl,U=>t(37,S=U)),e.$$.on_destroy.push(()=>m());let N=0,{selectedProductId:V=null}=l,{salesTaxRate:q=.036}=l,{brokerFeeRate:b=.0113709973928}=l,{requiredQuantity:B=null}=l,Q=1,{materialEfficiency:A=0}=l,{timeEfficiency:$=0}=l,{producedItems:j={}}=l,L=null,x=!1,{selectedLocationId:X=null}=l,Y,ee,ie,ge,se=U=>U,_e={},fe={},Ce=0,ue=0,{unitCost:ye=null}=l,{compact:Se=!1}=l,he=!1,le=10,Je=Ml("currentCharacter");Ze(e,Je,U=>t(44,C=U));let{extents:ze=null}=l,Be,de,tt=[0,1e3],lt=()=>!1;function Le(U){e.$$.not_equal(fe[V],U)&&(fe[V]=U,t(20,fe))}function ut(U){Be=U,t(24,Be)}function H(U){de=U,t(25,de)}function ve(){Q=Nt(this.value),t(11,Q),t(8,B),t(13,x),t(12,L),t(5,V),t(22,he),t(23,le),t(30,i),t(27,n),t(31,p)}function xe(){Q=Nt(this.value),t(11,Q),t(8,B),t(13,x),t(12,L),t(5,V),t(22,he),t(23,le),t(30,i),t(27,n),t(31,p)}function we(){x=this.checked,t(13,x)}function F(){he=this.checked,t(22,he),t(27,n),t(31,p),t(30,i),t(5,V)}function qe(U){N=U,t(10,N)}function _t(U){A=U,t(0,A)}function Ae(U){$=U,t(1,$)}function ot(U){le=U,t(23,le)}function Re(){A=Nt(this.value),t(0,A)}function K(){$=Nt(this.value),t(1,$)}function Oe(){N=Nt(this.value),t(10,N)}function vt(U){X=U,t(4,X)}function Ne(U){Y=U,t(14,Y)}function dt(U){ee=U,t(15,ee)}function st(U){ie=U,t(16,ie)}function Mt(U){ge=U,t(17,ge)}const Xe=U=>parseInt(U);function $e(U){j[U]=this.checked,t(2,j),t(12,L),t(30,i),t(31,p),t(5,V)}function He(U,je){e.$$.not_equal(fe[je],U)&&(fe[je]=U,t(20,fe))}function Me(U,je){e.$$.not_equal(_e[je],U)&&(_e[je]=U,t(19,_e),t(2,j))}function pe(U){j=U,t(2,j)}function Pe(U,je){e.$$.not_equal(_e[je],U)&&(_e[je]=U,t(19,_e),t(2,j))}function gt(U){j=U,t(2,j)}return e.$$set=U=>{"selectedProductId"in U&&t(5,V=U.selectedProductId),"salesTaxRate"in U&&t(6,q=U.salesTaxRate),"brokerFeeRate"in U&&t(7,b=U.brokerFeeRate),"requiredQuantity"in U&&t(8,B=U.requiredQuantity),"materialEfficiency"in U&&t(0,A=U.materialEfficiency),"timeEfficiency"in U&&t(1,$=U.timeEfficiency),"producedItems"in U&&t(2,j=U.producedItems),"selectedLocationId"in U&&t(4,X=U.selectedLocationId),"unitCost"in U&&t(3,ye=U.unitCost),"compact"in U&&t(9,Se=U.compact),"extents"in U&&t(39,ze=U.extents)},e.$$.update=()=>{var U,je,Pt,oe,Ht;if(e.$$.dirty[0]&32|e.$$.dirty[1]&1&&t(30,i=ni(p,V)),e.$$.dirty[0]&1073741824|e.$$.dirty[1]&1&&t(27,n=Es(p,i==null?void 0:i.type_id)),e.$$.dirty[0]&1073741824&&t(12,L=i==null?void 0:i.activities[Ot]),e.$$.dirty[0]&12576&&B!==null&&!x&&L&&t(11,Q=Math.ceil(B/L.products[V].quantity)),e.$$.dirty[0]&134217728&&(n||t(22,he=!1)),e.$$.dirty[0]&12582912&&he&&t(11,Q=le),e.$$.dirty[0]&198657&&t(18,se=Ue=>{var pt,jt;return Math.max(Q,Math.ceil(Ue*Q*(1-A/100)*(1+((pt=ie==null?void 0:ie.materialConsumptionModifier)!=null?pt:0)/100)*(1+((jt=ge==null?void 0:ge.materialReductionBonus)!=null?jt:0)/100)))}),e.$$.dirty[0]&4096|e.$$.dirty[1]&16896&&(t(40,ue=0),L))for(let Ue in L.materials)t(40,ue+=L.materials[Ue].quantity*((je=(U=T[Ue])==null?void 0:U.adjusted_price)!=null?je:0));if(e.$$.dirty[0]&116736|e.$$.dirty[1]&512&&t(29,s=ue*Y*(1+((Pt=ie==null?void 0:ie.jobCostModifier)!=null?Pt:0)/100)*(1+ee/100)*Q),e.$$.dirty[0]&540285952&&(t(21,Ce=0),L)){for(let Ue in L.materials){let pt=se(L.materials[Ue].quantity);t(21,Ce+=pt*fe[Ue])}t(21,Ce+=s),t(21,Ce+=N*Q)}if(e.$$.dirty[0]&524292)for(let Ue in _e)j[Ue]||t(19,_e[Ue]=void 0,_e);e.$$.dirty[1]&8192&&v(t(36,r=Jl[C])),e.$$.dirty[0]&4096|e.$$.dirty[1]&6144&&t(41,u=L?[...Object.values(L.requiredSkills||{}).map(Ue=>Ue.type_id),Fi].reduce((Ue,pt)=>{var Kt,kt,at,De,Ft,O,W,Fe;if(y.types[pt]===void 0)return Ue;let jt=(O=(Ft=(at=(Kt=y.types[pt][440])==null?void 0:Kt.value)!=null?at:(kt=y.types[pt][1982])==null?void 0:kt.value)!=null?Ft:(De=y.types[pt][1961])==null?void 0:De.value)!=null?O:0;return jt*=(Fe=(W=_==null?void 0:_.skills.find(ke=>ke.skill_id==pt))==null?void 0:W.active_skill_level)!=null?Fe:0,Ue*(1+jt*.01)},1):1),e.$$.dirty[0]&202754|e.$$.dirty[1]&1024&&t(35,o=(L==null?void 0:L.time)*(1-$/100)*u*(1+((oe=ie==null?void 0:ie.jobDurationModifier)!=null?oe:0)/100)*(1+((Ht=ge==null?void 0:ge.timeReductionBonus)!=null?Ht:0)/100)*Q),e.$$.dirty[0]&1048608&&t(28,a=fe[V]),e.$$.dirty[0]&6176&&t(26,d=(L==null?void 0:L.products[V].quantity)*Q),e.$$.dirty[0]&337641472&&t(34,h=a*d-Ce),e.$$.dirty[0]&69210112&&t(3,ye=L?Ce/d:null),e.$$.dirty[0]&118493224|e.$$.dirty[1]&256&&(ze===null?L&&t(32,tt[1]=1.1*Math.max(fe[V],ye,Be!=null?Be:0,de!=null?de:0)*d,tt):t(32,tt=ze)),e.$$.dirty[1]&1&&t(33,lt=Ue=>ni(p,Ue)!=null||Xl(Ue,p).activity!=null)},[A,$,j,ye,X,V,q,b,B,Se,N,Q,L,x,Y,ee,ie,ge,se,_e,fe,Ce,he,le,Be,de,d,n,a,s,i,p,tt,lt,h,o,r,S,Je,ze,ue,u,_,y,C,T,Le,ut,H,ve,xe,we,F,qe,_t,Ae,ot,Re,K,Oe,vt,Ne,dt,st,Mt,Xe,$e,He,Me,pe,Pe,gt]}class Ar extends kl{constructor(l){super();Il(this,l,pn,dn,El,{selectedProductId:5,salesTaxRate:6,brokerFeeRate:7,requiredQuantity:8,materialEfficiency:0,timeEfficiency:1,producedItems:2,selectedLocationId:4,unitCost:3,compact:9,extents:39},null,[-1,-1,-1])}}function Fr(e,l,t){const i=e.slice();return i[13]=l[t].type_id,i[14]=l[t].name,i}function Qr(e,l,t){const i=e.slice();return i[17]=l[t],i[18]=l,i[19]=t,i}function Gr(e,l,t){const i=e.slice();return i[20]=l[t].market_group_id,i[14]=l[t].name,i}function Yr(e){let l,t=e[14]+"",i,n;return{c(){l=g("option"),i=P(t),this.h()},l(s){l=k(s,"OPTION",{});var r=M(l);i=w(r,t),r.forEach(f),this.h()},h(){l.__value=n=e[20],l.value=l.__value},m(s,r){D(s,l,r),c(l,i)},p(s,r){r&6&&t!==(t=s[14]+"")&&te(i,t),r&6&&n!==(n=s[20])&&(l.__value=n,l.value=l.__value)},d(s){s&&f(l)}}}function Jr(e){let l,t,i,n,s=Object.values(e[17]).filter(e[9]),r=[];for(let a=0;a<s.length;a+=1)r[a]=Yr(Gr(e,s,a));function u(){e[10].call(l,e[19])}function o(...a){return e[11](e[17],e[19],...a)}return{c(){l=g("select");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){l=k(a,"SELECT",{name:!0,class:!0});var d=M(l);for(let h=0;h<r.length;h+=1)r[h].l(d);d.forEach(f),this.h()},h(){E(l,"name",t=e[19].toString()),E(l,"class","svelte-l65zkr"),e[3][e[19]]===void 0&&Fl(u)},m(a,d){D(a,l,d);for(let h=0;h<r.length;h+=1)r[h].m(l,null);tl(l,e[3][e[19]]),i||(n=[me(l,"change",u),me(l,"change",o)],i=!0)},p(a,d){if(e=a,d&6){s=Object.values(e[17]).filter(e[9]);let h;for(h=0;h<s.length;h+=1){const p=Gr(e,s,h);r[h]?r[h].p(p,d):(r[h]=Yr(p),r[h].c(),r[h].m(l,null))}for(;h<r.length;h+=1)r[h].d(1);r.length=s.length}d&14&&tl(l,e[3][e[19]])},d(a){a&&f(l),Vt(r,a),i=!1,Gl(n)}}}function zr(e){let l,t=e[14]+"",i,n;return{c(){l=g("option"),i=P(t),this.h()},l(s){l=k(s,"OPTION",{});var r=M(l);i=w(r,t),r.forEach(f),this.h()},h(){l.__value=n=e[13],l.value=l.__value},m(s,r){D(s,l,r),c(l,i)},p(s,r){r&16&&t!==(t=s[14]+"")&&te(i,t),r&16&&n!==(n=s[13])&&(l.__value=n,l.value=l.__value)},d(s){s&&f(l)}}}function hn(e){let l,t,i,n,s,r,u,o=e[2],a=[];for(let p=0;p<o.length;p+=1)a[p]=Jr(Qr(e,o,p));let d=e[4],h=[];for(let p=0;p<d.length;p+=1)h[p]=zr(Fr(e,d,p));return{c(){l=g("p");for(let p=0;p<a.length;p+=1)a[p].c();t=J(),i=g("br"),n=P(`\r
    Item \r
    `),s=g("select");for(let p=0;p<h.length;p+=1)h[p].c();this.h()},l(p){l=k(p,"P",{});var _=M(l);for(let v=0;v<a.length;v+=1)a[v].l(_);t=z(_),i=k(_,"BR",{}),n=w(_,`\r
    Item \r
    `),s=k(_,"SELECT",{class:!0});var m=M(s);for(let v=0;v<h.length;v+=1)h[v].l(m);m.forEach(f),_.forEach(f),this.h()},h(){E(s,"class","svelte-l65zkr")},m(p,_){D(p,l,_);for(let m=0;m<a.length;m+=1)a[m].m(l,null);c(l,t),c(l,i),c(l,n),c(l,s);for(let m=0;m<h.length;m+=1)h[m].m(s,null);tl(s,e[0]),r||(u=me(s,"change",e[5]),r=!0)},p(p,[_]){if(_&14){o=p[2];let m;for(m=0;m<o.length;m+=1){const v=Qr(p,o,m);a[m]?a[m].p(v,_):(a[m]=Jr(v),a[m].c(),a[m].m(l,t))}for(;m<a.length;m+=1)a[m].d(1);a.length=o.length}if(_&16){d=p[4];let m;for(m=0;m<d.length;m+=1){const v=Fr(p,d,m);h[m]?h[m].p(v,_):(h[m]=zr(v),h[m].c(),h[m].m(s,null))}for(;m<h.length;m+=1)h[m].d(1);h.length=d.length}_&17&&tl(s,p[0])},i:Ye,o:Ye,d(p){p&&f(l),Vt(a,p),Vt(h,p),r=!1,u()}}}function Xr(e){if(e.child_groups===void 0)return[e.market_group_id];let l=Object.keys(e.child_groups).map(t=>parseInt(t));for(let t in e.child_groups)l=l.concat(Xr(e.child_groups[t]));return l}function mn(e,l,t){let i;Ze(e,jl,y=>t(8,i=y));let n=new Set,s=[],r=[null],u=[],o=[],{selectableTypes:a=void 0}=l,{selectedTypeId:d=null}=l;const h=ls();function p(y){h("change",parseInt(y.target.value))}const _=y=>n.has(y.market_group_id);function m(y){r[y]=Ql(this),t(3,r),t(2,s),t(8,i),t(3,r),t(1,n),t(8,i),t(7,u),t(6,a)}const v=(y,C,T)=>{y[T.target.value].child_groups&&t(3,r=[...r.slice(0,C+1),null])};return e.$$set=y=>{"selectableTypes"in y&&t(6,a=y.selectableTypes),"selectedTypeId"in y&&t(0,d=y.selectedTypeId)},e.$$.update=()=>{if(e.$$.dirty&320&&i.types&&t(7,u=a||Object.values(i.types)),e.$$.dirty&408){let y=r[r.length-1]||r[r.length-2];if(y){t(4,o=[]);let C=new Set,T=new Set(u.map(N=>N.type_id)),S=Xr(i.markets.groups[y]);for(let N of S)i.markets.groups[N].types.forEach(V=>{T.has(V)&&C.add(V)});t(4,o=Array.from(C).map(N=>i.types[N]))}else t(4,o=u);o.sort((C,T)=>C.name.localeCompare(T.name))}if(e.$$.dirty&386&&i.markets&&i.types&&i.markets.groups){let y=new Set(u.map(C=>C.type_id));n.clear();for(let C in i.markets.groups){let T=i.markets.groups[C];for(let S of T.types)if(y.has(S)){let N=parseInt(C);do n.add(N),N=i.markets.groups[N].parent_group_id;while(N!==void 0)}}t(1,n),t(8,i),t(7,u),t(6,a)}if(e.$$.dirty&268&&i.markets){t(2,s=[i.markets.groupTree]);for(let y of r)y!=null&&i.markets.groups[y].child_groups&&s.push(i.markets.groups[y].child_groups)}},[d,n,s,r,o,p,a,u,i,_,m,v]}class bn extends kl{constructor(l){super();Il(this,l,mn,hn,El,{selectableTypes:6,selectedTypeId:0})}}function yn(e){var S,N,V,q;let l,t,i,n,s,r,u,o,a,d,h,p,_,m;document.title=l=""+((((S=e[1])==null?void 0:S.types)&&((N=e[1])==null?void 0:N.types[e[4]])?`${(q=(V=e[1])==null?void 0:V.types[e[4]])==null?void 0:q.name} - `:"")+"EVE Online Visual Industry Calculator");function v(b){e[13](b)}let y={};e[0]!==void 0&&(y.value=e[0]),i=new ks({props:y}),be.push(()=>Ee(i,"value",v));function C(b){e[14](b)}let T={allowUnselected:!0};return e[5]!==void 0&&(T.value=e[5]),u=new fi({props:T}),be.push(()=>Ee(u,"value",C)),d=new bn({props:{selectedTypeId:e[4],selectableTypes:e[2]}}),d.$on("change",e[15]),_=new Ar({props:{selectedProductId:e[4]}}),{c(){t=J(),ht(i.$$.fragment),s=g("br"),r=P(`\r
Filter market `),ht(u.$$.fragment),a=J(),ht(d.$$.fragment),h=J(),p=g("p"),ht(_.$$.fragment)},l(b){is('[data-svelte="svelte-xymh63"]',document.head).forEach(f),t=z(b),mt(i.$$.fragment,b),s=k(b,"BR",{}),r=w(b,`\r
Filter market `),mt(u.$$.fragment,b),a=z(b),mt(d.$$.fragment,b),h=z(b),p=k(b,"P",{}),M(p).forEach(f),mt(_.$$.fragment,b)},m(b,B){D(b,t,B),bt(i,b,B),D(b,s,B),D(b,r,B),bt(u,b,B),D(b,a,B),bt(d,b,B),D(b,h,B),D(b,p,B),bt(_,b,B),m=!0},p(b,[B]){var L,x,X,Y;(!m||B&18)&&l!==(l=""+((((L=b[1])==null?void 0:L.types)&&((x=b[1])==null?void 0:x.types[b[4]])?`${(Y=(X=b[1])==null?void 0:X.types[b[4]])==null?void 0:Y.name} - `:"")+"EVE Online Visual Industry Calculator"))&&(document.title=l);const Q={};!n&&B&1&&(n=!0,Q.value=b[0],Te(()=>n=!1)),i.$set(Q);const A={};!o&&B&32&&(o=!0,A.value=b[5],Te(()=>o=!1)),u.$set(A);const $={};B&16&&($.selectedTypeId=b[4]),B&4&&($.selectableTypes=b[2]),d.$set($);const j={};B&16&&(j.selectedProductId=b[4]),_.$set(j)},i(b){m||(ne(i.$$.fragment,b),ne(u.$$.fragment,b),ne(d.$$.fragment,b),ne(_.$$.fragment,b),m=!0)},o(b){ae(i.$$.fragment,b),ae(u.$$.fragment,b),ae(d.$$.fragment,b),ae(_.$$.fragment,b),m=!1},d(b){b&&f(t),yt(i,b),b&&f(s),b&&f(r),yt(u,b),b&&f(a),yt(d,b),b&&f(h),b&&f(p),yt(_,b)}}}function vn(e,l,t){let i,n,s,r=Ye,u=()=>(r(),r=Pl(n,b=>t(10,s=b)),n),o,a,d,h,p;Ze(e,jl,b=>t(1,a=b)),Ze(e,zl,b=>t(11,d=b)),Ze(e,as,b=>t(12,h=b)),e.$$.on_destroy.push(()=>r());let _=null;const m=[60003760,1028858195912];let v=[],y=gl({}),C=!1;ji(()=>{t(9,C=!0)}),hi(()=>{v.forEach(b=>b&&b())}),xl("locations",y);let T=gl(null);Ze(e,T,b=>t(5,p=b)),xl("marketFilterLocation",T);let S=gl(null);Ze(e,S,b=>t(0,o=b)),xl("currentCharacter",S);function N(b){o=b,S.set(o)}function V(b){p=b,T.set(p)}const q=b=>{ns(`${b.detail}`,{keepfocus:!0})};return e.$$.update=()=>{if(e.$$.dirty&4096&&t(4,i=parseInt(h.params.type)||null),e.$$.dirty&2050&&d.types&&a.types){let b=function(Q){var A,$;return Object.keys(($=(A=d.types[Q].activities[Ot])==null?void 0:A.products)!=null?$:{}).map(j=>parseInt(j))},B=[];Object.values(d.types).forEach(Q=>{B=[...B,...b(Q.type_id)]}),t(2,_=B.filter(Q=>a.types[Q]!==void 0).map(Q=>a.types[Q]))}if(e.$$.dirty&1&&u(t(3,n=Li[o])),e.$$.dirty&1792&&C){v.forEach(Q=>Q()),t(8,v=[]);let b={};y.set(b),s==null||s.forEach(Q=>{b[Q.location_id]=null}),m.forEach(Q=>b[Q]=null),Object.keys(b).forEach(Q=>{let A=bs(parseInt(Q)).subscribe($=>{b[Q]=$,y.set(b)});typeof A=="function"&&v.push(A)})}},[o,a,_,n,i,p,T,S,v,C,s,d,h,N,V,q]}class En extends kl{constructor(l){super();Il(this,l,vn,yn,El,{})}}export{En as default};
